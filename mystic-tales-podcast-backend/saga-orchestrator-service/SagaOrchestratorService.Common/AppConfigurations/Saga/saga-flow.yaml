version: "1.0"

flows:
  user-registration-flow:
    topic: "user-management-domain"
    handle-service: "SagaOrchestratorService"
    description: "Tạo tài khoản"
    save-file: "MainImageFile"
    steps:
      - name: "create-account"
        topic: "user-management-domain"
        handle-service: "UserService"
        description: "Nhận thông tin tài khoản để tạo tài khoản"
        parameters:
          - Email
          - Password
          - FullName
          - Dob
          - Gender
          - Address
          - Phone
          - MainImageFileKey
          - RoleId
        next-request-data:
          - Email
          - Password
          - FullName
          - Dob
          - Gender
          - Address
          - Phone
          - MainImageFileKey
          - RoleId
        response-data:
          - AccountId
          - VerifyCode
          - Email
        onSuccess:
          emit: "create-account.success"
          topic: "user-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "create-account.failed"
          topic: "user-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []

  user-email-verification-flow:
    topic: "user-management-domain"
    handle-service: "SagaOrchestratorService"
    description: "Xác nhận tài khoản"
    save-file: ""
    steps:
      - name: "verify-account"
        topic: "user-management-domain"
        handle-service: "UserService"
        description: "Nhận verifyCode và email để xác nhận tài khoản"
        parameters:
          - VerifyCode
          - Email
        next-request-data:
          - IsVerified
          - Email
        response-data:
          - IsVerified
          - Email
        onSuccess:
          emit: "verify-account.success"
          topic: "user-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "verify-account.failed"
          topic: "user-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []

  user-manual-login-flow:
    topic: "user-management-domain"
    handle-service: "SagaOrchestratorService"
    description: "Đăng nhập thủ công"
    save-file: ""
    steps:
      - name: "login-account-manual"
        topic: "user-management-domain"
        handle-service: "UserService"
        description: "Nhận thông tin đăng nhập để query"
        parameters:
          - Email
          - Password
          - DeviceInfoToken
        next-request-data:
          - Email
          - Password
          - AccessToken
          - DeviceInfoToken
        response-data:
          - AccessToken
          - Message
        onSuccess:
          emit: "login-account-manual.success"
          topic: "user-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "login-account-manual.failed"
          topic: "user-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []

  user-google-login-flow:
    topic: "user-management-domain"
    handle-service: "SagaOrchestratorService"
    description: "Đăng nhập bằng Google"
    save-file: ""
    steps:
      - name: "login-account-google"
        topic: "user-management-domain"
        handle-service: "UserService"
        description: "Nhận AuthorizationCode và RedirectUri để login và gửi về token"
        parameters:
          - AuthorizationCode
          - RedirectUri
          - DeviceInfoToken
        next-request-data:
          - AuthorizationCode
          - RedirectUri
          - DeviceInfoToken
        response-data:
          - AccessToken
          - Message
        onSuccess:
          emit: "login-account-google.success"
          topic: "user-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "login-account-google.failed"
          topic: "user-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []

  user-update-flow:
    topic: "user-management-domain"
    handle-service: "SagaOrchestratorService"
    description: "Cập nhật thông tin người dùng"
    save-file: "MainImageFile"
    steps:
      - name: "update-user"
        topic: "user-management-domain"
        handle-service: "UserService"
        description: "Nhận thông tin account để cập nhật tài khoản"
        parameters:
          - AccountId
          - Email
          - FullName
          - Dob
          - Gender
          - Address
          - Phone
          - MainImageFileKey
        next-request-data:
          - AccountId
          - Email
          - FullName
          - Dob
          - Gender
          - Address
          - Phone
          - MainImageFileKey
        response-data:
          - AccountId
          - Email
          - FullName
          - Dob
          - Gender
          - Address
          - Phone
          - MainImageFileKey
        onSuccess:
          emit: "update-user.success"
          topic: "user-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "update-user.failed"
          topic: "user-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []

  forgot-password-flow:
    topic: "user-management-domain"
    handle-service: "SagaOrchestratorService"
    description: "Quên mật khẩu"
    save-file: ""
    steps:
      - name: "send-reset-password-link"
        topic: "user-management-domain"
        handle-service: "UserService"
        description: "Nhận thông tin account để gửi link reset-password"
        parameters:
          - Email
        next-request-data:
          - Email
          - PasswordResetToken
          - ResetPasswordUrl
          - ExpiredAt
        response-data:
          - Email
          - PasswordResetToken
          - ResetPasswordUrl
          - ExpiredAt
        onSuccess:
          emit: "send-reset-password-link.success"
          topic: "user-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "send-reset-password-link.failed"
          topic: "user-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []

  password-reset-flow:
    topic: "user-management-domain"
    handle-service: "SagaOrchestratorService"
    description: "Đặt lại mật khẩu"
    save-file: ""
    steps:
      - name: "reset-account-password"
        topic: "user-management-domain"
        handle-service: "UserService"
        description: "Nhận token, password mới và email để reset-password"
        parameters:
          - ResetPasswordToken
          - Email
          - NewPassword
        next-request-data:
          - ResetPasswordToken
          - Email
          - NewPassword
        response-data:
          - ResetPasswordToken
          - Email
          - NewPassword
        onSuccess:
          emit: "reset-account-password.success"
          topic: "user-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "reset-account-password.failed"
          topic: "user-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
  
  password-update-flow:
    topic: "user-management-domain"
    handle-service: "SagaOrchestratorService"
    description: "Cập nhật mật khẩu"
    save-file: ""
    steps:
      - name: "update-account-password"
        topic: "user-management-domain"
        handle-service: "UserService"
        description: "Nhận thông tin tài khoản để cập nhật mật khẩu"
        parameters:
          - AccountId
          - OldPassword
          - NewPassword
        next-request-data:
          - AccountId
          - OldPassword
          - NewPassword
        response-data:
          - AccountId
          - OldPassword
          - NewPassword
        onSuccess:
          emit: "update-account-password.success"
          topic: "user-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "update-account-password.failed"
          topic: "user-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []

  podcaster-profile-creation-flow:
    topic: "user-management-domain"
    handle-service: "SagaOrchestratorService"
    description: "Tạo hồ sơ podcaster"
    save-file: "CommitmentDocumentFile"
    steps:
      - name: "create-podcaster-profile"
        topic: "user-management-domain"
        handle-service: "UserService"
        description: "Tạo profile podcaster cho customer"
        parameters:
          - AccountId
          - Name
          - Description
          - CommitmentDocumentFileKey
        next-request-data:
          - AccountId
          - Name
          - Description
          - CommitmentDocumentFileKey
        response-data:
          - AccountId
          - Name
          - Description
          - CommitmentDocumentFileKey
        onSuccess:
          emit: "create-podcaster-profile.success"
          topic: "user-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "create-podcaster-profile.failed"
          topic: "user-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []

  podcaster-profile-update-flow:
    topic: "user-management-domain"
    handle-service: "SagaOrchestratorService"
    description: "Cập nhật hồ sơ podcaster"
    save-file: "BuddyAudioFile"
    steps:
      - name: "update-podcaster-profile"
        topic: "user-management-domain"
        handle-service: "UserService"
        description: "Cập nhật profile của podcaster"
        parameters:
          - AccountId
          - Name
          - Description
          - PricePerBookingWord
          - BuddyAudioFileKey
          - IsBuddy
        next-request-data:
          - AccountId
          - Name
          - Description
          - PricePerBookingWord
          - BuddyAudioFileKey
          - IsBuddy
        response-data:
          - AccountId
          - Name
          - Description
          - PricePerBookingWord
          - BuddyAudioFileKey
          - IsBuddy
        onSuccess:
          emit: "update-podcaster-profile.success"
          topic: "user-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "update-podcaster-profile.failed"
          topic: "user-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []

  podcaster-verification-flow:
    topic: "user-management-domain"
    handle-service: "SagaOrchestratorService"
    description: "Xác minh podcaster"
    save-file: ""
    steps:
      - name: "verify-podcaster"
        topic: "user-management-domain"
        handle-service: "UserService"
        description: "Xác minh podcaster profile bởi staff"
        parameters:
          - AccountId
          - IsVerified
        next-request-data:
          - AccountId
          - IsVerified
        response-data:
          - AccountId
          - IsVerified
        onSuccess:
          emit: "verify-podcaster.success"
          topic: "user-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "verify-podcaster.failed"
          topic: "user-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []

  podcaster-storage-size-increase-flow:
    topic: "user-management-domain"
    handle-service: "SagaOrchestratorService"
    description: "Tăng dung lượng lưu trữ"
    save-file: ""
    steps:
      - name: "increase-storage-size"
        topic: "user-management-domain"
        handle-service: "UserService"
        description: "Thêm dung lượng storage cho podcaster"
        parameters:
          - StorageSize
          - AccountId
        next-request-data:
          - StorageSize
          - AccountId
        response-data:
          - StorageSize
          - AccountId
          - NewStorageSize
          - UpdatedAt
        onSuccess:
          emit: "increase-storage-size.success"
          topic: "user-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "increase-storage-size.failed"
          topic: "user-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []

  podcaster-storage-size-decrease-flow:
    topic: "user-management-domain"
    handle-service: "SagaOrchestratorService"
    description: "Giảm dung lượng lưu trữ"
    save-file: ""
    steps:
      - name: "decrease-storage-size"
        topic: "user-management-domain"
        handle-service: "UserService"
        description: "Giảm dung lượng storage cho podcaster và tăng dưng lượng xài"
        parameters:
          - StorageSize
          - AccountId
        next-request-data:
          - StorageSize
          - AccountId
        response-data:
          - StorageSize
          - AccountId
          - NewStorageSize
          - UpdatedAt
        onSuccess:
          emit: "decrease-storage-size.success"
          topic: "user-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "decrease-storage-size.failed"
          topic: "user-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []

  user-deactivation-flow:
    topic: "user-management-domain"
    handle-service: "SagaOrchestratorService"
    description: "Vô hiệu hóa tài khoản"
    save-file: ""
    steps:
      - name: "deactivate-account"
        topic: "user-management-domain"
        handle-service: "UserService"
        description: "Deactivate tài khoản user"
        parameters:
          - AccountId
        next-request-data:
          - AccountId
        response-data:
          - AccountId
        onSuccess:
          emit: "deactivate-account.success"
          topic: "user-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "deactivate-account.failed"
          topic: "user-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
  
  user-activation-flow:
    topic: "user-management-domain"
    handle-service: "SagaOrchestratorService"
    description: "Kích hoạt tài khoản"
    save-file: ""
    steps:
      - name: "activate-account"
        topic: "user-management-domain"
        handle-service: "UserService"
        description: "Activate tài khoản user"
        parameters:
          - AccountId
        next-request-data:
          - AccountId
        response-data:
          - AccountId
        onSuccess:
          emit: "activate-account.success"
          topic: "user-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "activate-account.failed"
          topic: "user-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []

  user-violation-level-update-flow:
    topic: "user-management-domain"
    handle-service: "SagaOrchestratorService"
    description: "Cập nhật cấp độ vi phạm"
    save-file: ""
    steps:
      - name: "update-account-violation-level"
        topic: "user-management-domain"
        handle-service: "UserService"
        description: "Cập nhật cấp độ vi phạm cho tài khoản"
        parameters:
          - AccountId
          - ViolationLevel
        next-request-data:
          - AccountId
          - ViolationLevel
        response-data:
          - AccountId
          - NewViolationLevel
        onSuccess:
          emit: "update-account-violation-level.success"
          topic: "user-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "update-account-violation-level.failed"
          topic: "user-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []

  user-violation-punishment-flow:
    topic: "user-management-domain"
    handle-service: "SagaOrchestratorService"
    description: "Xử phạt vi phạm"
    save-file: ""
    steps:
      - name: "add-account-violation-point"
        topic: "user-management-domain"
        handle-service: "UserService"
        description: "Cộng violation points cho tài khoản"
        parameters:
          - AccountId
          - ViolationPoint
        next-request-data:
          - AccountId
          - ViolationPoint
        response-data:
          - AccountId
          - NewViolationPoint
          - NewViolationLevel
        onSuccess:
          emit: "add-account-violation-point.success"
          topic: "user-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "add-account-violation-point.failed"
          topic: "user-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []

  user-violation-reversal-flow:
    topic: "user-management-domain"
    handle-service: "SagaOrchestratorService"
    description: "Hoàn tác vi phạm"
    save-file: ""
    steps:
      - name: "subtract-account-violation-point"
        topic: "user-management-domain"
        handle-service: "UserService"
        description: "Trừ violation points cho tài khoản"
        parameters:
          - AccountId
          - ViolationPoint
        next-request-data:
          - AccountId
          - ViolationPoint
        response-data:
          - AccountId
          - NewViolationPoint
          - NewViolationLevel
        onSuccess:
          emit: "subtract-account-violation-point.success"
          topic: "user-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "subtract-account-violation-point.failed"
          topic: "user-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []

  user-violation-threshold-reach-flow:
    topic: "user-management-domain"
    handle-service: "SagaOrchestratorService"
    description: "Xử lý khi đạt ngưỡng vi phạm"
    save-file: ""
    steps:
      - name: "check-violation-threshold"
        topic: "user-management-domain"
        handle-service: "UserService"
        description: "Kiểm tra ngưỡng violation để áp dụng punishment"
        parameters:
          - AccountId
          - SystemConfigProfileId
        next-request-data:
          - AccountId
          - SystemConfigProfileId
        response-data:
          - AccountId
          - SystemConfigProfileId
          - ViolationLevel
          - PunishmentDays
        onSuccess:
          emit: "check-violation-threshold.success"
          topic: "user-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "check-violation-threshold.failed"
          topic: "user-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []

  user-violation-decay-flow:
    topic: "user-management-domain"
    handle-service: "SagaOrchestratorService"
    description: "Giảm điểm vi phạm theo thời gian"
    save-file: ""
    steps:
      - name: "decrease-account-violation-point"
        topic: "user-management-domain"
        handle-service: "UserService"
        description: "Giảm violation points theo thời gian (automated)"
        parameters:
          - AccountId
          - SystemConfigProfileId
        next-request-data:
          - AccountId
          - SystemConfigProfileId
        response-data:
          - AccountId
          - NewViolationPoint
          - NewViolationLevel
        onSuccess:
          emit: "decrease-account-violation-point.success"
          topic: "user-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "decrease-account-violation-point.failed"
          topic: "user-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []

  podcast-listen-tracking-flow:
    topic: "user-management-domain"
    handle-service: "SagaOrchestratorService"
    description: "Theo dõi lượt nghe podcast"
    save-file: ""
    steps:
      - name: "save-episode-history"
        topic: "user-management-domain"
        handle-service: "UserService"
        description: "Lưu lịch sử nghe podcast episode"
        parameters:
          - AccountId
          - PodcastEpisodeId
          - ListenTimestamp
        next-request-data:
          - AccountId
          - PodcastEpisodeId
          - ListenTimestamp
        response-data:
          - AccountId
          - PodcastEpisodeId
          - ListenTimestamp
          - AccountPodcastListenHistoryId
        onSuccess:
          emit: "save-episode-history.success"
          topic: "user-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "save-episode-history.failed"
          topic: "user-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []

  podcast-buddy-rating-recalculation-flow:
    topic: "user-management-domain"
    handle-service: "SagaOrchestratorService"
    description: "Tính lại đánh giá podcast buddy"
    save-file: ""
    steps:
      - name: "update-podcaster-rating"
        topic: "user-management-domain"
        handle-service: "UserService"
        description: "Tính lại average rating cho podcaster"
        parameters:
          - PodcastBuddyId
        next-request-data:
          - PodcastBuddyId
        response-data:
          - PodcastBuddyId
          - NewRating
        onSuccess:
          emit: "update-podcaster-rating.success"
          topic: "user-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "update-podcaster-rating.failed"
          topic: "user-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []

  podcaster-follow-flow:
    topic: "user-management-domain"
    handle-service: "SagaOrchestratorService"
    description: "Theo dõi podcaster"
    save-file: ""
    steps:
      - name: "create-podcaster-followed"
        topic: "user-management-domain"
        handle-service: "UserService"
        description: "Follow podcaster"
        parameters:
          - AccountId
          - PodcastBuddyId
        next-request-data:
          - AccountId
          - PodcastBuddyId
        response-data:
          - FollowedPodcasterId
          - AccountId
        onSuccess:
          emit: "create-podcaster-followed.success"
          topic: "user-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "create-podcaster-followed.failed"
          topic: "user-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []

  podcaster-unfollow-flow:
    topic: "user-management-domain"
    handle-service: "SagaOrchestratorService"
    description: "Bỏ theo dõi podcaster"
    save-file: ""
    steps:
      - name: "delete-podcaster-followed"
        topic: "user-management-domain"
        handle-service: "UserService"
        description: "Unfollow podcaster, nếu Account = null thì xóa tất cả followers của podcaster"
        parameters:
          - AccountId
          - PodcastBuddyId
        next-request-data:
          - AccountId
          - PodcastBuddyId
          - AffectedAccountIds
        response-data:
          - AccountId
          - PodcastBuddyId
          - AffectedAccountIds
        onSuccess:
          emit: "delete-podcaster-followed.success"
          topic: "user-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "delete-podcaster-followed.failed"
          topic: "user-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []

  account-balance-addition-flow:
    topic: "user-management-domain"
    handle-service: "SagaOrchestratorService"
    description: "Nạp tiền vào tài khoản"
    save-file: ""
    steps:
      - name: "add-account-balance-amount"
        topic: "user-management-domain"
        handle-service: "UserService"
        description: "Thêm tiền vào ví"
        parameters:
          - AccountId
          - Amount
        next-request-data:
          - AccountId
          - Amount
        response-data:
          - AccountId
          - Amount
          - NewBalance
        onSuccess:
          emit: "add-account-balance-amount.success"
          topic: "user-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "add-account-balance-amount.failed"
          topic: "user-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []

  account-balance-subtraction-flow:
    topic: "user-management-domain"
    handle-service: "SagaOrchestratorService"
    description: "Rút tiền từ tài khoản"
    save-file: ""
    steps:
      - name: "subtract-account-balance-amount"
        topic: "user-management-domain"
        handle-service: "UserService"
        description: "Trừ tiền từ ví "
        parameters:
          - AccountId
          - Amount
        next-request-data:
          - AccountId
          - Amount
        response-data:
          - AccountId
          - Amount
          - NewBalance
        onSuccess:
          emit: "subtract-account-balance-amount.success"
          topic: "user-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "subtract-account-balance-amount.failed"
          topic: "user-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []

  notification-creation-flow:
    topic: "notification-domain"
    handle-service: "SagaOrchestratorService"
    description: "Tạo thông báo đơn"
    save-file: ""
    steps:
      - name: "create-account-notification"
        topic: "notification-domain"
        handle-service: "UserService"
        description: "Tạo thông báo đơn cho 1 tài khoản"
        parameters:
          - Notification
        next-request-data:
          - Notification
        response-data:
          - AccountNotificationId
          - Notification
          - CreatedAt
        onSuccess:
          emit: "create-account-notification.success"
          topic: "notification-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "create-single-account-notification.failed"
          topic: "notification-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []

  account-status-change-flow:
    topic: "user-management-domain"
    handle-service: "SagaOrchestratorService"
    description: "Thay đổi trạng thái tài khoản"
    save-file: ""
    steps:
      - name: "change-account-status"
        topic: "user-management-domain"
        handle-service: "UserService"
        description: "Thay đổi trạng thái tài khoản"
        parameters:
          - Id
        next-request-data:
          - Id
        response-data:
          - Id
        onSuccess:
          emit: "change-account-status.success"
          topic: "user-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "change-account-status.failed"
          topic: "user-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []

  account-podcast-listen-slot-subtraction-flow:
    topic: "user-management-domain"
    handle-service: "SagaOrchestratorService"
    description: "Cập nhật số lượt nghe còn lại của tài khoản"
    save-file: ""
    steps:
      - name: "subtract-account-podcast-listen-slot"
        topic: "user-management-domain"
        handle-service: "UserService"
        description: "Cập nhật số lượt nghe còn lại của tài khoản"
        parameters:
          - AccountId
          - PodcastListenSlotAmount
        next-request-data:
          - AccountId
          - PodcastListenSlotAmount
        response-data:
          - AccountId
          - PodcastListenSlotAmount
          - NewPodcastListenSlot
        onSuccess:
          emit: "subtract-account-podcast-listen-slot.success"
          topic: "user-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "subtract-account-podcast-listen-slot.failed"
          topic: "user-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []

  podcaster-listen-count-add-flow:
    topic: "user-management-domain"
    handle-service: "SagaOrchestratorService"
    description: "Cập nhật số lượt nghe của podcaster"
    save-file: ""
    steps:
      - name: "add-podcaster-listen-count"
        topic: "user-management-domain"
        handle-service: "UserService"
        description: "Cập nhật số lượt nghe của podcaster"
        parameters:
          - PodcasterId
          - ListenCountAmount
        next-request-data:
          - PodcasterId
          - ListenCountAmount
        response-data:
          - PodcasterId
          - ListenCountAmount
          - NewListenCount
        onSuccess:
          emit: "add-podcaster-listen-count.success"
          topic: "user-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "add-podcaster-listen-count.failed"
          topic: "user-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []

  account-listen-history-deletion-by-episode-id-flow:
    topic: "user-management-domain"
    handle-service: "SagaOrchestratorService"
    description: "Xóa lịch sử nghe theo episode id"
    save-file: ""
    steps:
      - name: "delete-listen-history-by-episode-id"
        topic: "user-management-domain"
        handle-service: "UserService"
        description: "Xóa lịch sử nghe theo episode id"
        parameters:
          - PodcastEpisodeId
        next-request-data:
          - PodcastEpisodeId
        reponse-data:
          - PodcastEpisodeId
        onSuccess:
          emit: "delete-listen-history-by-episode-id.success"
          topic: "user-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "delete-listen-history-by-episode-id.failed"
          topic: "user-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []

  channel-favorite-flow:
    topic: "user-management-domain"
    handle-service: "SagaOrchestratorService"
    description: "Yêu thích kênh podcast"
    save-file: ""
    steps:
      - name: "create-channel-favorited"
        topic: "user-management-domain"
        handle-service: "PodcastService"
        description: "Thêm channel vào danh sách yêu thích"
        parameters:
          - AccountId
          - PodcastChannelId
        next-request-data:
          - AccountId
          - PodcastChannelId
        response-data:
          - AccountId
          - PodcastChannelId
        onSuccess:
          emit: "create-channel-favorited.success"
          topic: "user-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: 
            - name: "plus-channel-total-favorite"
              topic: "content-management-domain"
              handle-service: "PodcastService"
          nextFlows: []
        onFailure:
          emit: "create-channel-favorited.failed"
          topic: "user-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
      - name: "plus-channel-total-favorite"
        topic: "content-management-domain"
        handle-service: "PodcastService"
        description: "Tăng tổng số lượt yêu thích kênh podcast"
        parameters:
          - PodcastChannelId
        next-request-data:
          - AccountId
          - PodcastChannelId
        response-data:
          - AccountId
          - PodcastChannelId
        onSuccess:
          emit: "plus-channel-total-favorite.success"
          topic: "content-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "plus-channel-total-favorite.failed"
          topic: "content-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: 
            - name: "create-channel-favorited-rollback-flow"
              topic: "user-management-domain"
              handle-service: "SagaOrchestratorService"

  channel-unfavorite-flow:
    topic: "user-management-domain"
    handle-service: "SagaOrchestratorService"
    description: "Bỏ yêu thích kênh podcast, AccountId null sẽ unfavorite tất cả"
    save-file: ""
    steps:
      - name: "delete-channel-favorited"
        topic: "user-management-domain"
        handle-service: "PodcastService"
        description: "Xóa channel khỏi danh sách yêu thích"
        parameters:
          - AccountId
          - PodcastChannelId
        next-request-data:
          - AccountId
          - PodcastChannelId
          - AffectedAccountIds
        response-data:
          - AccountId
          - PodcastChannelId
          - AffectedAccountIds
        onSuccess:
          emit: "delete-channel-favorited.success"
          topic: "user-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: 
            - name: "subtract-channel-total-favorite"
              topic: "content-management-domain"
              handle-service: "PodcastService"
          nextFlows: []
        onFailure:
          emit: "delete-channel-favorited.failed"
          topic: "user-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
      - name: "subtract-channel-total-favorite"
        topic: "content-management-domain"
        handle-service: "PodcastService"
        description: "Giảm tổng số lượt yêu thích kênh podcast theo AffectedAccountIds"
        parameters:
          - PodcastChannelId
          - AffectedAccountIds
        next-request-data:
          - AccountId
          - PodcastChannelId
          - AffectedAccountIds
        response-data:
          - AccountId
          - PodcastChannelId
          - AffectedAccountIds
        onSuccess:
          emit: "subtract-channel-total-favorite.success"
          topic: "content-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "subtract-channel-total-favorite.failed"
          topic: "content-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: 
            - name: "delete-channel-favorited-rollback-flow"
              topic: "user-management-domain"
              handle-service: "SagaOrchestratorService"

  show-follow-flow:
    topic: "user-management-domain"
    handle-service: "SagaOrchestratorService"
    description: "Theo dõi chương trình podcast"
    save-file: ""
    steps:
      - name: "create-show-followed"
        topic: "user-management-domain"
        handle-service: "PodcastService"
        description: "Follow show"
        parameters:
          - AccountId
          - PodcastShowId
        next-request-data:
          - AccountId
          - PodcastShowId
        response-data:
          - AccountId
          - PodcastShowId
        onSuccess:
          emit: "create-show-followed.success"
          topic: "user-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: 
            - name: "plus-show-total-follow"
              topic: "content-management-domain"
              handle-service: "PodcastService"
          nextFlows: []
        onFailure:
          emit: "create-show-followed.failed"
          topic: "user-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
      - name: "plus-show-total-follow"
        topic: "content-management-domain"
        handle-service: "PodcastService"
        description: "Tăng tổng số lượt theo dõi chương trình podcast"
        parameters:
          - PodcastShowId
        next-request-data:
          - AccountId
          - PodcastShowId
        response-data:
          - AccountId
          - PodcastShowId
        onSuccess:
          emit: "plus-show-total-follow.success"
          topic: "content-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "plus-show-total-follow.failed"
          topic: "content-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: 
            - name: "create-show-followed-rollback-flow"
              topic: "user-management-domain"
              handle-service: "SagaOrchestratorService"

  show-unfollow-flow:
    topic: "user-management-domain"
    handle-service: "SagaOrchestratorService"
    description: "Bỏ theo dõi chương trình podcast, AccountId null sẽ unfollow tất cả"
    save-file: ""
    steps:
      - name: "delete-show-followed"
        topic: "user-management-domain"
        handle-service: "PodcastService"
        description: "Unfollow show"
        parameters:
          - AccountId
          - PodcastShowId
        next-request-data:
          - AccountId
          - PodcastShowId
          - AffectedAccountIds
        response-data:
          - AccountId
          - PodcastShowId
          - AffectedAccountIds
        onSuccess:
          emit: "delete-show-followed.success"
          topic: "user-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: 
            - name: "subtract-show-total-follow"
              topic: "content-management-domain"
              handle-service: "PodcastService"
          nextFlows: []
        onFailure:
          emit: "delete-show-followed.failed"
          topic: "user-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
      - name: "subtract-show-total-follow"
        topic: "content-management-domain"
        handle-service: "PodcastService"
        description: "Giảm tổng số lượt theo dõi chương trình podcast theo AffectedAccountIds"
        parameters:
          - PodcastShowId
          - AffectedAccountIds
        next-request-data:
          - AccountId
          - PodcastShowId
          - AffectedAccountIds
        response-data:
          - AccountId
          - PodcastShowId
          - AffectedAccountIds
        onSuccess:
          emit: "subtract-show-total-follow.success"
          topic: "content-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "subtract-show-total-follow.failed"
          topic: "content-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: 
            - name: "delete-show-followed-rollback-flow"
              topic: "user-management-domain"
              handle-service: "SagaOrchestratorService"

  episode-save-flow:
    topic: "user-management-domain"
    handle-service: "SagaOrchestratorService"
    description: "Lưu tập podcast"
    save-file: ""
    steps:
      - name: "create-episode-saved"
        topic: "user-management-domain"
        handle-service: "PodcastService"
        description: "Lưu episode vào danh sách đã lưu"
        parameters:
          - AccountId
          - PodcastEpisodeId
        next-request-data:
          - AccountId
          - PodcastEpisodeId
        response-data:
          - AccountId
          - PodcastEpisodeId
        onSuccess:
          emit: "create-episode-saved.success"
          topic: "user-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: 
            - name: "plus-episode-total-saved"
              topic: "content-management-domain"
              handle-service: "PodcastService"
          nextFlows: []
        onFailure:
          emit: "create-episode-saved.failed"
          topic: "user-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
      - name: "plus-episode-total-saved"
        topic: "content-management-domain"
        handle-service: "PodcastService"
        description: "Tăng tổng số lượt lưu tập podcast"
        parameters:
          - PodcastEpisodeId
        next-request-data:
          - AccountId
          - PodcastEpisodeId
        response-data:
          - AccountId
          - PodcastEpisodeId
        onSuccess:
          emit: "plus-episode-total-saved.success"
          topic: "content-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "plus-episode-total-saved.failed"
          topic: "content-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: 
            - name: "create-episode-saved-rollback-flow"
              topic: "user-management-domain"
              handle-service: "SagaOrchestratorService"

  episode-unsave-flow:
    topic: "user-management-domain"
    handle-service: "SagaOrchestratorService"
    description: "Bỏ lưu tập podcast"
    save-file: ""
    steps:
      - name: "delete-episode-saved"
        topic: "user-management-domain"
        handle-service: "PodcastService"
        description: "Xóa episode khỏi danh sách đã lưu, AccountId null sẽ unsave tất cả"
        parameters:
          - AccountId
          - PodcastEpisodeId
        next-request-data:
          - AccountId
          - PodcastEpisodeId
          - AffectedAccountIds
        response-data:
          - AccountId
          - PodcastEpisodeId
          - AffectedAccountIds
        onSuccess:
          emit: "delete-episode-saved.success"
          topic: "user-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: 
            - name: "subtract-episode-total-saved"
              topic: "content-management-domain"
              handle-service: "PodcastService"
          nextFlows: []
        onFailure:
          emit: "delete-episode-saved.failed"
          topic: "user-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
      - name: "subtract-episode-total-saved"
        topic: "content-management-domain"
        handle-service: "PodcastService"
        description: "Giảm tổng số lượt lưu tập podcast, theo AffectedAccountIds"
        parameters:
          - PodcastEpisodeId
          - AffectedAccountIds
        next-request-data:
          - AccountId
          - PodcastEpisodeId
          - AffectedAccountIds
        response-data:
          - AccountId
          - PodcastEpisodeId
          - AffectedAccountIds
        onSuccess:
          emit: "subtract-episode-total-saved.success"
          topic: "content-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "subtract-episode-total-saved.failed"
          topic: "content-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: 
            - name: "delete-episode-saved-rollback-flow"
              topic: "user-management-domain"
              handle-service: "SagaOrchestratorService"

  background-sound-track-creation-flow:
    topic: "content-management-domain"
    handle-service: "SagaOrchestratorService"
    description: "Tạo background sound track"
    save-file: "MainImageFile, AudioFile"
    steps:
      - name: "create-background-sound-track"
        topic: "content-management-domain"
        handle-service: "PodcastService"
        description: "Tạo background sound track mới"
        parameters:
          - Name
          - Description
          - MainImageFileKey
          - AudioFileKey
        next-request-data:
          - Name
          - Description
          - MainImageFileKey
          - AudioFileKey
        response-data:
          - PodcastBackgroundSoundTrackId
          - Name
          - Description
          - MainImageFileKey
          - AudioFileKey
        onSuccess:
          emit: "create-background-sound-track.success"
          topic: "content-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "create-background-sound-track.failed"
          topic: "content-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
  
  background-sound-track-update-flow:
    topic: "content-management-domain"
    handle-service: "SagaOrchestratorService"
    description: "Cập nhật background sound track"
    save-file: "MainImageFile, AudioFile"
    steps:
      - name: "update-background-sound-track"
        topic: "content-management-domain"
        handle-service: "PodcastService"
        description: "Cập nhật thông tin background sound track"
        parameters:
          - PodcastBackgroundSoundTrackId
          - Name
          - Description
          - MainImageFileKey
          - AudioFileKey
        next-request-data:
          - PodcastBackgroundSoundTrackId
          - Name
          - Description
          - MainImageFileKey
          - AudioFileKey
        response-data:
          - PodcastBackgroundSoundTrackId
          - Name
          - Description
          - MainImageFileKey
          - AudioFileKey
        onSuccess:
          emit: "update-background-sound-track.success"
          topic: "content-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "update-background-sound-track.failed"
          topic: "content-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
  
  background-sound-track-deletion-flow:
    topic: "content-management-domain"
    handle-service: "SagaOrchestratorService"
    description: "Xóa background sound track"
    save-file: ""
    steps:
      - name: "delete-background-sound-track"
        topic: "content-management-domain"
        handle-service: "PodcastService"
        description: "Xóa background sound track"
        parameters:
          - PodcastBackgroundSoundTrackId
        next-request-data:
          - PodcastBackgroundSoundTrackId
        response-data:
          - PodcastBackgroundSoundTrackId
        onSuccess:
          emit: "delete-background-sound-track.success"
          topic: "content-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "delete-background-sound-track.failed"
          topic: "content-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []

  channel-creation-flow:
    topic: "content-management-domain"
    handle-service: "SagaOrchestratorService"
    description: "Tạo kênh podcast"
    save-file: "MainImageFile, BackgroundImageFile"
    steps:
      - name: "create-channel"
        topic: "content-management-domain"
        handle-service: "PodcastService"
        description: "Tạo podcast channel mới"
        parameters:
          - Name
          - Description
          - MainImageFileKey
          - BackgroundImageFileKey
          - PodcastCategoryId
          - PodcastSubCategoryId
          - HashtagIds
          - PodcasterId
        next-request-data:
          - Name
          - Description
          - MainImageFileKey
          - BackgroundImageFileKey
          - PodcastCategoryId
          - PodcastSubCategoryId
          - HashtagIds
          - PodcasterId
        response-data:
          - PodcastChannelId
          - Name
          - Description
          - MainImageFileKey
          - BackgroundImageFileKey
          - PodcastCategoryId
          - PodcastSubCategoryId
          - HashtagIds
          - PodcasterId
        onSuccess:
          emit: "create-channel.success"
          topic: "content-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "create-channel.failed"
          topic: "content-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []

  channel-update-flow:
    topic: "content-management-domain"
    handle-service: "SagaOrchestratorService"
    description: "Cập nhật kênh podcast"
    save-file: "MainImageFile, BackgroundImageFile"
    steps:
      - name: "update-channel"
        topic: "content-management-domain"
        handle-service: "PodcastService"
        description: "Cập nhật thông tin channel"
        parameters:
          - PodcastChannelId
          - Name
          - Description
          - MainImageFileKey
          - BackgroundImageFileKey
          - PodcastCategoryId
          - PodcastSubCategoryId
          - HashtagIds
          - PodcasterId
        next-request-data:
          - PodcastChannelId
          - Name
          - Description
          - MainImageFileKey
          - BackgroundImageFileKey
          - PodcastCategoryId
          - PodcastSubCategoryId
          - HashtagIds
          - PodcasterId
        response-data:
          - PodcastChannelId
          - Name
          - Description
          - MainImageFileKey
          - BackgroundImageFileKey
          - PodcastCategoryId
          - PodcastSubCategoryId
          - HashtagIds
          - UpdatedAt
          - PodcasterId
        onSuccess:
          emit: "update-channel.success"
          topic: "content-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "update-channel.failed"
          topic: "content-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []

  channel-publish-flow:
    topic: "content-management-domain"
    handle-service: "SagaOrchestratorService"
    description: "Xuất bản kênh"
    save-file: ""
    steps:
      - name: "publish-channel"
        topic: "content-management-domain"
        handle-service: "PodcastService"
        description: "Publish channel"
        parameters:
          - PodcastChannelId
        next-request-data:
          - PodcastChannelId
        response-data:
          - PodcastChannelId
        onSuccess:
          emit: "publish-channel.success"
          topic: "content-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "publish-channel.failed"
          topic: "content-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []

  channel-unpublish-flow:
    topic: "content-management-domain"
    handle-service: "PodcastService"
    description: "Handles the unpublishing of podcast channels."
    save-files: ""
    steps:
      - name: "cancel-channel-subscription-unpublish-channel-force"
        topic: "subscription-management-domain"
        handle-service: "SubscriptionService"
        description: "Cancels and refunds all active subscriptions of the channel and its shows."
        parameters:
          - PodcastChannelId
        next-request-data:
          - PodcastChannelId
        response-data:
          - PodcastChannelId
        onSuccess:
          emit: "cancel-channel-subscription-unpublish-channel-force.success"
          topic: "subscription-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps:
            - name: "delete-account-favorited-channel-unpublish-channel-force"
              topic: "user-management-domain"
              handle-service: "UserService"
          nextFlows: []
        onFailure:
          emit: "cancel-channel-subscription-unpublish-channel-force.failed"
          topic: "subscription-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
      - name: "delete-account-favorited-channel-unpublish-channel-force"
        topic: "user-management-domain"
        handle-service: "UserService"
        description: "Removes the channel from all users' favorited lists."
        parameters:
          - PodcastChannelId
        next-request-data:
          - PodcastChannelId
        response-data:
          - PodcastChannelId
        onSuccess:
          emit: "delete-account-favorited-channel-unpublish-channel-force.success"
          topic: "user-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps:
            - name: "dismiss-channel-shows-dmca-unpublish-channel-force"
              topic: "dmca-management-domain"
              handle-service: "ModerationService"
          nextFlows: []
        onFailure:
          emit: "delete-account-favorited-channel-unpublish-channel-force.failed"
          topic: "user-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
      - name: "dismiss-channel-shows-dmca-unpublish-channel-force"
        topic: "dmca-management-domain"
        handle-service: "ModerationService"
        description: "Dismisses all show DMCA accusations of the channel (only changes DMCA status)."
        parameters:
          - PodcastChannelId
        next-request-data:
          - PodcastChannelId
          - DmcaDismissedShowIds
        response-data:
          - PodcastChannelId
          - DmcaDismissedShowIds
        onSuccess:
          emit: "dismiss-channel-shows-dmca-unpublish-channel-force.success"
          topic: "dmca-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps:
            - name: "remove-channel-dismissed-shows-dmca-unpublish-channel-force"
              topic: "content-management-domain"
              handle-service: "PodcastService"
          nextFlows: []
        onFailure:
          emit: "dismiss-channel-shows-dmca-unpublish-channel-force.failed"
          topic: "dmca-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
      - name: "remove-channel-dismissed-shows-dmca-unpublish-channel-force"
        topic: "content-management-domain"
        handle-service: "PodcastService"
        description: "Removes dismissed show DMCAs (changes status to remove + runs add violation point flow if applicable)."
        parameters:
          - PodcastChannelId
          - DmcaDismissedShowIds
        next-request-data:
          - PodcastChannelId
          - DmcaDismissedShowIds
        response-data:
          - PodcastChannelId
          - DmcaDismissedShowIds
        onSuccess:
          emit: "remove-channel-dismissed-shows-dmca-unpublish-channel-force.success"
          topic: "content-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps:
            - name: "delete-channel-shows-review-unpublish-channel-force"
              topic: "public-review-management-domain"
              handle-service: "PodcastService"
          nextFlows: []
        onFailure:
          emit: "remove-channel-dismissed-shows-dmca-unpublish-channel-force.failed"
          topic: "content-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
      - name: "delete-channel-shows-review-unpublish-channel-force"
        topic: "public-review-management-domain"
        handle-service: "PodcastService"
        description: "Deletes all show reviews of dismissed shows."
        parameters:
          - PodcastChannelId
          - DmcaDismissedShowIds
        next-request-data:
          - PodcastChannelId
          - DmcaDismissedShowIds
        response-data:
          - PodcastChannelId
          - DmcaDismissedShowIds
        onSuccess:
          emit: "delete-channel-shows-review-unpublish-channel-force.success"
          topic: "public-review-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps:
            - name: "delete-account-followed-channel-shows-unpublish-channel-force"
              topic: "user-management-domain"
              handle-service: "UserService"
          nextFlows: []
        onFailure:
          emit: "delete-channel-shows-review-unpublish-channel-force.failed"
          topic: "public-review-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
      - name: "delete-account-followed-channel-shows-unpublish-channel-force"
        topic: "user-management-domain"
        handle-service: "UserService"
        description: "Removes dismissed shows from users' followed lists."
        parameters:
          - PodcastChannelId
          - DmcaDismissedShowIds
        next-request-data:
          - PodcastChannelId
          - DmcaDismissedShowIds
        response-data:
          - PodcastChannelId
          - DmcaDismissedShowIds
        onSuccess:
          emit: "delete-account-followed-channel-shows-unpublish-channel-force.success"
          topic: "user-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps:
            - name: "resolve-channel-shows-report-no-effect-unpublish-channel-force"
              topic: "report-management-domain"
              handle-service: "ModerationService"
          nextFlows: []
        onFailure:
          emit: "delete-account-followed-channel-shows-unpublish-channel-force.failed"
          topic: "user-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
      - name: "resolve-channel-shows-report-no-effect-unpublish-channel-force"
        topic: "report-management-domain"
        handle-service: "ModerationService"
        description: "Resolves all dismissed show report review sessions with no effect (includes resolving child reports)."
        parameters:
          - DmcaDismissedShowIds
        next-request-data:
          - PodcastChannelId
          - DmcaDismissedShowIds
        response-data:
          - PodcastChannelId
          - DmcaDismissedShowIds
        onSuccess:
          emit: "resolve-channel-shows-report-no-effect-unpublish-channel-force.success"
          topic: "report-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps:
            - name: "dismiss-channel-episodes-dmca-unpublish-channel-force"
              topic: "dmca-management-domain"
              handle-service: "ModerationService"
          nextFlows: []
        onFailure:
          emit: "resolve-channel-shows-report-no-effect-unpublish-channel-force.failed"
          topic: "report-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
      - name: "dismiss-channel-episodes-dmca-unpublish-channel-force"
        topic: "dmca-management-domain"
        handle-service: "ModerationService"
        description: "Dismisses all episode DMCA accusations of the channel (only changes DMCA status)."
        parameters:
          - PodcastChannelId
        next-request-data:
          - PodcastChannelId
          - DmcaDismissedShowIds
          - DmcaDismissedEpisodeIds
        response-data:
          - PodcastChannelId
          - DmcaDismissedEpisodeIds
        onSuccess:
          emit: "dismiss-channel-episodes-dmca-unpublish-channel-force.success"
          topic: "dmca-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps:
            - name: "remove-channel-dismissed-episodes-dmca-unpublish-channel-force"
              topic: "content-management-domain"
              handle-service: "PodcastService"
          nextFlows: []
        onFailure:
          emit: "dismiss-channel-episodes-dmca-unpublish-channel-force.failed"
          topic: "dmca-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
      - name: "remove-channel-dismissed-episodes-dmca-unpublish-channel-force"
        topic: "content-management-domain"
        handle-service: "PodcastService"
        description: "Removes dismissed episode DMCAs (changes status to remove + runs add violation point flow if applicable)."
        parameters:
          - PodcastChannelId
          - DmcaDismissedEpisodeIds
        next-request-data:
          - PodcastChannelId
          - DmcaDismissedShowIds
          - DmcaDismissedEpisodeIds
        response-data:
          - PodcastChannelId
          - DmcaDismissedEpisodeIds
        onSuccess:
          emit: "remove-channel-dismissed-episodes-dmca-unpublish-channel-force.success"
          topic: "content-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps:
            - name: "delete-account-saved-channel-episodes-unpublish-channel-force"
              topic: "user-management-domain"
              handle-service: "UserService"
          nextFlows: []
        onFailure:
          emit: "remove-channel-dismissed-episodes-dmca-unpublish-channel-force.failed"
          topic: "content-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
      - name: "delete-account-saved-channel-episodes-unpublish-channel-force"
        topic: "user-management-domain"
        handle-service: "UserService"
        description: "Removes dismissed episodes from users' saved lists."
        parameters:
          - PodcastChannelId
          - DmcaDismissedEpisodeIds
        next-request-data:
          - PodcastChannelId
          - DmcaDismissedShowIds
          - DmcaDismissedEpisodeIds
        response-data:
          - PodcastChannelId
          - DmcaDismissedEpisodeIds
        onSuccess:
          emit: "delete-account-saved-channel-episodes-unpublish-channel-force.success"
          topic: "user-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps:
            - name: "resolve-channel-episodes-report-no-effect-unpublish-channel-force"
              topic: "report-management-domain"
              handle-service: "ModerationService"
          nextFlows: []
        onFailure:
          emit: "delete-account-saved-channel-episodes-unpublish-channel-force.failed"
          topic: "user-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
      - name: "resolve-channel-episodes-report-no-effect-unpublish-channel-force"
        topic: "report-management-domain"
        handle-service: "ModerationService"
        description: "Resolves all dismissed episode report review sessions with no effect (includes resolving child reports)."
        parameters:
          - DmcaDismissedEpisodeIds
        next-request-data:
          - PodcastChannelId
          - DmcaDismissedShowIds
          - DmcaDismissedEpisodeIds
        response-data:
          - PodcastChannelId
          - DmcaDismissedEpisodeIds
        onSuccess:
          emit: "resolve-channel-episodes-report-no-effect-unpublish-channel-force.success"
          topic: "report-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps:
            - name: "remove-channel-episodes-listen-session-content-unpublish-channel-force"
              topic: "content-management-domain"
              handle-service: "PodcastService"
          nextFlows: []
        onFailure:
          emit: "resolve-channel-episodes-report-no-effect-unpublish-channel-force.failed"
          topic: "report-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
      - name: "remove-channel-episodes-listen-session-content-unpublish-channel-force"
        topic: "content-management-domain"
        handle-service: "PodcastService"
        description: "Removes dismissed episodes from users' listen session."
        parameters:
          - DmcaDismissedShowIds
        next-request-data:
          - PodcastChannelId
          - DmcaDismissedShowIds
          - DmcaDismissedEpisodeIds
        response-data:
          - PodcastChannelId
          - DmcaDismissedEpisodeIds
        onSuccess:
          emit: "remove-channel-episodes-listen-session-content-unpublish-channel-force.success"
          topic: "content-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps:
            - name: "unpublish-channel-unpublish-channel-force"
              topic: "content-management-domain"
              handle-service: "PodcastService"
          nextFlows: []
        onFailure:
          emit: "remove-channel-episodes-listen-session-content-unpublish-channel-force.failed"
          topic: "content-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
      - name: "unpublish-channel-unpublish-channel-force"
        topic: "content-management-domain"
        handle-service: "PodcastService"
        description: "Unpublishes the channel."
        parameters:
          - PodcastChannelId
        next-request-data:
          - PodcastChannelId
          - DmcaDismissedShowIds
          - DmcaDismissedEpisodeIds
        response-data:
          - PodcastChannelId
        onSuccess:
          emit: "unpublish-channel-unpublish-channel-force.success"
          topic: "content-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "unpublish-channel-unpublish-channel-force.failed"
          topic: "content-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []

  channel-deletion-flow:
    topic: "content-management-domain"
    handle-service: "PodcastService"
    description: "Handles the deletion of podcast channels."
    save-files: ""
    steps:
      - name: "keep-channel-shows-channel-deletion-force"
        topic: "content-management-domain"
        handle-service: "PodcastService"
        description: "Keeps all shows of the channel (changes channelId to null)."
        parameters:
          - KeptShowIds
          - PodcastChannelId
        next-request-data:
          - PodcastChannelId
        response-data:
          - PodcastChannelId
          - KeptShowIds
        onSuccess:
          emit: "keep-channel-shows-channel-deletion-force.success"
          topic: "content-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps:
            - name: "cancel-channel-subscription-channel-deletion-force"
              topic: "subscription-management-domain"
              handle-service: "SubscriptionService"
          nextFlows: []
        onFailure:
          emit: "keep-channel-shows-channel-deletion-force.failed"
          topic: "content-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
      - name: "cancel-channel-subscription-channel-deletion-force"
        topic: "subscription-management-domain"
        handle-service: "SubscriptionService"
        description: "Cancels and refunds all active subscriptions of the channel and its shows."
        parameters:
          - PodcastChannelId
        next-request-data:
          - PodcastChannelId
        response-data:
          - PodcastChannelId
        onSuccess:
          emit: "cancel-channel-subscription-channel-deletion-force.success"
          topic: "subscription-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps:
            - name: "delete-account-favorited-channel-channel-deletion-force"
              topic: "user-management-domain"
              handle-service: "UserService"
          nextFlows: []
        onFailure:
          emit: "cancel-channel-subscription-channel-deletion-force.failed"
          topic: "subscription-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
      - name: "delete-account-favorited-channel-channel-deletion-force"
        topic: "user-management-domain"
        handle-service: "UserService"
        description: "Removes the channel from all users' favorited lists."
        parameters:
          - PodcastChannelId
        next-request-data:
          - PodcastChannelId
        response-data:
          - PodcastChannelId
        onSuccess:
          emit: "delete-account-favorited-channel-channel-deletion-force.success"
          topic: "user-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps:
            - name: "delete-account-followed-channel-shows-channel-deletion-force"
              topic: "user-management-domain"
              handle-service: "UserService"
          nextFlows: []
        onFailure:
          emit: "delete-account-favorited-channel-channel-deletion-force.failed"
          topic: "user-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
      - name: "delete-account-followed-channel-shows-channel-deletion-force"
        topic: "user-management-domain"
        handle-service: "UserService"
        description: "Removes all shows of the channel from users' followed lists."
        parameters:
          - PodcastChannelId
        next-request-data:
          - PodcastChannelId
        response-data:
          - PodcastChannelId
        onSuccess:
          emit: "delete-account-followed-channel-shows-channel-deletion-force.success"
          topic: "user-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps:
            - name: "resolve-channel-shows-report-no-effect-channel-deletion-force"
              topic: "report-management-domain"
              handle-service: "ModerationService"
          nextFlows: []
        onFailure:
          emit: "delete-account-followed-channel-shows-channel-deletion-force.failed"
          topic: "user-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
      - name: "resolve-channel-shows-report-no-effect-channel-deletion-force"
        topic: "report-management-domain"
        handle-service: "ModerationService"
        description: "Resolves all channel show report review sessions with no effect (includes resolving child reports)."
        parameters:
          - PodcastChannelId
        next-request-data:
          - PodcastChannelId
        response-data:
          - PodcastChannelId
        onSuccess:
          emit: "resolve-channel-shows-report-no-effect-channel-deletion-force.success"
          topic: "report-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps:
            - name: "delete-channel-shows-review-channel-deletion-force"
              topic: "public-review-management-domain"
              handle-service: "PodcastService"
          nextFlows: []
        onFailure:
          emit: "resolve-channel-shows-report-no-effect-channel-deletion-force.failed"
          topic: "report-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
      - name: "delete-channel-shows-review-channel-deletion-force"
        topic: "public-review-management-domain"
        handle-service: "PodcastService"
        description: "Deletes all show reviews of the channel."
        parameters:
          - PodcastChannelId
        next-request-data:
          - PodcastChannelId
        response-data:
          - PodcastChannelId
        onSuccess:
          emit: "delete-channel-shows-review-channel-deletion-force.success"
          topic: "public-review-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps:
            - name: "dismiss-channel-shows-dmca-channel-deletion-force"
              topic: "dmca-management-domain"
              handle-service: "ModerationService"
          nextFlows: []
        onFailure:
          emit: "delete-channel-shows-review-channel-deletion-force.failed"
          topic: "public-review-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
      - name: "dismiss-channel-shows-dmca-channel-deletion-force"
        topic: "dmca-management-domain"
        handle-service: "ModerationService"
        description: "Dismisses all show DMCA accusations of the channel (only changes DMCA status)."
        parameters:
          - PodcastChannelId
        next-request-data:
          - PodcastChannelId
          - DmcaDismissedShowIds
        response-data:
          - PodcastChannelId
          - DmcaDismissedShowIds
        onSuccess:
          emit: "dismiss-channel-shows-dmca-channel-deletion-force.success"
          topic: "dmca-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps:
            - name: "remove-channel-dismissed-shows-dmca-channel-deletion-force"
              topic: "content-management-domain"
              handle-service: "PodcastService"
          nextFlows: []
        onFailure:
          emit: "dismiss-channel-shows-dmca-channel-deletion-force.failed"
          topic: "dmca-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
      - name: "remove-channel-dismissed-shows-dmca-channel-deletion-force"
        topic: "content-management-domain"
        handle-service: "PodcastService"
        description: "Removes dismissed show DMCAs (changes status to remove + runs add violation point flow if applicable)."
        parameters:
          - PodcastChannelId
          - DmcaDismissedShowIds
        next-request-data:
          - PodcastChannelId
          - DmcaDismissedShowIds
        response-data:
          - PodcastChannelId
          - DmcaDismissedShowIds
        onSuccess:
          emit: "remove-channel-dismissed-shows-dmca-channel-deletion-force.success"
          topic: "content-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps:
            - name: "delete-account-saved-channel-episodes-channel-deletion-force"
              topic: "user-management-domain"
              handle-service: "UserService"
          nextFlows: []
        onFailure:
          emit: "remove-channel-dismissed-shows-dmca-channel-deletion-force.failed"
          topic: "content-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
      - name: "delete-account-saved-channel-episodes-channel-deletion-force"
        topic: "user-management-domain"
        handle-service: "UserService"
        description: "Removes all episodes of all shows of the channel from users' saved lists."
        parameters:
          - PodcastChannelId
        next-request-data:
          - PodcastChannelId
          - DmcaDismissedShowIds
        response-data:
          - PodcastChannelId
        onSuccess:
          emit: "delete-account-saved-channel-episodes-channel-deletion-force.success"
          topic: "user-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps:
            - name: "resolve-channel-episodes-report-no-effect-channel-deletion-force"
              topic: "report-management-domain"
              handle-service: "ModerationService"
          nextFlows: []
        onFailure:
          emit: "delete-account-saved-channel-episodes-channel-deletion-force.failed"
          topic: "user-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
      - name: "resolve-channel-episodes-report-no-effect-channel-deletion-force"
        topic: "report-management-domain"
        handle-service: "ModerationService"
        description: "Resolves all channel episode report review sessions with no effect (includes resolving child reports)."
        parameters:
          - DmcaDismissedShowIds
        next-request-data:
          - PodcastChannelId
          - DmcaDismissedShowIds
        response-data:
          - PodcastChannelId
        onSuccess:
          emit: "resolve-channel-episodes-report-no-effect-channel-deletion-force.success"
          topic: "report-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps:
            - name: "remove-channel-episodes-listen-session-content-channel-deletion-force"
              topic: "content-management-domain"
              handle-service: "PodcastService"
          nextFlows: []
        onFailure:
          emit: "resolve-channel-episodes-report-no-effect-channel-deletion-force.failed"
          topic: "report-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
      - name: "remove-channel-episodes-listen-session-content-channel-deletion-force"
        topic: "content-management-domain"
        handle-service: "PodcastService"
        description: "Removes all channel episodes from users' listen history."
        parameters:
          - PodcastChannelId
        next-request-data:
          - PodcastChannelId
          - DmcaDismissedShowIds
        response-data:
          - PodcastChannelId
        onSuccess:
          emit: "remove-channel-episodes-listen-session-content-channel-deletion-force.success"
          topic: "content-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps:
            - name: "discard-channel-episodes-publish-review-channel-deletion-force"
              topic: "content-moderation-domain"
              handle-service: "PodcastService"
          nextFlows: []
        onFailure:
          emit: "remove-channel-episodes-listen-session-content-channel-deletion-force.failed"
          topic: "content-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
      - name: "discard-channel-episodes-publish-review-channel-deletion-force"
        topic: "content-moderation-domain"
        handle-service: "PodcastService"
        description: "Discards all channel episode publish review sessions with statuses other than 2, 3, 4."
        parameters:
          - PodcastChannelId
        next-request-data:
          - PodcastChannelId
          - DmcaDismissedShowIds
        response-data:
          - PodcastChannelId
        onSuccess:
          emit: "discard-channel-episodes-publish-review-channel-deletion-force.success"
          topic: "content-moderation-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps:
            - name: "dismiss-channel-episodes-dmca-channel-deletion-force"
              topic: "dmca-management-domain"
              handle-service: "ModerationService"
          nextFlows: []
        onFailure:
          emit: "discard-channel-episodes-publish-review-channel-deletion-force.failed"
          topic: "content-moderation-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
      - name: "dismiss-channel-episodes-dmca-channel-deletion-force"
        topic: "dmca-management-domain"
        handle-service: "ModerationService"
        description: "Dismisses all episode DMCA accusations of the channel (only changes DMCA status)."
        parameters:
          - PodcastChannelId
        next-request-data:
          - PodcastChannelId
          - DmcaDismissedShowIds
          - DmcaDismissedEpisodeIds
        response-data:
          - PodcastChannelId
          - DmcaDismissedEpisodeIds
        onSuccess:
          emit: "dismiss-channel-episodes-dmca-channel-deletion-force.success"
          topic: "dmca-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps:
            - name: "remove-channel-dismissed-episodes-dmca-channel-deletion-force"
              topic: "content-management-domain"
              handle-service: "PodcastService"
          nextFlows: []
        onFailure:
          emit: "dismiss-channel-episodes-dmca-channel-deletion-force.failed"
          topic: "dmca-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
      - name: "remove-channel-dismissed-episodes-dmca-channel-deletion-force"
        topic: "content-management-domain"
        handle-service: "PodcastService"
        description: "Removes dismissed episode DMCAs (changes status to remove + runs add violation point flow if applicable)."
        parameters:
          - PodcastChannelId
          - DmcaDismissedEpisodeIds
        next-request-data:
          - PodcastChannelId
          - DmcaDismissedShowIds
          - DmcaDismissedEpisodeIds
        response-data:
          - PodcastChannelId
          - DmcaDismissedEpisodeIds
        onSuccess:
          emit: "remove-channel-dismissed-episodes-dmca-channel-deletion-force.success"
          topic: "content-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps:
            - name: "delete-channel-episodes-channel-deletion-force"
              topic: "content-management-domain"
              handle-service: "PodcastService"
          nextFlows: []
        onFailure:
          emit: "remove-channel-dismissed-episodes-dmca-channel-deletion-force.failed"
          topic: "content-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
      - name: "delete-channel-episodes-channel-deletion-force"
        topic: "content-management-domain"
        handle-service: "PodcastService"
        description: "Deletes all episodes of the channel."
        parameters:
          - PodcastChannelId
        next-request-data:
          - PodcastChannelId
          - DmcaDismissedShowIds
          - DmcaDismissedEpisodeIds
        response-data:
          - PodcastChannelId
        onSuccess:
          emit: "delete-channel-episodes-channel-deletion-force.success"
          topic: "content-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps:
            - name: "delete-channel-shows-channel-deletion-force"
              topic: "content-management-domain"
              handle-service: "PodcastService"
          nextFlows: []
        onFailure:
          emit: "delete-channel-episodes-channel-deletion-force.failed"
          topic: "content-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
      - name: "delete-channel-shows-channel-deletion-force"
        topic: "content-management-domain"
        handle-service: "PodcastService"
        description: "Deletes all shows of the channel."
        parameters:
          - PodcastChannelId
        next-request-data:
          - PodcastChannelId
          - DmcaDismissedShowIds
          - DmcaDismissedEpisodeIds
        response-data:
          - PodcastChannelId
        onSuccess:
          emit: "delete-channel-shows-channel-deletion-force.success"
          topic: "content-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps:
            - name: "delete-channel-channel-deletion-force"
              topic: "content-management-domain"
              handle-service: "PodcastService"
          nextFlows: []
        onFailure:
          emit: "delete-channel-shows-channel-deletion-force.failed"
          topic: "content-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
      - name: "delete-channel-channel-deletion-force"
        topic: "content-management-domain"
        handle-service: "PodcastService"
        description: "Deletes the channel."
        parameters:
          - PodcastChannelId
        next-request-data:
          - PodcastChannelId
          - DmcaDismissedShowIds
          - DmcaDismissedEpisodeIds
        response-data:
          - PodcastChannelId
        onSuccess:
          emit: "delete-channel-channel-deletion-force.success"
          topic: "content-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "delete-channel-channel-deletion-force.failed"
          topic: "content-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []

  show-creation-flow:
    topic: "content-management-domain"
    handle-service: "SagaOrchestratorService"
    description: "Tạo chương trình podcast"
    save-file: "MainImageFile"
    steps:
      - name: "create-show"
        topic: "content-management-domain"
        handle-service: "PodcastService"
        description: "Tạo podcast show mới"
        parameters:
          - Name
          - Description
          - Language
          - Copyright
          - UploadFrequency
          - MainImageFileKey
          - PodcasterId
          - PodcastCategoryId
          - PodcastSubCategoryId
          - PodcastShowSubscriptionTypeId
          - PodcastChannelId
          - HashtagIds
        next-request-data:
          - Name
          - Description
          - Language
          - Copyright
          - UploadFrequency
          - MainImageFileKey
          - PodcasterId
          - PodcastCategoryId
          - PodcastSubCategoryId
          - PodcastShowSubscriptionTypeId
          - PodcastChannelId
          - HashtagIds
        response-data:
          - PodcastShowId
          - Name
          - Description
          - Language
          - Copyright
          - UploadFrequency
          - MainImageFileKey
          - PodcasterId
          - PodcastCategoryId
          - PodcastSubCategoryId
          - PodcastShowSubscriptionTypeId
          - PodcastChannelId
          - HashtagIds
        onSuccess:
          emit: "create-show.success"
          topic: "content-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "create-show.failed"
          topic: "content-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []

  show-update-flow:
    topic: "content-management-domain"
    handle-service: "SagaOrchestratorService"
    description: "Cập nhật chương trình podcast"
    save-file: "MainImageFile"
    steps:
      - name: "update-show"
        topic: "content-management-domain"
        handle-service: "PodcastService"
        description: "Cập nhật thông tin podcast show"
        parameters:
          - PodcastShowId
          - Name
          - Description
          - Language
          - Copyright
          - UploadFrequency
          - MainImageFileKey
          - PodcasterId  # không dùng trong cập nhật nhưng giữ để kiểm tra quyền (lấy từ jwt)
          - PodcastCategoryId
          - PodcastSubCategoryId
          - PodcastShowSubscriptionTypeId
          - HashtagIds
        next-request-data:
          - PodcastShowId
          - Name
          - Description
          - Language
          - Copyright
          - UploadFrequency
          - MainImageFileKey
          - PodcasterId
          - PodcastCategoryId
          - PodcastSubCategoryId
          - PodcastShowSubscriptionTypeId
          - HashtagIds
        response-data:
          - PodcastShowId
          - Name
          - Description
          - Language
          - Copyright
          - UploadFrequency
          - MainImageFileKey
          - PodcasterId
          - PodcastCategoryId
          - PodcastSubCategoryId
          - PodcastShowSubscriptionTypeId
          - HashtagIds
        onSuccess:
          emit: "update-show.success"
          topic: "content-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "update-show.failed"
          topic: "content-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []

  show-deletion-flow:
    topic: "content-management-domain"
    handle-service: "PodcastService"
    description: "Handles the deletion of podcast shows."
    save-files: ""
    steps:
      - name: "cancel-show-subscription-show-deletion-force"
        topic: "subscription-management-domain"
        handle-service: "SubscriptionService"
        description: "Cancels and refunds all active subscriptions of the show."
        parameters:
          - PodcastShowId
        next-request-data:
          - PodcastShowId
        response-data:
          - PodcastShowId
        onSuccess:
          emit: "cancel-show-subscription-show-deletion-force.success"
          topic: "subscription-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps:
            - name: "delete-account-followed-show-show-deletion-force"
              topic: "user-management-domain"
              handle-service: "UserService"
          nextFlows: []
        onFailure:
          emit: "cancel-show-subscription-show-deletion-force.failed"
          topic: "subscription-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
      - name: "delete-account-followed-show-show-deletion-force"
        topic: "user-management-domain"
        handle-service: "UserService"
        description: "Removes the show from users' followed lists."
        parameters:
          - PodcastShowId
        next-request-data:
          - PodcastShowId
        response-data:
          - PodcastShowId
        onSuccess:
          emit: "delete-account-followed-show-show-deletion-force.success"
          topic: "user-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps:
            - name: "resolve-show-report-no-effect-show-deletion-force"
              topic: "report-management-domain"
              handle-service: "ModerationService"
          nextFlows: []
        onFailure:
          emit: "delete-account-followed-show-show-deletion-force.failed"
          topic: "user-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
      - name: "resolve-show-report-no-effect-show-deletion-force"
        topic: "report-management-domain"
        handle-service: "ModerationService"
        description: "Resolves all show report review sessions with no effect (includes resolving child reports)."
        parameters:
          - PodcastShowId
        next-request-data:
          - PodcastShowId
        response-data:
          - PodcastShowId
        onSuccess:
          emit: "resolve-show-report-no-effect-show-deletion-force.success"
          topic: "report-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps:
            - name: "delete-show-review-show-deletion-force"
              topic: "public-review-management-domain"
              handle-service: "PodcastService"
          nextFlows: []
        onFailure:
          emit: "resolve-show-report-no-effect-show-deletion-force.failed"
          topic: "report-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
      - name: "delete-show-review-show-deletion-force"
        topic: "public-review-management-domain"
        handle-service: "PodcastService"
        description: "Deletes all reviews of the show."
        parameters:
          - PodcastShowId
        next-request-data:
          - PodcastShowId
        response-data:
          - PodcastShowId
        onSuccess:
          emit: "delete-show-review-show-deletion-force.success"
          topic: "public-review-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps:
            - name: "dismiss-show-dmca-show-deletion-force"
              topic: "dmca-management-domain"
              handle-service: "ModerationService"
          nextFlows: []
        onFailure:
          emit: "delete-show-review-show-deletion-force.failed"
          topic: "public-review-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
      - name: "dismiss-show-dmca-show-deletion-force"
        topic: "dmca-management-domain"
        handle-service: "ModerationService"
        description: "Dismisses all show DMCA accusations (only changes DMCA status)."
        parameters:
          - PodcastShowId
        next-request-data:
          - PodcastShowId
          - DmcaDismissedShowId
        response-data:
          - PodcastShowId
          - DmcaDismissedShowId
        onSuccess:
          emit: "dismiss-show-dmca-show-deletion-force.success"
          topic: "dmca-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps:
            - name: "remove-dismissed-show-dmca-show-deletion-force"
              topic: "content-management-domain"
              handle-service: "PodcastService"
          nextFlows: []
        onFailure:
          emit: "dismiss-show-dmca-show-deletion-force.failed"
          topic: "dmca-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
      - name: "remove-dismissed-show-dmca-show-deletion-force"
        topic: "content-management-domain"
        handle-service: "PodcastService"
        description: "Removes dismissed show DMCAs (changes status to remove + runs add violation point flow if applicable)."
        parameters:
          - PodcastShowId
          - DmcaDismissedShowId
        next-request-data:
          - PodcastShowId
          - DmcaDismissedShowId
        response-data:
          - PodcastShowId
          - DmcaDismissedShowId
        onSuccess:
          emit: "remove-dismissed-show-dmca-show-deletion-force.success"
          topic: "content-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps:
            - name: "delete-account-saved-show-episodes-show-deletion-force"
              topic: "user-management-domain"
              handle-service: "UserService"
          nextFlows: []
        onFailure:
          emit: "remove-dismissed-show-dmca-show-deletion-force.failed"
          topic: "content-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
      - name: "delete-account-saved-show-episodes-show-deletion-force"
        topic: "user-management-domain"
        handle-service: "UserService"
        description: "Removes all episodes of the show from users' saved lists."
        parameters:
          - PodcastShowId
        next-request-data:
          - PodcastShowId
          - DmcaDismissedShowId
        response-data:
          - PodcastShowId
        onSuccess:
          emit: "delete-account-saved-show-episodes-show-deletion-force.success"
          topic: "user-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps:
            - name: "resolve-show-episodes-report-no-effect-show-deletion-force"
              topic: "report-management-domain"
              handle-service: "ModerationService"
          nextFlows: []
        onFailure:
          emit: "delete-account-saved-show-episodes-show-deletion-force.failed"
          topic: "user-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
      - name: "resolve-show-episodes-report-no-effect-show-deletion-force"
        topic: "report-management-domain"
        handle-service: "ModerationService"
        description: "Resolves all show episode report review sessions with no effect (includes resolving child reports)."
        parameters:
          - PodcastShowId
        next-request-data:
          - PodcastShowId
          - DmcaDismissedShowId
        response-data:
          - PodcastShowId
        onSuccess:
          emit: "resolve-show-episodes-report-no-effect-show-deletion-force.success"
          topic: "report-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps:
            - name: "remove-show-episodes-listen-session-content-show-deletion-force"
              topic: "content-management-domain"
              handle-service: "PodcastService"
          nextFlows: []
        onFailure:
          emit: "resolve-show-episodes-report-no-effect-show-deletion-force.failed"
          topic: "report-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
      - name: "remove-show-episodes-listen-session-content-show-deletion-force"
        topic: "content-management-domain"
        handle-service: "PodcastService"
        description: "Removes all show episodes from users' listen history."
        parameters:
          - PodcastShowId
        next-request-data:
          - PodcastShowId
          - DmcaDismissedShowId
        response-data:
          - PodcastShowId
        onSuccess:
          emit: "remove-show-episodes-listen-session-content-show-deletion-force.success"
          topic: "content-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps:
            - name: "discard-show-episodes-publish-review-show-deletion-force"
              topic: "content-moderation-domain"
              handle-service: "PodcastService"
          nextFlows: []
        onFailure:
          emit: "remove-show-episodes-listen-session-content-show-deletion-force.failed"
          topic: "content-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
      - name: "discard-show-episodes-publish-review-show-deletion-force"
        topic: "content-moderation-domain"
        handle-service: "PodcastService"
        description: "Discards all show episode publish review sessions with statuses other than 2, 3, 4."
        parameters:
          - PodcastShowId
        next-request-data:
          - PodcastShowId
          - DmcaDismissedShowId
        response-data:
          - PodcastShowId
        onSuccess:
          emit: "discard-show-episodes-publish-review-show-deletion-force.success"
          topic: "content-moderation-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps:
            - name: "dismiss-show-episodes-dmca-show-deletion-force"
              topic: "dmca-management-domain"
              handle-service: "ModerationService"
          nextFlows: []
        onFailure:
          emit: "discard-show-episodes-publish-review-show-deletion-force.failed"
          topic: "content-moderation-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
      - name: "dismiss-show-episodes-dmca-show-deletion-force"
        topic: "dmca-management-domain"
        handle-service: "ModerationService"
        description: "Dismisses all episode DMCA accusations of the show (only changes DMCA status)."
        parameters:
          - PodcastShowId
        next-request-data:
          - PodcastShowId
          - DmcaDismissedShowId
          - DmcaDismissedEpisodeIds
        response-data:
          - PodcastShowId
          - DmcaDismissedEpisodeIds
        onSuccess:
          emit: "dismiss-show-episodes-dmca-show-deletion-force.success"
          topic: "dmca-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps:
            - name: "remove-dismissed-show-episodes-dmca-show-deletion-force"
              topic: "content-management-domain"
              handle-service: "PodcastService"
          nextFlows: []
        onFailure:
          emit: "dismiss-show-episodes-dmca-show-deletion-force.failed"
          topic: "dmca-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
      - name: "remove-dismissed-show-episodes-dmca-show-deletion-force"
        topic: "content-management-domain"
        handle-service: "PodcastService"
        description: "Removes dismissed episode DMCAs (changes status to remove + runs add violation point flow if applicable)."
        parameters:
          - PodcastShowId
          - DmcaDismissedEpisodeIds
        next-request-data:
          - PodcastShowId
          - DmcaDismissedShowId
          - DmcaDismissedEpisodeIds
        response-data:
          - PodcastShowId
          - DmcaDismissedEpisodeIds
        onSuccess:
          emit: "remove-dismissed-show-episodes-dmca-show-deletion-force.success"
          topic: "content-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps:
            - name: "delete-show-episodes-show-deletion-force"
              topic: "content-management-domain"
              handle-service: "PodcastService"
          nextFlows: []
        onFailure:
          emit: "remove-dismissed-show-episodes-dmca-show-deletion-force.failed"
          topic: "content-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
      - name: "delete-show-episodes-show-deletion-force"
        topic: "content-management-domain"
        handle-service: "PodcastService"
        description: "Deletes all episodes of the show."
        parameters:
          - PodcastShowId
        next-request-data:
          - PodcastShowId
          - DmcaDismissedShowId
          - DmcaDismissedEpisodeIds
        response-data:
          - PodcastShowId
        onSuccess:
          emit: "delete-show-episodes-show-deletion-force.success"
          topic: "content-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps:
            - name: "delete-show-show-deletion-force"
              topic: "content-management-domain"
              handle-service: "PodcastService"
          nextFlows: []
        onFailure:
          emit: "delete-show-episodes-show-deletion-force.failed"
          topic: "content-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
      - name: "delete-show-show-deletion-force"
        topic: "content-management-domain"
        handle-service: "PodcastService"
        description: "Deletes the show."
        parameters:
          - PodcastShowId
        next-request-data:
          - PodcastShowId
          - DmcaDismissedShowId
          - DmcaDismissedEpisodeIds
        response-data:
          - PodcastShowId
        onSuccess:
          emit: "delete-show-show-deletion-force.success"
          topic: "content-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "delete-show-show-deletion-force.failed"
          topic: "content-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []

  show-status-update-flow:
    topic: "content-management-domain"
    handle-service: "SagaOrchestratorService"
    description: "Cập nhật trạng thái chương trình podcast"
    save-file: ""
    steps:
      - name: "update-show-status"
        topic: "content-management-domain"
        handle-service: "PodcastService"
        description: "Cập nhật trạng thái podcast show (active/inactive)"
        parameters:
          - PodcastShowId
          - PodcastShowStatusId
        next-request-data:
          - PodcastShowId
          - PodcastShowStatusId
        response-data:
          - PodcastShowStatusTrackingId
          - PodcastShowId
          - PodcastShowStatusId
          - CreatedAt
        onSuccess:
          emit: "update-show-status.success"
          topic: "content-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "update-show-status.failed"
          topic: "content-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []

  show-publish-flow:
    topic: "content-management-domain"
    handle-service: "SagaOrchestratorService"
    description: "Xuất bản chương trình podcast"
    save-file: ""
    steps:
      - name: "publish-show"
        topic: "content-management-domain"
        handle-service: "PodcastService"
        description: "Publish podcast show"
        parameters:
          - PodcastShowId
          - PodcasterId  # không dùng trong publish nhưng giữ để kiểm tra quyền (lấy từ jwt)
          - ReleaseDate
        next-request-data:
          - PodcastShowId
          - PodcasterId
          - ReleaseDate
        response-data:
          - PodcastShowId
          - PodcasterId
          - ReleaseDate
        onSuccess:
          emit: "publish-show.success"
          topic: "content-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "publish-show.failed"
          topic: "content-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []

  show-unpublish-flow:
    topic: "content-management-domain"
    handle-service: "PodcastService"
    description: "Handles the unpublishing of podcast shows."
    save-files: ""
    steps:
      - name: "cancel-show-subscription-unpublish-show-force"
        topic: "subscription-management-domain"
        handle-service: "SubscriptionService"
        description: "Cancels and refunds all active subscriptions of the show."
        parameters:
          - PodcastShowId
        next-request-data:
          - PodcastShowId
        response-data:
          - PodcastShowId
        onSuccess:
          emit: "cancel-show-subscription-unpublish-show-force.success"
          topic: "subscription-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps:
            - name: "dismiss-show-dmca-unpublish-show-force"
              topic: "dmca-management-domain"
              handle-service: "ModerationService"
          nextFlows: []
        onFailure:
          emit: "cancel-show-subscription-unpublish-show-force.failed"
          topic: "subscription-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
      - name: "dismiss-show-dmca-unpublish-show-force"
        topic: "dmca-management-domain"
        handle-service: "ModerationService"
        description: "Dismisses show DMCA accusations (only changes DMCA status)."
        parameters:
          - PodcastShowId
        next-request-data:
          - PodcastShowId
          - DmcaDismissedShowId
        response-data:
          - PodcastShowId
          - DmcaDismissedShowId
        onSuccess:
          emit: "dismiss-show-dmca-unpublish-show-force.success"
          topic: "dmca-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps:
            - name: "remove-dismissed-show-dmca-unpublish-show-force"
              topic: "content-management-domain"
              handle-service: "PodcastService"
          nextFlows: []
        onFailure:
          emit: "dismiss-show-dmca-unpublish-show-force.failed"
          topic: "dmca-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
      - name: "remove-dismissed-show-dmca-unpublish-show-force"
        topic: "content-management-domain"
        handle-service: "PodcastService"
        description: "Removes dismissed show DMCA (changes status to remove + runs add violation point flow if applicable)."
        parameters:
          - PodcastShowId
          - DmcaDismissedShowId
        next-request-data:
          - PodcastShowId
          - DmcaDismissedShowId
        response-data:
          - PodcastShowId
          - DmcaDismissedShowId
        onSuccess:
          emit: "remove-dismissed-show-dmca-unpublish-show-force.success"
          topic: "content-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps:
            - name: "delete-show-review-unpublish-show-force"
              topic: "public-review-management-domain"
              handle-service: "ReviewService"
          nextFlows: []
        onFailure:
          emit: "remove-dismissed-show-dmca-unpublish-show-force.failed"
          topic: "content-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
      - name: "delete-show-review-unpublish-show-force"
        topic: "public-review-management-domain"
        handle-service: "PodcastService"
        description: "Deletes all reviews of the show."
        parameters:
          - PodcastShowId
        next-request-data:
          - PodcastShowId
          - DmcaDismissedShowId
        response-data:
          - PodcastShowId
        onSuccess:
          emit: "delete-show-review-unpublish-show-force.success"
          topic: "public-review-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps:
            - name: "delete-account-followed-show-unpublish-show-force"
              topic: "user-management-domain"
              handle-service: "UserService"
          nextFlows: []
        onFailure:
          emit: "delete-show-review-unpublish-show-force.failed"
          topic: "public-review-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
      - name: "delete-account-followed-show-unpublish-show-force"
        topic: "user-management-domain"
        handle-service: "UserService"
        description: "Removes the show from users' followed lists."
        parameters:
          - PodcastShowId
        next-request-data:
          - PodcastShowId
          - DmcaDismissedShowId
        response-data:
          - PodcastShowId
        onSuccess:
          emit: "delete-account-followed-show-unpublish-show-force.success"
          topic: "user-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps:
            - name: "resolve-show-report-no-effect-unpublish-show-force"
              topic: "report-management-domain"
              handle-service: "ModerationService"
          nextFlows: []
        onFailure:
          emit: "delete-account-followed-show-unpublish-show-force.failed"
          topic: "user-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
      - name: "resolve-show-report-no-effect-unpublish-show-force"
        topic: "report-management-domain"
        handle-service: "ModerationService"
        description: "Resolves all show report review sessions with no effect (includes resolving child reports)."
        parameters:
          - PodcastShowId
        next-request-data:
          - PodcastShowId
          - DmcaDismissedShowId
        response-data:
          - PodcastShowId
        onSuccess:
          emit: "resolve-show-report-no-effect-unpublish-show-force.success"
          topic: "report-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps:
            - name: "dismiss-show-episodes-dmca-unpublish-show-force"
              topic: "dmca-management-domain"
              handle-service: "ModerationService"
          nextFlows: []
        onFailure:
          emit: "resolve-show-report-no-effect-unpublish-show-force.failed"
          topic: "report-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
      - name: "dismiss-show-episodes-dmca-unpublish-show-force"
        topic: "dmca-management-domain"
        handle-service: "ModerationService"
        description: "Dismisses all episode DMCA accusations of the show (only changes DMCA status)."
        parameters:
          - PodcastShowId
        next-request-data:
          - PodcastShowId
          - DmcaDismissedShowId
          - DmcaDismissedEpisodeIds
        response-data:
          - PodcastShowId
          - DmcaDismissedEpisodeIds
        onSuccess:
          emit: "dismiss-show-episodes-dmca-unpublish-show-force.success"
          topic: "dmca-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps:
            - name: "remove-dismissed-show-episodes-dmca-unpublish-show-force"
              topic: "content-management-domain"
              handle-service: "PodcastService"
          nextFlows: []
        onFailure:
          emit: "dismiss-show-episodes-dmca-unpublish-show-force.failed"
          topic: "dmca-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
      - name: "remove-dismissed-show-episodes-dmca-unpublish-show-force"
        topic: "content-management-domain"
        handle-service: "PodcastService"
        description: "Removes dismissed episode DMCAs (changes status to remove + runs add violation point flow if applicable)."
        parameters:
          - PodcastShowId
          - DmcaDismissedEpisodeIds
        next-request-data:
          - PodcastShowId
          - DmcaDismissedShowId
          - DmcaDismissedEpisodeIds
        response-data:
          - PodcastShowId
          - DmcaDismissedEpisodeIds
        onSuccess:
          emit: "remove-dismissed-show-episodes-dmca-unpublish-show-force.success"
          topic: "content-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps:
            - name: "delete-account-saved-show-episodes-unpublish-show-force"
              topic: "user-management-domain"
              handle-service: "UserService"
          nextFlows: []
        onFailure:
          emit: "remove-dismissed-show-episodes-dmca-unpublish-show-force.failed"
          topic: "content-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
      - name: "delete-account-saved-show-episodes-unpublish-show-force"
        topic: "user-management-domain"
        handle-service: "UserService"
        description: "Removes dismissed episodes from users' saved lists."
        parameters:
          - PodcastShowId
          - DmcaDismissedEpisodeIds
        next-request-data:
          - PodcastShowId
          - DmcaDismissedShowId
          - DmcaDismissedEpisodeIds
        response-data:
          - PodcastShowId
          - DmcaDismissedEpisodeIds
        onSuccess:
          emit: "delete-account-saved-show-episodes-unpublish-show-force.success"
          topic: "user-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps:
            - name: "resolve-show-episodes-report-no-effect-unpublish-show-force"
              topic: "report-management-domain"
              handle-service: "ModerationService"
          nextFlows: []
        onFailure:
          emit: "delete-account-saved-show-episodes-unpublish-show-force.failed"
          topic: "user-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
      - name: "resolve-show-episodes-report-no-effect-unpublish-show-force"
        topic: "report-management-domain"
        handle-service: "ModerationService"
        description: "Resolves all dismissed episode report review sessions with no effect (includes resolving child reports)."
        parameters:
          - DmcaDismissedEpisodeIds
        next-request-data:
          - PodcastShowId
          - DmcaDismissedShowId
          - DmcaDismissedEpisodeIds
        response-data:
          - PodcastShowId
          - DmcaDismissedEpisodeIds
        onSuccess:
          emit: "resolve-show-episodes-report-no-effect-unpublish-show-force.success"
          topic: "report-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps:
            - name: "remove-show-episodes-listen-session-content-unpublish-show-force"
              topic: "content-management-domain"
              handle-service: "PodcastService"
          nextFlows: []
        onFailure:
          emit: "resolve-show-episodes-report-no-effect-unpublish-show-force.failed"
          topic: "report-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
      - name: "remove-show-episodes-listen-session-content-unpublish-show-force"
        topic: "content-management-domain"
        handle-service: "PodcastService"
        description: "Removes dismissed episodes from users' listen history."
        parameters:
          - PodcastShowId
          - DmcaDismissedEpisodeIds
        next-request-data:
          - PodcastShowId
          - DmcaDismissedShowId
          - DmcaDismissedEpisodeIds
        response-data:
          - PodcastShowId
          - DmcaDismissedEpisodeIds
        onSuccess:
          emit: "remove-show-episodes-listen-session-content-unpublish-show-force.success"
          topic: "content-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps:
            - name: "unpublish-show-unpublish-show-force"
              topic: "content-management-domain"
              handle-service: "PodcastService"
          nextFlows: []
        onFailure:
          emit: "remove-show-episodes-listen-session-content-unpublish-show-force.failed"
          topic: "content-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
      - name: "unpublish-show-unpublish-show-force"
        topic: "content-management-domain"
        handle-service: "PodcastService"
        description: "Unpublishes the show."
        parameters:
          - PodcastShowId
        next-request-data:
          - PodcastShowId
          - DmcaDismissedShowId
          - DmcaDismissedEpisodeIds
        response-data:
          - PodcastShowId
        onSuccess:
          emit: "unpublish-show-unpublish-show-force.success"
          topic: "content-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "unpublish-show-unpublish-show-force.failed"
          topic: "content-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []

  show-trailer-audio-submission-flow:
    topic: "content-management-domain"
    handle-service: "SagaOrchestratorService"
    description: "Gửi audio cho chương trình podcast"
    save-file: "TrailerAudioFile"
    steps:
      - name: "submit-show-trailer-audio-file"
        topic: "content-management-domain"
        handle-service: "PodcastService"
        description: "Submit trailer audio file cho show"
        parameters:
          - PodcastShowId
          - PodcasterId  # không dùng trong submit nhưng giữ để kiểm tra quyền (lấy từ jwt)
          - TrailerAudioFileKey
        next-request-data:
          - PodcastShowId
          - PodcasterId
          - TrailerAudioFileKey
        response-data:
          - PodcastShowId
          - PodcasterId
          - TrailerAudioFileKey
        onSuccess:
          emit: "submit-show-trailer-audio-file.success"
          topic: "content-management-domain"
          handle-service: "PodcastService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "submit-show-trailer-audio-file.failed"
          topic: "content-management-domain"
          handle-service: "PodcastService"
          nextSteps: []
          nextFlows: []

  show-channel-assignment-flow:
    topic: "content-management-domain"
    handle-service: "SagaOrchestratorService"
    description: "Gán chương trình vào kênh"
    save-file: ""
    steps:
      - name: "assign-show-channel"
        topic: "content-management-domain"
        handle-service: "PodcastService"
        description: "Gán show vào channel"
        parameters:
          - PodcastShowId
          - PodcastChannelId
          - PodcasterId
        next-request-data:
          - PodcastShowId
          - PodcastChannelId
          - PodcasterId
        response-data:
          - PodcastShowId
          - PodcastChannelId
          - PodcasterId
        onSuccess:
          emit: "assign-show-channel.success"
          topic: "content-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: 
            - name: "cancel-podcast-subscription-registration-channel-shows"
              topic: "subscription-management-domain"
              handle-service: "SubscriptionService"
          nextFlows: []
        onFailure:
          emit: "assign-show-channel.failed"
          topic: "content-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
      - name: "cancel-podcast-subscription-registration-channel-shows"
        topic: "subscription-management-domain"
        handle-service: "SubscriptionService"
        description: "Customer hủy đăng ký subscription package cho kênh và các show"
        parameters:
          - PodcastShowId
          - PodcastChannelId
          - PodcasterId
        next-request-data:
          - PodcastShowId
          - PodcastChannelId
          - PodcasterId
        response-data:
          - PodcastShowId
          - PodcastChannelId
          - PodcasterId
        onSuccess:
          emit: "cancel-podcast-subscription-registration-channel-shows.success"
          topic: "subscription-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "cancel-podcast-subscription-registration-channel-shows.failed"
          topic: "subscription-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []

  show-rating-recalculation-flow:
    topic: "content-management-domain"
    handle-service: "SagaOrchestratorService"
    description: "Tính lại đánh giá chương trình podcast"
    save-file: ""
    steps:
      - name: "update-show-rating"
        topic: "content-management-domain"
        handle-service: "PodcastService"
        description: "Tính lại average rating cho show"
        parameters:
          - PodcastShowId
        next-request-data:
          - PodcastShowId
        response-data:
          - PodcastShowId
          - NewRating
        onSuccess:
          emit: "update-show-rating.success"
          topic: "content-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "update-show-rating.failed"
          topic: "content-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []

  dmca-remove-show-flow:
    topic: "content-management-domain"
    handle-service: "PodcastService"
    description: "Handles the removal of podcast shows (post-DMCA action)."
    save-files: ""
    steps:
      - name: "cancel-show-subscription-dmca-remove-show-force"
        topic: "subscription-management-domain"
        handle-service: "SubscriptionService"
        description: "Cancels and refunds all active subscriptions of the show."
        parameters:
          - PodcastShowId
        next-request-data:
          - PodcastShowId
        response-data:
          - PodcastShowId
        onSuccess:
          emit: "cancel-show-subscription-dmca-remove-show-force.success"
          topic: "subscription-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps:
            - name: "dismiss-other-show-dmca-dmca-remove-show-force"
              topic: "dmca-management-domain"
              handle-service: "ModerationService"
          nextFlows: []
        onFailure:
          emit: "cancel-show-subscription-dmca-remove-show-force.failed"
          topic: "subscription-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
      - name: "dismiss-other-show-dmca-dmca-remove-show-force"
        topic: "dmca-management-domain"
        handle-service: "ModerationService"
        description: "Dismisses other show DMCA accusations (only changes DMCA status)."
        parameters:
          - PodcastShowId
        next-request-data:
          - PodcastShowId
        response-data:
          - PodcastShowId
        onSuccess:
          emit: "dismiss-other-show-dmca-dmca-remove-show-force.success"
          topic: "dmca-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps:
            - name: "delete-account-followed-show-dmca-remove-show-force"
              topic: "user-management-domain"
              handle-service: "UserService"
          nextFlows: []
        onFailure:
          emit: "dismiss-other-show-dmca-dmca-remove-show-force.failed"
          topic: "dmca-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
      - name: "delete-account-followed-show-dmca-remove-show-force"
        topic: "user-management-domain"
        handle-service: "UserService"
        description: "Removes the show from users' followed lists."
        parameters:
          - PodcastShowId
        next-request-data:
          - PodcastShowId
        response-data:
          - PodcastShowId
        onSuccess:
          emit: "delete-account-followed-show-dmca-remove-show-force.success"
          topic: "user-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps:
            - name: "resolve-show-report-no-effect-dmca-remove-show-force"
              topic: "report-management-domain"
              handle-service: "ModerationService"
          nextFlows: []
        onFailure:
          emit: "delete-account-followed-show-dmca-remove-show-force.failed"
          topic: "user-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
      - name: "resolve-show-report-no-effect-dmca-remove-show-force"
        topic: "report-management-domain"
        handle-service: "ModerationService"
        description: "Resolves all show report review sessions with no effect (includes resolving child reports)."
        parameters:
          - PodcastShowId
        next-request-data:
          - PodcastShowId
        response-data:
          - PodcastShowId
        onSuccess:
          emit: "resolve-show-report-no-effect-dmca-remove-show-force.success"
          topic: "report-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps:
            - name: "delete-show-review-dmca-remove-show-force"
              topic: "public-review-management-domain"
              handle-service: "PodcastService"
          nextFlows: []
        onFailure:
          emit: "resolve-show-report-no-effect-dmca-remove-show-force.failed"
          topic: "report-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
      - name: "delete-show-review-dmca-remove-show-force"
        topic: "public-review-management-domain"
        handle-service: "PodcastService"
        description: "Deletes all reviews of the show."
        parameters:
          - PodcastShowId
        next-request-data:
          - PodcastShowId
        response-data:
          - PodcastShowId
        onSuccess:
          emit: "delete-show-review-dmca-remove-show-force.success"
          topic: "public-review-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps:
            - name: "dismiss-show-episodes-dmca-dmca-remove-show-force"
              topic: "dmca-management-domain"
              handle-service: "ModerationService"
          nextFlows: []
        onFailure:
          emit: "delete-show-review-dmca-remove-show-force.failed"
          topic: "public-review-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
      - name: "dismiss-show-episodes-dmca-dmca-remove-show-force"
        topic: "dmca-management-domain"
        handle-service: "ModerationService"
        description: "Dismisses all episode DMCA accusations of the show (only changes DMCA status)."
        parameters:
          - PodcastShowId
        next-request-data:
          - PodcastShowId
        response-data:
          - PodcastShowId
        onSuccess:
          emit: "dismiss-show-episodes-dmca-dmca-remove-show-force.success"
          topic: "dmca-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps:
            - name: "delete-account-saved-show-episodes-dmca-remove-show-force"
              topic: "user-management-domain"
              handle-service: "UserService"
          nextFlows: []
        onFailure:
          emit: "dismiss-show-episodes-dmca-dmca-remove-show-force.failed"
          topic: "dmca-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
      - name: "delete-account-saved-show-episodes-dmca-remove-show-force"
        topic: "user-management-domain"
        handle-service: "UserService"
        description: "Removes all episodes of the show from users' saved lists."
        parameters:
          - PodcastShowId
        next-request-data:
          - PodcastShowId
        response-data:
          - PodcastShowId
        onSuccess:
          emit: "delete-account-saved-show-episodes-dmca-remove-show-force.success"
          topic: "user-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps:
            - name: "discard-show-episodes-publish-review-dmca-remove-show-force"
              topic: "content-moderation-domain"
              handle-service: "PodcastService"
          nextFlows: []
        onFailure:
          emit: "delete-account-saved-show-episodes-dmca-remove-show-force.failed"
          topic: "user-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
      - name: "discard-show-episodes-publish-review-dmca-remove-show-force"
        topic: "content-moderation-domain"
        handle-service: "PodcastService"
        description: "Discards all show episode publish review sessions with statuses other than 2, 3, 4."
        parameters:
          - PodcastShowId
        next-request-data:
          - PodcastShowId
        response-data:
          - PodcastShowId
        onSuccess:
          emit: "discard-show-episodes-publish-review-dmca-remove-show-force.success"
          topic: "content-moderation-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps:
            - name: "resolve-show-episodes-report-no-effect-dmca-remove-show-force"
              topic: "report-management-domain"
              handle-service: "ModerationService"
          nextFlows: []
        onFailure:
          emit: "discard-show-episodes-publish-review-dmca-remove-show-force.failed"
          topic: "content-moderation-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
      - name: "resolve-show-episodes-report-no-effect-dmca-remove-show-force"
        topic: "report-management-domain"
        handle-service: "ModerationService"
        description: "Resolves all show episode report review sessions with no effect (includes resolving child reports)."
        parameters:
          - PodcastShowId
        next-request-data:
          - PodcastShowId
        response-data:
          - PodcastShowId
        onSuccess:
          emit: "resolve-show-episodes-report-no-effect-dmca-remove-show-force.success"
          topic: "report-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps:
            - name: "remove-show-episodes-listen-session-content-dmca-remove-show-force"
              topic: "content-management-domain"
              handle-service: "PodcastService"
          nextFlows: []
        onFailure:
          emit: "resolve-show-episodes-report-no-effect-dmca-remove-show-force.failed"
          topic: "report-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
      - name: "remove-show-episodes-listen-session-content-dmca-remove-show-force"
        topic: "content-management-domain"
        handle-service: "PodcastService"
        description: "Removes all show episodes from users' listen history."
        parameters:
          - PodcastShowId
        next-request-data:
          - PodcastShowId
        response-data:
          - PodcastShowId
        onSuccess:
          emit: "remove-show-episodes-listen-session-content-dmca-remove-show-force.success"
          topic: "content-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps:
            - name: "remove-show-episodes-dmca-remove-show-force"
              topic: "content-management-domain"
              handle-service: "PodcastService"
          nextFlows: []
        onFailure:
          emit: "remove-show-episodes-listen-session-content-dmca-remove-show-force.failed"
          topic: "content-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
      - name: "remove-show-episodes-dmca-remove-show-force"
        topic: "content-management-domain"
        handle-service: "PodcastService"
        description: "Removes all episodes of the show."
        parameters:
          - PodcastShowId
        next-request-data:
          - PodcastShowId
        response-data:
          - PodcastShowId
        onSuccess:
          emit: "remove-show-episodes-dmca-remove-show-force.success"
          topic: "content-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps:
            - name: "remove-show-dmca-dmca-remove-show-force"
              topic: "content-management-domain"
              handle-service: "PodcastService"
          nextFlows: []
        onFailure:
          emit: "remove-show-episodes-dmca-remove-show-force.failed"
          topic: "content-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
      - name: "remove-show-dmca-dmca-remove-show-force"
        topic: "content-management-domain"
        handle-service: "PodcastService"
        description: "Removes show DMCA (changes status to remove + runs add violation point flow if applicable)."
        parameters:
          - PodcastShowId
        next-request-data:
          - PodcastShowId
        response-data:
          - PodcastShowId
        onSuccess:
          emit: "remove-show-dmca-dmca-remove-show-force.success"
          topic: "content-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "remove-show-dmca-dmca-remove-show-force.failed"
          topic: "content-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []

  episode-creation-flow:
    topic: "content-management-domain"
    handle-service: "SagaOrchestratorService"
    description: "Tạo tập podcast"
    save-file: "MainImageFile"
    steps:
      - name: "create-episode"
        topic: "content-management-domain"
        handle-service: "PodcastService"
        description: "Tạo episode mới"
        parameters:
          - Name
          - Description
          - ExplicitContent
          - MainImageFileKey
          - PodcastEpisodeSubscriptionTypeId
          - PodcastShowId
          - SeasonNumber
          - EpisodeOrder
          - HashtagIds
          - PodcasterId  # không dùng trong tạo nhưng giữ để kiểm tra quyền (lấy từ jwt)
        next-request-data:
          - Name
          - Description
          - ExplicitContent
          - MainImageFileKey
          - PodcastEpisodeSubscriptionTypeId
          - PodcastShowId
          - SeasonNumber
          - EpisodeOrder
          - HashtagIds
          - PodcasterId
        response-data:
          - PodcastEpisodeId
          - Name
          - Description
          - ExplicitContent
          - MainImageFileKey
          - PodcastEpisodeSubscriptionTypeId
          - PodcastShowId
          - SeasonNumber
          - EpisodeOrder
          - HashtagIds
          - PodcasterId
        onSuccess:
          emit: "create-episode.success"
          topic: "content-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "create-episode.failed"
          topic: "content-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []

  episode-update-flow:
    topic: "content-management-domain"
    handle-service: "SagaOrchestratorService"
    description: "Cập nhật tập podcast"
    save-file: "MainImageFile"
    steps:
      - name: "update-episode"
        topic: "content-management-domain"
        handle-service: "PodcastService"
        description: "Cập nhật thông tin episode"
        parameters:
          - PodcastEpisodeId
          - PodcasterId  # không dùng trong cập nhật nhưng giữ để kiểm tra quyền (lấy từ jwt)
          - Name
          - Description
          - ExplicitContent
          - MainImageFileKey
          - PodcastEpisodeSubscriptionTypeId
          - SeasonNumber
          - EpisodeOrder
          - HashtagIds
        next-request-data:
          - PodcastEpisodeId
          - PodcasterId
          - Name
          - Description
          - ExplicitContent
          - MainImageFileKey
          - PodcastEpisodeSubscriptionTypeId
          - SeasonNumber
          - EpisodeOrder
          - HashtagIds
        response-data:
          - PodcastEpisodeId
          - PodcasterId
          - Name
          - Description
          - ExplicitContent
          - MainImageFileKey
          - PodcastEpisodeSubscriptionTypeId
          - SeasonNumber
          - EpisodeOrder
          - HashtagIds
        onSuccess:
          emit: "update-episode.success"
          topic: "content-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "update-episode.failed"
          topic: "content-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []

  dmca-remove-episode-flow:
    topic: "content-management-domain"
    handle-service: "PodcastService"
    description: "Handles the removal of podcast episodes (post-DMCA action)."
    save-files: ""
    steps:
      - name: "dismiss-other-episode-dmca-dmca-remove-episode-force"
        topic: "dmca-management-domain"
        handle-service: "ModerationService"
        description: "Dismisses other episode DMCA accusations (only changes DMCA status)."
        parameters:
          - PodcastEpisodeId
        next-request-data:
          - PodcastEpisodeId
        response-data:
          - PodcastEpisodeId
        onSuccess:
          emit: "dismiss-other-episode-dmca-dmca-remove-episode-force.success"
          topic: "dmca-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps:
            - name: "delete-account-saved-episode-dmca-remove-episode-force"
              topic: "user-management-domain"
              handle-service: "UserService"
          nextFlows: []
        onFailure:
          emit: "dismiss-other-episode-dmca-dmca-remove-episode-force.failed"
          topic: "dmca-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
      - name: "delete-account-saved-episode-dmca-remove-episode-force"
        topic: "user-management-domain"
        handle-service: "UserService"
        description: "Removes the episode from users' saved lists."
        parameters:
          - PodcastEpisodeId
        next-request-data:
          - PodcastEpisodeId
        response-data:
          - PodcastEpisodeId
        onSuccess:
          emit: "delete-account-saved-episode-dmca-remove-episode-force.success"
          topic: "user-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps:
            - name: "discard-episode-publish-review-dmca-remove-episode-force"
              topic: "content-moderation-domain"
              handle-service: "PodcastService"
          nextFlows: []
        onFailure:
          emit: "delete-account-saved-episode-dmca-remove-episode-force.failed"
          topic: "user-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
      - name: "discard-episode-publish-review-dmca-remove-episode-force"
        topic: "content-moderation-domain"
        handle-service: "PodcastService"
        description: "Discards episode publish review sessions with statuses other than 2, 3, 4."
        parameters:
          - PodcastEpisodeId
        next-request-data:
          - PodcastEpisodeId
        response-data:
          - PodcastEpisodeId
        onSuccess:
          emit: "discard-episode-publish-review-dmca-remove-episode-force.success"
          topic: "content-moderation-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps:
            - name: "resolve-episode-report-no-effect-dmca-remove-episode-force"
              topic: "report-management-domain"
              handle-service: "ModerationService"
          nextFlows: []
        onFailure:
          emit: "discard-episode-publish-review-dmca-remove-episode-force.failed"
          topic: "content-moderation-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
      - name: "resolve-episode-report-no-effect-dmca-remove-episode-force"
        topic: "report-management-domain"
        handle-service: "ModerationService"
        description: "Resolves all episode report review sessions with no effect (includes resolving child reports)."
        parameters:
          - PodcastEpisodeId
        next-request-data:
          - PodcastEpisodeId
        response-data:
          - PodcastEpisodeId
        onSuccess:
          emit: "resolve-episode-report-no-effect-dmca-remove-episode-force.success"
          topic: "report-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps:
            - name: "remove-episode-listen-session-content-dmca-remove-episode-force"
              topic: "content-management-domain"
              handle-service: "PodcastService"
          nextFlows: []
        onFailure:
          emit: "resolve-episode-report-no-effect-dmca-remove-episode-force.failed"
          topic: "report-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
      - name: "remove-episode-listen-session-content-dmca-remove-episode-force"
        topic: "content-management-domain"
        handle-service: "PodcastService"
        description: "Removes the episode from users' listen history."
        parameters:
          - PodcastEpisodeId
        next-request-data:
          - PodcastEpisodeId
        response-data:
          - PodcastEpisodeId
        onSuccess:
          emit: "remove-episode-listen-session-content-dmca-remove-episode-force.success"
          topic: "content-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps:
            - name: "remove-episode-dmca-remove-episode-force"
              topic: "content-management-domain"
              handle-service: "PodcastService"
          nextFlows: []
        onFailure:
          emit: "remove-episode-listen-session-content-dmca-remove-episode-force.failed"
          topic: "content-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
      - name: "remove-episode-dmca-remove-episode-force"
        topic: "content-management-domain"
        handle-service: "PodcastService"
        description: "Removes the episode."
        parameters:
          - PodcastEpisodeId
        next-request-data:
          - PodcastEpisodeId
        response-data:
          - PodcastEpisodeId
        onSuccess:
          emit: "remove-episode-dmca-remove-episode-force.success"
          topic: "content-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "remove-episode-dmca-remove-episode-force.failed"
          topic: "content-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []

  episode-status-update-flow:
    topic: "content-management-domain"
    handle-service: "SagaOrchestratorService"
    description: "Cập nhật trạng thái tập podcast"
    save-file: ""
    steps:
      - name: "update-episode-status"
        topic: "content-management-domain"
        handle-service: "PodcastService"
        description: "Cập nhật trạng thái episode"
        parameters:
          - PodcastEpisodeId
          - PodcastEpisodeStatusId
        next-request-data:
          - PodcastEpisodeId
          - PodcastEpisodeStatusId
        response-data:
          - PodcastEpisodeStatusTrackingId
          - PodcastEpisodeId
          - PodcastEpisodeStatusId
          - CreatedAt
        onSuccess:
          emit: "update-episode-status.success"
          topic: "content-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "update-episode-status.failed"
          topic: "content-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []

  episode-audio-submission-flow:
    topic: "content-management-domain"
    handle-service: "SagaOrchestratorService"
    description: "Gửi audio cho tập podcast"
    save-file: "AudioFile"
    steps:
      - name: "submit-episode-audio-file"
        topic: "content-management-domain"
        handle-service: "PodcastService"
        description: "Submit/cập nhật audio file cho episode"
        parameters:
          - PodcastEpisodeId
          - PodcasterId  # không dùng trong submit nhưng giữ để kiểm tra quyền (lấy từ jwt)
          - AudioFileKey
          - AudioFileSize
          - AudioLength
        next-request-data:
          - PodcastEpisodeId
          - PodcasterId
          - AudioFileKey
          - AudioFileSize
          - AudioLength
        response-data:
          - PodcastEpisodeId
          - PodcasterId
          - AudioFileKey
          - AudioFileSize
          - AudioLength
        onSuccess:
          emit: "submit-episode-audio-file.success"
          topic: "content-management-domain"
          handle-service: "PodcastService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "submit-episode-audio-file.failed"
          topic: "content-management-domain"
          handle-service: "PodcastService"
          nextSteps: []
          nextFlows: []

      # - name: "plus-episode-publish-review-session-re-review-count"
      #   topic: "content-moderation-domain"
      #   handle-service: "ModerationService"
      #   description: "Cộng 1 vào số lần yêu cầu đánh giá lại phiên đánh giá xuất bản tập podcast"
      #   parameters:
      #     - PodcastEpisodeId
      #     - PodcasterId  # không dùng trong submit nhưng giữ để kiểm tra quyền (lấy từ jwt)
      #   next-request-data:
      #     - PodcastEpisodeId
      #     - PodcasterId
      #   response-data:
      #     - PodcastEpisodeId
      #     - PodcasterId
      #   onSuccess:
      #     emit: "plus-episode-publish-review-session-re-review-count.success"
      #     topic: "content-moderation-domain"
      #     handle-service: "ModerationService"
      #     nextSteps: []
      #     nextFlows: []
      #   onFailure:
      #     emit: "plus-episode-publish-review-session-re-review-count.failed"
      #     topic: "content-moderation-domain"
      #     handle-service: "ModerationService"
      #     nextSteps: []
      #     nextFlows: []
      
  episode-draft-audio-processing-flow:
    topic: "content-management-domain"
    handle-service: "SagaOrchestratorService"
    description: "Gửi audio cho tập podcast"
    save-file: "AudioFile"
    steps:
      - name: "processing-episode-draft-audio"
        topic: "content-management-domain"
        handle-service: "PodcastService"
        description: "Submit/cập nhật audio file cho episode"
        parameters:
          - PodcastEpisodeId
          - PodcasterId  # không dùng trong submit nhưng giữ để kiểm tra quyền (lấy từ jwt)
        next-request-data:
          - PodcastEpisodeId
          - PodcasterId
        response-data:
          - PodcastEpisodeId
          - PodcasterId
        onSuccess:
          emit: "processing-episode-draft-audio.success"
          topic: "content-management-domain"
          handle-service: "PodcastService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "processing-episode-draft-audio.failed"
          topic: "content-management-domain"
          handle-service: "PodcastService"
          nextSteps: []
          nextFlows: []
  
  episode-publish-audio-processing-flow:
    topic: "content-management-domain"
    handle-service: "SagaOrchestratorService"
    description: "Xử lý hls playlist cho tập podcast"
    save-file: ""
    steps:
      - name: "processing-episode-publish-audio"
        topic: "content-management-domain"
        handle-service: "PodcastService"
        description: "Xử lý audio xuất bản cho episode"
        parameters:
          - PodcastEpisodeId
          - PodcasterId  # không dùng trong submit nhưng giữ để kiểm tra quyền (lấy từ jwt)
        next-request-data:
          - PodcastEpisodeId
          - PodcasterId
        response-data:
          - PodcastEpisodeId
          - PodcasterId
        onSuccess:
          emit: "processing-episode-publish-audio.success"
          topic: "content-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "processing-episode-publish-audio.failed"
          topic: "content-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []

  episode-publish-flow:
    topic: "content-management-domain"
    handle-service: "SagaOrchestratorService"
    description: "Xuất bản tập podcast"
    save-file: ""
    steps:
      - name: "publish-episode"
        topic: "content-management-domain"
        handle-service: "PodcastService"
        description: "Publish episode"
        parameters:
          - PodcastEpisodeId
          - PodcasterId  # không dùng trong publish nhưng giữ để kiểm tra quyền (lấy từ jwt)  
          - ReleaseDate
        next-request-data:
          - PodcastEpisodeId
          - PodcasterId
          - ReleaseDate
        response-data:
          - PodcastEpisodeId
          - PodcasterId
          - ReleaseDate
        onSuccess:
          emit: "publish-episode.success"
          topic: "content-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "publish-episode.failed"
          topic: "content-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []

  episode-licenses-upload-flow:
    topic: "content-management-domain"
    handle-service: "SagaOrchestratorService"
    description: "Tải lên giấy phép bản quyền tập podcast"
    save-file: "LicenseDocumentFiles"
    steps:
      - name: "upload-episode-licenses"
        topic: "content-management-domain"
        handle-service: "PodcastService"
        description: "Upload episode license file"
        parameters:
          - PodcastEpisodeId
          - LicenseDocumentFileKeys
          - PodcasterId  # không dùng trong tải lên nhưng giữ để kiểm tra quyền (lấy từ jwt)
        next-request-data:
          - PodcastEpisodeId
          - LicenseDocumentFileKeys
          - PodcasterId
        response-data:
          - PodcastEpisodeId
          - LicenseDocumentFileKeys
          - PodcasterId
        onSuccess:
          emit: "upload-episode-licenses.success"
          topic: "content-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "upload-episode-licenses.failed"
          topic: "content-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []

  episode-licenses-deletion-flow:
    topic: "content-management-domain"
    handle-service: "SagaOrchestratorService"
    description: "Xóa giấy phép bản quyền tập podcast"
    save-file: "LicenseDocumentFiles"
    steps:
      - name: "delete-episode-licenses"
        topic: "content-management-domain"
        handle-service: "PodcastService"
        description: "Delete episode license files"
        parameters:
          - PodcastEpisodeId
          - PodcastEpisodeLicenseIds
          - PodcasterId  # không dùng trong tải lên nhưng giữ để kiểm tra quyền (lấy từ jwt)
        next-request-data:
          - PodcastEpisodeId
          - PodcastEpisodeLicenseIds
          - PodcasterId
        response-data:
          - PodcastEpisodeId
          - PodcastEpisodeLicenseIds
          - PodcasterId
        onSuccess:
          emit: "delete-episode-licenses.success"
          topic: "content-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "delete-episode-licenses.failed"
          topic: "content-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []

  episode-unpublish-flow:
    topic: "content-management-domain"
    handle-service: "PodcastService"
    description: "Handles the unpublishing of podcast episodes."
    save-files: ""
    steps:
      - name: "dismiss-episode-dmca-unpublish-episode-force"
        topic: "dmca-management-domain"
        handle-service: "ModerationService"
        description: "Dismisses episode DMCA accusations (only changes DMCA status)."
        parameters:
          - PodcastEpisodeId
        next-request-data:
          - PodcastEpisodeId
          - DmcaDismissedEpisodeId
        response-data:
          - PodcastEpisodeId
          - DmcaDismissedEpisodeId
        onSuccess:
          emit: "dismiss-episode-dmca-unpublish-episode-force.success"
          topic: "dmca-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps:
            - name: "remove-dismissed-episode-dmca-unpublish-episode-force"
              topic: "content-management-domain"
              handle-service: "PodcastService"
          nextFlows: []
        onFailure:
          emit: "dismiss-episode-dmca-unpublish-episode-force.failed"
          topic: "dmca-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
      - name: "remove-dismissed-episode-dmca-unpublish-episode-force"
        topic: "content-management-domain"
        handle-service: "PodcastService"
        description: "Removes dismissed episode DMCA (changes status to remove + runs add violation point flow if applicable)."
        parameters:
          - PodcastEpisodeId
          - DmcaDismissedEpisodeId
        next-request-data:
          - PodcastEpisodeId
          - DmcaDismissedEpisodeId
        response-data:
          - PodcastEpisodeId
          - DmcaDismissedEpisodeId
        onSuccess:
          emit: "remove-dismissed-episode-dmca-unpublish-episode-force.success"
          topic: "content-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps:
            - name: "delete-account-saved-episode-unpublish-episode-force"
              topic: "user-management-domain"
              handle-service: "UserService"
          nextFlows: []
        onFailure:
          emit: "remove-dismissed-episode-dmca-unpublish-episode-force.failed"
          topic: "content-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
      - name: "delete-account-saved-episode-unpublish-episode-force"
        topic: "user-management-domain"
        handle-service: "UserService"
        description: "Removes the episode from users' saved lists."
        parameters:
          - PodcastEpisodeId
        next-request-data:
          - PodcastEpisodeId
          - DmcaDismissedEpisodeId
        response-data:
          - PodcastEpisodeId
        onSuccess:
          emit: "delete-account-saved-episode-unpublish-episode-force.success"
          topic: "user-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps:
            - name: "remove-episode-listen-session-content-unpublish-episode-force"
              topic: "content-management-domain"
              handle-service: "PodcastService"
          nextFlows: []
        onFailure:
          emit: "delete-account-saved-episode-unpublish-episode-force.failed"
          topic: "user-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
      - name: "remove-episode-listen-session-content-unpublish-episode-force"
        topic: "content-management-domain"
        handle-service: "PodcastService"
        description: "Removes the episode from users' listen session."
        parameters:
          - PodcastEpisodeId
        next-request-data:
          - PodcastEpisodeId
          - DmcaDismissedEpisodeId
        response-data:
          - PodcastEpisodeId
        onSuccess:
          emit: "remove-episode-listen-session-content-unpublish-episode-force.success"
          topic: "content-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps:
            - name: "unpublish-episode-unpublish-episode-force"
              topic: "content-management-domain"
              handle-service: "PodcastService"
          nextFlows: []
        onFailure:
          emit: "remove-episode-listen-session-content-unpublish-episode-force.failed"
          topic: "content-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
      - name: "unpublish-episode-unpublish-episode-force"
        topic: "content-management-domain"
        handle-service: "PodcastService"
        description: "Unpublishes the episode."
        parameters:
          - PodcastEpisodeId
        next-request-data:
          - PodcastEpisodeId
          - DmcaDismissedEpisodeId
        response-data:
          - PodcastEpisodeId
        onSuccess:
          emit: "unpublish-episode-unpublish-episode-force.success"
          topic: "content-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "unpublish-episode-unpublish-episode-force.failed"
          topic: "content-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []

  episode-publish-request-flow:
    topic: "content-moderation-domain"
    handle-service: "SagaOrchestratorService"
    description: "Yêu cầu kiểm duyệt episode"
    save-file: ""
    steps:
      - name: "request-episode-audio-examination"
        topic: "content-moderation-domain"
        handle-service: "PodcastService"
        description: "Kiểm duyệt nội dung audio để flag episode và tạo review session nếu cần"
        parameters:
          - PodcastEpisodeId
          - PodcasterId  # không dùng trong yêu cầu nhưng giữ để kiểm tra quyền (lấy từ jwt)
        next-request-data:
          - PodcastEpisodeId
          - PodcasterId
        response-data:
          - PodcastEpisodeId
          - PodcasterId
        onSuccess:
          emit: "request-episode-audio-examination.success"
          topic: "content-moderation-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "request-episode-audio-examination.failed"
          topic: "content-moderation-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []

  episode-publish-review-session-edit-require-flow:
    topic: "content-moderation-domain"
    handle-service: "SagaOrchestratorService"
    description: "Đánh giá nội dung tập podcast"
    save-file: ""
    steps:
      - name: "require-episode-publish-review-session-edit"
        topic: "content-moderation-domain"
        handle-service: "PodcastService"
        description: "Staff kiểm duyệt nội dung vào quyêt định có cho đăng hay không"
        parameters:
          - PodcastEpisodePublishReviewSessionId
          - Note
          - PodcastIllegalContentTypeIds
          - StaffId 
        next-request-data:
          - PodcastEpisodePublishReviewSessionId
          - Note
          - PodcastIllegalContentTypeIds
          - StaffId 
        response-data:
          - PodcastEpisodePublishReviewSessionId
          - Note
          - PodcastIllegalContentTypeIds
          - StaffId 
        onSuccess:
          emit: "require-episode-publish-review-session-edit.success"
          topic: "content-moderation-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "require-episode-publish-review-session-edit.failed"
          topic: "content-moderation-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []

  episode-publish-review-session-acceptance-flow:
    topic: "content-moderation-domain"
    handle-service: "SagaOrchestratorService"
    description: "Đánh giá nội dung tập podcast"
    save-file: ""
    steps:
      - name: "accept-episode-publish-review-session"
        topic: "content-moderation-domain"
        handle-service: "PodcastService"
        description: "Staff đồng ý cho đăng tập podcast"
        parameters:
          - PodcastEpisodePublishReviewSessionId
          - Note
          - PodcastIllegalContentTypeIds
          - StaffId 
        next-request-data:
          - PodcastEpisodePublishReviewSessionId
          - Note
          - PodcastIllegalContentTypeIds
          - StaffId 
        response-data:
          - PodcastEpisodePublishReviewSessionId
          - Note
          - PodcastIllegalContentTypeIds
          - StaffId 
        onSuccess:
          emit: "accept-episode-publish-review-session.success"
          topic: "content-moderation-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "accept-episode-publish-review-session.failed"
          topic: "content-moderation-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
  
  episode-publish-review-session-rejection-flow:
    topic: "content-moderation-domain"
    handle-service: "SagaOrchestratorService"
    description: "Từ chối xuất bản tập podcast"
    save-file: ""
    steps:
      - name: "reject-episode-publish-review-session"
        topic: "content-moderation-domain"
        handle-service: "PodcastService"
        description: "Từ chối xuất bản tập podcast"
        parameters:
          - PodcastEpisodePublishReviewSessionId
          - Note
          - PodcastIllegalContentTypeIds
          - StaffId 
        next-request-data:
          - PodcastEpisodePublishReviewSessionId
          - Note
          - PodcastIllegalContentTypeIds
          - StaffId 
        response-data:
          - PodcastEpisodePublishReviewSessionId
          - Note
          - PodcastIllegalContentTypeIds
          - StaffId 
        onSuccess:
          emit: "reject-episode-publish-review-session.success"
          topic: "content-moderation-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "reject-episode-publish-review-session.failed"
          topic: "content-moderation-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []

  episode-publish-review-session-discard-flow:
    topic: "content-moderation-domain"
    handle-service: "SagaOrchestratorService"
    description: "Hủy phiên đánh giá xuất bản tập podcast"
    save-file: ""
    steps:
      - name: "discard-episode-publish-review-session"
        topic: "content-moderation-domain"
        handle-service: "PodcastService"
        description: "Hủy phiên đánh giá xuất bản tập podcast"
        parameters:
          - PodcastEpisodeId
          - PodcasterId # không dùng trong hủy nhưng giữ để kiểm tra quyền (lấy từ jwt)
        next-request-data:
          - PodcastEpisodeId
          - PodcasterId
        response-data:
          - PodcastEpisodeId
          - PodcasterId
        onSuccess:
          emit: "discard-episode-publish-review-session.success"
          topic: "content-moderation-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "discard-episode-publish-review-session.failed"
          topic: "content-moderation-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []

  episode-deletion-flow:
    topic: "content-management-domain"
    handle-service: "PodcastService"
    description: "Handles the deletion of podcast episodes."
    save-files: ""
    steps:
      - name: "delete-account-saved-episode-episode-deletion-force"
        topic: "user-management-domain"
        handle-service: "UserService"
        description: "Removes the episode from users' saved lists."
        parameters:
          - PodcastEpisodeId
        next-request-data:
          - PodcastEpisodeId
        response-data:
          - PodcastEpisodeId
        onSuccess:
          emit: "delete-account-saved-episode-episode-deletion-force.success"
          topic: "user-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps:
            - name: "resolve-episode-report-no-effect-episode-deletion-force"
              topic: "report-management-domain"
              handle-service: "ModerationService"
          nextFlows: []
        onFailure:
          emit: "delete-account-saved-episode-episode-deletion-force.failed"
          topic: "user-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
      - name: "resolve-episode-report-no-effect-episode-deletion-force"
        topic: "report-management-domain"
        handle-service: "ModerationService"
        description: "Resolves all episode report review sessions with no effect (includes resolving child reports)."
        parameters:
          - PodcastEpisodeId
        next-request-data:
          - PodcastEpisodeId
        response-data:
          - PodcastEpisodeId
        onSuccess:
          emit: "resolve-episode-report-no-effect-episode-deletion-force.success"
          topic: "report-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps:
            - name: "remove-episode-listen-session-content-episode-deletion-force"
              topic: "content-management-domain"
              handle-service: "PodcastService"
          nextFlows: []
        onFailure:
          emit: "resolve-episode-report-no-effect-episode-deletion-force.failed"
          topic: "report-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
      - name: "remove-episode-listen-session-content-episode-deletion-force"
        topic: "content-management-domain"
        handle-service: "PodcastService"
        description: "Removes the episode from users' listen session."
        parameters:
          - PodcastEpisodeId
        next-request-data:
          - PodcastEpisodeId
        response-data:
          - PodcastEpisodeId
        onSuccess:
          emit: "remove-episode-listen-session-content-episode-deletion-force.success"
          topic: "content-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps:
            - name: "discard-episode-publish-review-episode-deletion-force"
              topic: "content-moderation-domain"
              handle-service: "PodcastService"
          nextFlows: []
        onFailure:
          emit: "remove-episode-listen-session-content-episode-deletion-force.failed"
          topic: "content-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
      - name: "discard-episode-publish-review-episode-deletion-force"
        topic: "content-moderation-domain"
        handle-service: "PodcastService"
        description: "Discards episode publish review sessions with statuses other than 2, 3, 4."
        parameters:
          - PodcastEpisodeId
        next-request-data:
          - PodcastEpisodeId
        response-data:
          - PodcastEpisodeId
        onSuccess:
          emit: "discard-episode-publish-review-episode-deletion-force.success"
          topic: "content-moderation-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps:
            - name: "dismiss-episode-dmca-episode-deletion-force"
              topic: "dmca-management-domain"
              handle-service: "ModerationService"
          nextFlows: []
        onFailure:
          emit: "discard-episode-publish-review-episode-deletion-force.failed"
          topic: "content-moderation-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
      - name: "dismiss-episode-dmca-episode-deletion-force"
        topic: "dmca-management-domain"
        handle-service: "ModerationService"
        description: "Dismisses episode DMCA accusations (only changes DMCA status)."
        parameters:
          - PodcastEpisodeId
        next-request-data:
          - PodcastEpisodeId
          - DmcaDismissedEpisodeId
        response-data:
          - PodcastEpisodeId
          - DmcaDismissedEpisodeId
        onSuccess:
          emit: "dismiss-episode-dmca-episode-deletion-force.success"
          topic: "dmca-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps:
            - name: "remove-dismissed-episode-dmca-episode-deletion-force"
              topic: "content-management-domain"
              handle-service: "ModerationService"
          nextFlows: []
        onFailure:
          emit: "dismiss-episode-dmca-episode-deletion-force.failed"
          topic: "dmca-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
      - name: "remove-dismissed-episode-dmca-episode-deletion-force"
        topic: "content-management-domain"
        handle-service: "PodcastService"
        description: "Removes dismissed episode DMCA (changes status to remove + runs add violation point flow if applicable)."
        parameters:
          - PodcastEpisodeId
          - DmcaDismissedEpisodeId
        next-request-data:
          - PodcastEpisodeId
          - DmcaDismissedEpisodeId
        response-data:
          - PodcastEpisodeId
          - DmcaDismissedEpisodeId
        onSuccess:
          emit: "remove-dismissed-episode-dmca-episode-deletion-force.success"
          topic: "content-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps:
            - name: "delete-episode-episode-deletion-force"
              topic: "content-management-domain"
              handle-service: "PodcastService"
          nextFlows: []
        onFailure:
          emit: "remove-dismissed-episode-dmca-episode-deletion-force.failed"
          topic: "content-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
      - name: "delete-episode-episode-deletion-force"
        topic: "content-management-domain"
        handle-service: "PodcastService"
        description: "Deletes the episode."
        parameters:
          - PodcastEpisodeId
        next-request-data:
          - PodcastEpisodeId
          - DmcaDismissedEpisodeId
        response-data:
          - PodcastEpisodeId
        onSuccess:
          emit: "delete-episode-episode-deletion-force.success"
          topic: "content-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "delete-episode-episode-deletion-force.failed"
          topic: "content-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []

  all-user-listen-session-completion-flow:
    topic: "content-management-domain"
    handle-service: "SagaOrchestratorService"
    description: "Hoàn thành tất cả phiên nghe của người dùng"
    save-file: ""
    steps:
      - name: "complete-all-user-episode-listen-sessions"
        topic: "content-management-domain"
        handle-service: "PodcastService"
        description: "Đánh dấu tất cả phiên nghe episode của người dùng là hoàn thành"
        parameters:
          - AccountId
          - IsEpisodeListenSessionCompleted
        next-request-data:
          - AccountId
          - IsEpisodeListenSessionCompleted
          - IsBookingProducingListenSessionCompleted
        response-data:
          - AccountId
          - IsEpisodeListenSessionCompleted
        onSuccess:
          emit: "complete-all-user-episode-listen-sessions.success"
          topic: "content-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: 
            - name: "complete-all-user-booking-producing-listen-sessions"
              topic: "booking-management-domain"
              handle-service: "BookingManagementService"
          nextFlows: []
        onFailure:
          emit: "complete-all-user-episode-listen-sessions.failed"
          topic: "content-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
      - name: "complete-all-user-booking-producing-listen-sessions"
        topic: "booking-management-domain"
        handle-service: "BookingManagementService"
        description: "Đánh dấu tất cả phiên nghe booking của người dùng là hoàn thành"
        parameters:
          - AccountId
          - IsBookingProducingListenSessionCompleted
        next-request-data:
          - AccountId
          - IsEpisodeListenSessionCompleted
          - IsBookingProducingListenSessionCompleted
        response-data:
          - AccountId
          - IsBookingProducingListenSessionCompleted
        onSuccess:
          emit: "complete-all-user-booking-producing-listen-sessions.success"
          topic: "booking-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "complete-all-user-booking-producing-listen-sessions.failed"
          topic: "booking-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []

  content-dmca-takedown-flow:
    topic: "content-management-domain"
    handle-service: "SagaOrchestratorService"
    description: "Xử lý khiếu nại bản quyền"
    save-file: ""
    steps:
      - name: "takedown-content-dmca"
        topic: "content-management-domain"
        handle-service: "PodcastService"
        description: "Chuyển status của episode hoặc show thành taken down"
        parameters:
          - PodcastEpisodeId
          - PodcastShowId
          - TakenDownReason
        next-request-data:
          - PodcastEpisodeId
          - PodcastShowId
          - TakenDownReason
        response-data:
          - PodcastEpisodeId
          - PodcastShowId
          - TakenDownReason
        onSuccess:
          emit: "takedown-content-dmca.success"
          topic: "content-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "takedown-content-dmca.failed"
          topic: "content-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []

  content-restoration-flow:
    topic: "content-management-domain"
    handle-service: "SagaOrchestratorService"
    description: "Khôi phục nội dung"
    save-file: ""
    steps:
      - name: "restore-content-dmca"
        topic: "content-management-domain"
        handle-service: "PodcastService"
        description: "Khôi phục status của episode hoặc show thành published"
        parameters:
          - PodcastEpisodeId
          - PodcastShowId
        next-request-data:
          - PodcastEpisodeId
          - PodcastShowId
        response-data:
          - PodcastEpisodeId
          - PodcastShowId
          - UpdatedAt
        onSuccess:
          emit: "restore-content-dmca.success"
          topic: "content-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "restore-content-dmca.failed"
          topic: "content-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []

  hashtags-creation-flow:
    topic: "content-management-domain"
    handle-service: "SagaOrchestratorService"
    description: "Tạo hashtag"
    save-file: ""
    steps:
      - name: "create-hashtag"
        topic: "content-management-domain"
        handle-service: "PodcastService"
        description: "Tạo hashtag mới nếu chưa tồn tại"
        parameters:
          - HashtagName
        next-request-data:
          - HashtagName
        response-data:
          - HashtagId
          - HashtagName
          - CreatedAt
        onSuccess:
          emit: "create-hashtag.success"
          topic: "content-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "create-hashtag.failed"
          topic: "content-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []

  content-statistics-calculation-flow:
    topic: "content-management-domain"
    handle-service: "SagaOrchestratorService"
    description: "Tính toán thống kê nội dung"
    save-file: ""
    steps:
      - name: "update-listen-count"
        topic: "content-management-domain"
        handle-service: "PodcastService"
        description: "Cập nhật số lượt nghe cho episode, channel hoặc show thêm 1"
        parameters:
          - PodcastChannelId
          - PodcastShowId
          - PodcastEpisodeId
        next-request-data:
          - PodcastChannelId
          - PodcastShowId
          - PodcastEpisodeId
        response-data:
          - PodcastChannelId
          - PodcastShowId
          - PodcastEpisodeId
          - ListenCount
          - UpdatedAt
        onSuccess:
          emit: "update-listen-count.success"
          topic: "content-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "update-listen-count.failed"
          topic: "content-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []

  terminate-podcaster-flow:
    topic: "user-management-domain"
    handle-service: "SagaOrchestratorService"
    description: "Handles the termination of podcast creator accounts."
    save-files: ""
    steps:
      - name: "cancel-podcaster-bookings-terminate-podcaster-force"
        topic: "booking-management-domain"
        handle-service: "BookingManagementService"
        description: "Cancels and refunds all bookings associated with the podcaster (statuses other than 3, 4, 8, 9, 10) with 100% refund."
        parameters:
          - PodcasterId
        next-request-data:
          - PodcasterId
        response-data:
          - PodcasterId
        onSuccess:
          emit: "cancel-podcaster-bookings-terminate-podcaster-force.success"
          topic: "booking-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps:
            - name: "delete-buddy-review-terminate-podcaster-force"
              topic: "user-management-domain"
              handle-service: "UserService"
          nextFlows: []
        onFailure:
          emit: "cancel-podcaster-bookings-terminate-podcaster-force.failed"
          topic: "booking-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
      - name: "delete-buddy-review-terminate-podcaster-force"
        topic: "public-review-management-domain"
        handle-service: "UserService"
        description: "Deletes all buddy reviews associated with the podcaster."
        parameters:
          - PodcasterId
        next-request-data:
          - PodcasterId
        response-data:
          - PodcasterId
        onSuccess:
          emit: "delete-buddy-review-terminate-podcaster-force.success"
          topic: "public-review-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps:
            - name: "delete-account-followed-podcaster-terminate-podcaster-force"
              topic: "user-management-domain"
              handle-service: "UserService"
          nextFlows: []
        onFailure:
          emit: "delete-buddy-review-terminate-podcaster-force.failed"
          topic: "public-review-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
      - name: "delete-account-followed-podcaster-terminate-podcaster-force"
        topic: "user-management-domain"
        handle-service: "UserService"
        description: "Removes the podcaster from all users' followed lists."
        parameters:
          - PodcasterId
        next-request-data:
          - PodcasterId
        response-data:
          - PodcasterId
        onSuccess:
          emit: "delete-account-followed-podcaster-terminate-podcaster-force.success"
          topic: "user-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps:
            - name: "resolve-podcast-buddy-report-no-effect-terminate-podcaster-force"
              topic: "report-management-domain"
              handle-service: "ModerationService"
          nextFlows: []
        onFailure:
          emit: "delete-account-followed-podcaster-terminate-podcaster-force.failed"
          topic: "user-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
      - name: "resolve-podcast-buddy-report-no-effect-terminate-podcaster-force"
        topic: "report-management-domain"
        handle-service: "ModerationService"
        description: "Resolves all podcast buddy report review sessions with no effect (includes resolving child reports)."
        parameters:
          - PodcasterId
        next-request-data:
          - PodcasterId
        response-data:
          - PodcasterId
        onSuccess:
          emit: "resolve-podcast-buddy-report-no-effect-terminate-podcaster-force.success"
          topic: "report-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps:
            - name: "remove-podcaster-booking-tracks-listen-session-terminate-podcaster-force"
              topic: "booking-management-domain"
              handle-service: "BookingManagementService"
          nextFlows: []
        onFailure:
          emit: "resolve-podcast-buddy-report-no-effect-terminate-podcaster-force.failed"
          topic: "report-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
      - name: "remove-podcaster-booking-tracks-listen-session-terminate-podcaster-force"
        topic: "booking-management-domain"
        handle-service: "BookingManagementService"
        description: "Removes all booking tracks associated with the podcaster from users' listen sessions."
        parameters:
          - PodcasterId
        next-request-data:
          - PodcasterId
        response-data:
          - PodcasterId
        onSuccess:
          emit: "remove-podcaster-booking-tracks-listen-session-terminate-podcaster-force.success"
          topic: "booking-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps:
            - name: "unpublish-podcaster-channels-terminate-podcaster-force"
              topic: "content-management-domain"
              handle-service: "PodcastService"
          nextFlows: []
        onFailure:
          emit: "remove-podcaster-booking-tracks-listen-session-terminate-podcaster-force.failed"
          topic: "booking-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
      - name: "unpublish-podcaster-channels-terminate-podcaster-force"
        topic: "content-management-domain"
        handle-service: "PodcastService"
        description: "Unpublishes all channels of the podcaster (changes status from published to unpublished, only works with published channels)."
        parameters:
          - PodcasterId
        next-request-data:
          - PodcasterId
        response-data:
          - PodcasterId
        onSuccess:
          emit: "unpublish-podcaster-channels-terminate-podcaster-force.success"
          topic: "content-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps:
            - name: "cancel-podcaster-channels-subscription-terminate-podcaster-force"
              topic: "subscription-management-domain"
              handle-service: "SubscriptionService"
          nextFlows: []
        onFailure:
          emit: "unpublish-podcaster-channels-terminate-podcaster-force.failed"
          topic: "content-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
      - name: "cancel-podcaster-channels-subscription-terminate-podcaster-force"
        topic: "subscription-management-domain"
        handle-service: "SubscriptionService"
        description: "Cancels and refunds all active channel/show subscriptions of the podcaster."
        parameters:
          - PodcasterId
        next-request-data:
          - PodcasterId
        response-data:
          - PodcasterId
        onSuccess:
          emit: "cancel-podcaster-channels-subscription-terminate-podcaster-force.success"
          topic: "subscription-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps:
            - name: "delete-account-favorited-podcaster-channels-terminate-podcaster-force"
              topic: "user-management-domain"
              handle-service: "UserService"
          nextFlows: []
        onFailure:
          emit: "cancel-podcaster-channels-subscription-terminate-podcaster-force.failed"
          topic: "subscription-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
      - name: "delete-account-favorited-podcaster-channels-terminate-podcaster-force"
        topic: "user-management-domain"
        handle-service: "UserService"
        description: "Removes all podcaster channels from users' favorited lists."
        parameters:
          - PodcasterId
        next-request-data:
          - PodcasterId
        response-data:
          - PodcasterId
        onSuccess:
          emit: "delete-account-favorited-podcaster-channels-terminate-podcaster-force.success"
          topic: "user-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps:
            - name: "unpublish-podcaster-shows-terminate-podcaster-force"
              topic: "content-management-domain"
              handle-service: "PodcastService"
          nextFlows: []
        onFailure:
          emit: "delete-account-favorited-podcaster-channels-terminate-podcaster-force.failed"
          topic: "user-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
      - name: "unpublish-podcaster-shows-terminate-podcaster-force"
        topic: "content-management-domain"
        handle-service: "PodcastService"
        description: "Unpublishes all shows of the podcaster (changes status from published to draft, only works with published shows)."
        parameters:
          - PodcasterId
        next-request-data:
          - PodcasterId
        response-data:
          - PodcasterId
        onSuccess:
          emit: "unpublish-podcaster-shows-terminate-podcaster-force.success"
          topic: "content-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps:
            - name: "delete-podcaster-shows-review-terminate-podcaster-force"
              topic: "public-review-management-domain"
              handle-service: "PodcastService"
          nextFlows: []
        onFailure:
          emit: "unpublish-podcaster-shows-terminate-podcaster-force.failed"
          topic: "content-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
      - name: "delete-podcaster-shows-review-terminate-podcaster-force"
        topic: "public-review-management-domain"
        handle-service: "PodcastService"
        description: "Deletes all show reviews of the podcaster."
        parameters:
          - PodcasterId
        next-request-data:
          - PodcasterId
        response-data:
          - PodcasterId
        onSuccess:
          emit: "delete-podcaster-shows-review-terminate-podcaster-force.success"
          topic: "public-review-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps:
            - name: "dismiss-podcaster-shows-dmca-terminate-podcaster-force"
              topic: "dmca-management-domain"
              handle-service: "ModerationService"
          nextFlows: []
        onFailure:
          emit: "delete-podcaster-shows-review-terminate-podcaster-force.failed"
          topic: "public-review-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
      - name: "dismiss-podcaster-shows-dmca-terminate-podcaster-force"
        topic: "dmca-management-domain"
        handle-service: "ModerationService"
        description: "Dismisses all show DMCA accusations of the podcaster (only changes DMCA status)."
        parameters:
          - PodcasterId
        next-request-data:
          - PodcasterId
          - DmcaDismissedShowIds
        response-data:
          - PodcasterId
          - DmcaDismissedShowIds
        onSuccess:
          emit: "dismiss-podcaster-shows-dmca-terminate-podcaster-force.success"
          topic: "dmca-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps:
            - name: "remove-dismissed-show-dmca-terminate-podcaster-force"
              topic: "content-management-domain"
              handle-service: "PodcastService"
          nextFlows: []
        onFailure:
          emit: "dismiss-podcaster-shows-dmca-terminate-podcaster-force.failed"
          topic: "dmca-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
      - name: "remove-dismissed-show-dmca-terminate-podcaster-force"
        topic: "content-management-domain"
        handle-service: "PodcastService"
        description: "Removes dismissed show DMCAs (changes status to remove + runs add violation point flow if applicable)."
        parameters:
          - PodcasterId
          - DmcaDismissedShowIds
        next-request-data:
          - PodcasterId
          - DmcaDismissedShowIds
        response-data:
          - PodcasterId
          - DmcaDismissedShowIds
        onSuccess:
          emit: "remove-dismissed-show-dmca-terminate-podcaster-force.success"
          topic: "content-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps:
            - name: "delete-account-followed-podcaster-shows-terminate-podcaster-force"
              topic: "user-management-domain"
              handle-service: "UserService"
          nextFlows: []
        onFailure:
          emit: "remove-dismissed-show-dmca-terminate-podcaster-force.failed"
          topic: "content-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
      - name: "delete-account-followed-podcaster-shows-terminate-podcaster-force"
        topic: "user-management-domain"
        handle-service: "UserService"
        description: "Removes all podcaster shows from users' followed lists."
        parameters:
          - PodcasterId
        next-request-data:
          - PodcasterId
          - DmcaDismissedShowIds
        response-data:
          - PodcasterId
        onSuccess:
          emit: "delete-account-followed-podcaster-shows-terminate-podcaster-force.success"
          topic: "user-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps:
            - name: "resolve-podcaster-shows-report-no-effect-terminate-podcaster-force"
              topic: "report-management-domain"
              handle-service: "ModerationService"
          nextFlows: []
        onFailure:
          emit: "delete-account-followed-podcaster-shows-terminate-podcaster-force.failed"
          topic: "user-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
      - name: "resolve-podcaster-shows-report-no-effect-terminate-podcaster-force"
        topic: "report-management-domain"
        handle-service: "ModerationService"
        description: "Resolves all podcaster show report review sessions with no effect (includes resolving child reports)."
        parameters:
          - PodcasterId
        next-request-data:
          - PodcasterId
          - DmcaDismissedShowIds
        response-data:
          - PodcasterId
        onSuccess:
          emit: "resolve-podcaster-shows-report-no-effect-terminate-podcaster-force.success"
          topic: "report-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps:
            - name: "unpublish-podcaster-episodes-terminate-podcaster-force"
              topic: "content-management-domain"
              handle-service: "PodcastService"
          nextFlows: []
        onFailure:
          emit: "resolve-podcaster-shows-report-no-effect-terminate-podcaster-force.failed"
          topic: "report-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
      - name: "unpublish-podcaster-episodes-terminate-podcaster-force"
        topic: "content-management-domain"
        handle-service: "PodcastService"
        description: "Unpublishes all episodes of the podcaster (changes status from published to ready to release, only works with published episodes)."
        parameters:
          - PodcasterId
        next-request-data:
          - PodcasterId
          - DmcaDismissedShowIds
        response-data:
          - PodcasterId
        onSuccess:
          emit: "unpublish-podcaster-episodes-terminate-podcaster-force.success"
          topic: "content-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps:
            - name: "dismiss-podcaster-episodes-dmca-terminate-podcaster-force"
              topic: "dmca-management-domain"
              handle-service: "ModerationService"
          nextFlows: []
        onFailure:
          emit: "unpublish-podcaster-episodes-terminate-podcaster-force.failed"
          topic: "content-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
      - name: "dismiss-podcaster-episodes-dmca-terminate-podcaster-force"
        topic: "dmca-management-domain"
        handle-service: "ModerationService"
        description: "Dismisses all episode DMCA accusations of the podcaster (only changes DMCA status)."
        parameters:
          - PodcasterId
        next-request-data:
          - PodcasterId
          - DmcaDismissedShowIds
          - DmcaDismissedEpisodeIds
        response-data:
          - PodcasterId
          - DmcaDismissedEpisodeIds
        onSuccess:
          emit: "dismiss-podcaster-episodes-dmca-terminate-podcaster-force.success"
          topic: "dmca-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps:
            - name: "remove-dismissed-episode-dmca-terminate-podcaster-force"
              topic: "content-management-domain"
              handle-service: "PodcastService"
          nextFlows: []
        onFailure:
          emit: "dismiss-podcaster-episodes-dmca-terminate-podcaster-force.failed"
          topic: "dmca-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
      - name: "remove-dismissed-episode-dmca-terminate-podcaster-force"
        topic: "content-management-domain"
        handle-service: "PodcastService"
        description: "Removes dismissed episode DMCAs (changes status to remove + runs add violation point flow if applicable)."
        parameters:
          - PodcasterId
          - DmcaDismissedEpisodeIds
        next-request-data:
          - PodcasterId
          - DmcaDismissedShow Ids
          - DmcaDismissedEpisodeIds
        response-data:
          - PodcasterId
          - DmcaDismissedEpisodeIds
        onSuccess:
          emit: "remove-dismissed-episode-dmca-terminate-podcaster-force.success"
          topic: "content-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps:
            - name: "delete-account-saved-podcaster-episodes-terminate-podcaster-force"
              topic: "user-management-domain"
              handle-service: "UserService"
          nextFlows: []
        onFailure:
          emit: "remove-dismissed-episode-dmca-terminate-podcaster-force.failed"
          topic: "content-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
      - name: "delete-account-saved-podcaster-episodes-terminate-podcaster-force"
        topic: "user-management-domain"
        handle-service: "UserService"
        description: "Removes all podcaster episodes from users' saved lists."
        parameters:
          - PodcasterId
        next-request-data:
          - PodcasterId
          - DmcaDismissedShowIds
          - DmcaDismissedEpisodeIds
        response-data:
          - PodcasterId
        onSuccess:
          emit: "delete-account-saved-podcaster-episodes-terminate-podcaster-force.success"
          topic: "user-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps:
            - name: "resolve-podcaster-episodes-report-no-effect-terminate-podcaster-force"
              topic: "report-management-domain"
              handle-service: "ModerationService"
          nextFlows: []
        onFailure:
          emit: "delete-account-saved-podcaster-episodes-terminate-podcaster-force.failed"
          topic: "user-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
      - name: "resolve-podcaster-episodes-report-no-effect-terminate-podcaster-force"
        topic: "report-management-domain"
        handle-service: "ModerationService"
        description: "Resolves all podcaster episode report review sessions with no effect (includes resolving child reports)."
        parameters:
          - PodcasterId
        next-request-data:
          - PodcasterId
          - DmcaDismissedShowIds
          - DmcaDismissedEpisodeIds
        response-data:
          - PodcasterId
        onSuccess:
          emit: "resolve-podcaster-episodes-report-no-effect-terminate-podcaster-force.success"
          topic: "report-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps:
            - name: "remove-podcaster-episodes-listen-session-content-terminate-podcaster-force"
              topic: "content-management-domain"
              handle-service: "PodcastService"
          nextFlows: []
        onFailure:
          emit: "resolve-podcaster-episodes-report-no-effect-terminate-podcaster-force.failed"
          topic: "report-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
      - name: "remove-podcaster-episodes-listen-session-content-terminate-podcaster-force"
        topic: "content-management-domain"
        handle-service: "PodcastService"
        description: "Removes all podcaster episodes from users' listen session."
        parameters:
          - PodcasterId
        next-request-data:
          - PodcasterId
          - DmcaDismissedShowIds
          - DmcaDismissedEpisodeIds
        response-data:
          - PodcasterId
        onSuccess:
          emit: "remove-podcaster-episodes-listen-session-content-terminate-podcaster-force.success"
          topic: "content-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps:
            - name: "discard-podcaster-episodes-publish-review-terminate-podcaster-force"
              topic: "content-moderation-domain"
              handle-service: "PodcastService"
          nextFlows: []
        onFailure:
          emit: "remove-podcaster-episodes-listen-session-content-terminate-podcaster-force.failed"
          topic: "content-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
      - name: "discard-podcaster-episodes-publish-review-terminate-podcaster-force"
        topic: "content-moderation-domain"
        handle-service: "PodcastService"
        description: "Discards all podcaster episode publish review sessions with statuses other than 2, 3, 4."
        parameters:
          - PodcasterId
        next-request-data:
          - PodcasterId
          - DmcaDismissedShowIds
          - DmcaDismissedEpisodeIds
        response-data:
          - PodcasterId
        onSuccess:
          emit: "discard-podcaster-episodes-publish-review-terminate-podcaster-force.success"
          topic: "content-moderation-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "discard-podcaster-episodes-publish-review-terminate-podcaster-force.failed"
          topic: "content-moderation-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []

  episode-listen-session-duration-update-flow:
    topic: "content-management-domain"
    handle-service: "SagaOrchestratorService"
    description: "Cập nhật thời lượng nghe của phiên nghe"
    save-file: ""
    steps:
      - name: "update-episode-listen-session-duration"
        topic: "content-management-domain"
        handle-service: "PodcastService"
        description: "Cập nhật thời lượng nghe của phiên nghe"
        parameters:
          - PodcastEpisodeListenSessionId
          - ListenerId
          - LastListenDurationSeconds
          - CurrentPodcastSubscriptionRegistrationBenefitList
        next-request-data:
          - PodcastEpisodeListenSessionId
          - ListenerId
          - LastListenDurationSeconds
          - CurrentPodcastSubscriptionRegistrationBenefitList
        response-data:
          - PodcastEpisodeListenSessionId
          - ListenerId
          - LastListenDurationSeconds
          - CurrentPodcastSubscriptionRegistrationBenefitList
        onSuccess:
          emit: "update-episode-listen-session-duration.success"
          topic: "content-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "update-episode-listen-session-duration.failed"
          topic: "content-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []

  booking-creation-flow:
    topic: "booking-management-domain"
    handle-service: "SagaOrchestratorService"
    description: "Tạo booking với podcaster"
    save-file: ""
    steps:
      - name: "create-booking"
        topic: "booking-management-domain"
        handle-service: "BookingManagementService"
        description: "Tạo booking và booking negotiation đầu tiên"
        parameters:
          - Title
          - Description
          - AccountId
          - DeadlineDayCount
          - PodcastBuddyId
        next-request-data:
          - Title
          - Description
          - AccountId
          - DeadlineDayCount
          - PodcastBuddyId
        response-data:
          - BookingId
          - Title
          - Description
          - AccountId
          - DeadlineDayCount
          - PodcastBuddyId
          - CreatedAt
        onSuccess:
          emit: "create-booking.success"
          topic: "booking-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "create-booking.failed"
          topic: "booking-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []

  booking-negotiation-flow:
    topic: "booking-management-domain"
    handle-service: "SagaOrchestratorService"
    description: "Thương lượng đặt chỗ"
    save-file: "DemoAudioFile"
    steps:
      - name: "create-booking-negotiation"
        topic: "booking-management-domain"
        handle-service: "BookingManagementService"
        description: "Tạo booking negotiation và đổi booking status"
        parameters:
          - BookingId
          - AccountId
          - Deadline
          - Note
          - DemoAudioRequired
          - DemoAudioFileKey
          - Price
        next-request-data:
          - BookingId
          - AccountId
          - Deadline
          - Note
          - DemoAudioRequired
          - DemoAudioFileKey
          - Price
        response-data:
          - BookingNegotiationId
          - CreatedAt
        onSuccess:
          emit: "create-booking-negotiation.success"
          topic: "booking-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "create-booking-negotiation.failed"
          topic: "booking-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []

  booking-producing-request-creation-flow:
    topic: "booking-management-domain"
    handle-service: "SagaOrchestratorService"
    description: "Yêu cầu sản xuất nội dung"
    save-file: ""
    steps:
      - name: "create-producing-request"
        topic: "booking-management-domain"
        handle-service: "BookingManagementService"
        description: "Tạo booking producing request"
        parameters:
          - BookingId
          - Note
          - DeadlineDayCount
          - BookingPodcastTrackIds # List of PodcastTrackIds
        next-request-data:
          - BookingId
          - Note
          - DeadlineDayCount
          - BookingPodcastTrackIds
        response-data:
          - BookingProducingRequestId
          - BookingId
          - Note
          - DeadlineDayCount
          - BookingPodcastTrackIds
          - CreatedAt
        onSuccess:
          emit: "create-producing-request.success"
          topic: "booking-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "create-producing-request.failed"
          topic: "booking-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []

  booking-producing-request-agreement-flow:
    topic: "booking-management-domain"
    handle-service: "SagaOrchestratorService"
    description: "Đồng ý yêu cầu sản xuất nội dung"
    save-file: ""
    steps:
      - name: "agree-producing-request"
        topic: "booking-management-domain"
        handle-service: "BookingManagementService"
        description: "Cập nhật booking khi podcaster accept/reject producing request"
        parameters:
          - BookingId
          - IsAccepted
        next-request-data:
          - BookingId
          - IsAccepted
        response-data:
          - BookingId
          - IsAccepted
          - UpdatedAt
        onSuccess:
          emit: "agree-producing-request.success"
          topic: "booking-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "agree-producing-request.failed"
          topic: "booking-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []

  booking-track-submission-flow:
    topic: "booking-management-domain"
    handle-service: "SagaOrchestratorService"
    description: "Gửi track cho booking"
    save-file: "AudioFile"
    steps:
      - name: "submit-booking-track"
        topic: "booking-management-domain"
        handle-service: "BookingManagementService"
        description: "Submit audio file cho booking track"
        parameters:
          - BookingProducingRequestId
          - Tracks:
            - AudioFileKey
            - AudioFileSize
            - AudioLength
        next-request-data:
          - BookingProducingRequestId
          - Tracks:
            - AudioFileKey
            - AudioFileSize
            - AudioLength
        response-data:
          - BookingProducingRequestId
          - Tracks:
            - BookingPodcastTrackId
            - AudioFileKey
            - AudioFileSize
            - AudioLength
          - CreatedAt
        onSuccess:
          emit: "submit-booking-track.success"
          topic: "booking-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "submit-booking-track.failed"
          topic: "booking-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []

  booking-track-preview-flow:
    topic: "booking-management-domain"
    handle-service: "SagaOrchestratorService"
    description: "Cập nhật lượng preview còn lại của một booking track"
    save-file: ""
    steps:
      - name: "update-track-listen-slot"
        topic: "booking-management-domain"
        handle-service: "BookingManagementService"
        description: "Cập nhật lượng preview còn lại"
        parameters:
          - BookingPodcastTrackId
        next-request-data:
          - BookingPodcastTrackId
        response-data:
          - BookingPodcastTrackId
          - RemainingPreviewListenSlot
        onSuccess:
          emit: "update-track-listen-slot.success"
          topic: "booking-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "update-track-listen-slot.failed"
          topic: "booking-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []

  booking-negotiation-agree-flow:
    topic: "booking-management-domain"
    handle-service: "SagaOrchestratorService"
    description: "Đồng ý thỏa thuận đặt booking"
    save-file: ""
    steps:
      - name: "agree-booking-negotiation"
        topic: "booking-management-domain"
        handle-service: "BookingManagementService"
        description: "Cập nhật lại booking với thông tin booking negotiation gần nhất khi agree"
        parameters:
          - BookingId
        next-request-data:
          - BookingId
        response-data:
          - BookingId
          - UpdatedAt
        onSuccess:
          emit: "agree-booking-negotiation.success"
          topic: "booking-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "agree-booking-negotiation.failed"
          topic: "booking-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []

  booking-listen-session-duration-update-flow:
    topic: "booking-management-domain"
    handle-service: "SagaOrchestratorService"
    description: "Cập nhật thời lượng nghe của phiên nghe booking"
    save-file: ""
    steps:
      - name: "update-booking-listen-session-duration"
        topic: "booking-management-domain"
        handle-service: "BookingManagementService"
        description: "Cập nhật thời lượng nghe của phiên nghe booking"
        parameters:
          - BookingPodcastTrackListenSessionId
          - ListenerId
          - LastListenDurationSeconds
        next-request-data:
          - BookingPodcastTrackListenSessionId
          - ListenerId
          - LastListenDurationSeconds
        response-data:
          - BookingPodcastTrackListenSessionId
          - ListenerId
          - LastListenDurationSeconds
        onSuccess:
          emit: "update-booking-listen-session-duration.success"
          topic: "booking-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "update-booking-listen-session-duration.failed"
          topic: "booking-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []

  booking-reject-flow:
    topic: "booking-management-domain"
    handle-service: "SagaOrchestratorService"
    description: "Từ chối booking"
    save-file: ""
    steps:
      - name: "reject-booking"
        topic: "booking-management-domain"
        handle-service: "BookingManagementService"
        description: "Reject booking"
        parameters:
          - BookingId
        next-request-data:
          - BookingId
        response-data:
          - BookingId
          - UpdatedAt
        onSuccess:
          emit: "reject-booking.success"
          topic: "booking-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "reject-booking.failed"
          topic: "booking-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []

  booking-manual-cancellation-flow:
    topic: "booking-management-domain"
    handle-service: "SagaOrchestratorService"
    description: "Hủy booking"
    save-file: ""
    steps:
      - name: "cancel-booking-manual"
        topic: "booking-management-domain"
        handle-service: "BookingManagementService"
        description: "Cancel hoặc reject booking với lý do"
        parameters:
          - AccountId
          - BookingId
          - BookingManualCancelledReason
        next-request-data:
          - AccountId
          - BookingId
          - BookingManualCancelledReason
        response-data:
          - AccountId
          - BookingId
          - BookingManualCancelledReason
          - UpdatedAt
        onSuccess:
          emit: "cancel-booking-manual.success"
          topic: "booking-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "cancel-booking-manual.failed"
          topic: "booking-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []

  booking-auto-cancellation-flow:
    topic: "booking-management-domain"
    handle-service: "SagaOrchestratorService"
    description: "Hủy booking"
    save-file: ""
    steps:
      - name: "cancel-booking-auto"
        topic: "booking-management-domain"
        handle-service: "BookingManagementService"
        description: "Cancel hoặc reject booking với lý do"
        parameters:
          - BookingId
          - BookingAutoCancelReason
        next-request-data:
          - BookingId
          - BookingAutoCancelReason
        response-data:
          - BookingId
          - BookingAutoCancelReason
          - UpdatedAt
        onSuccess:
          emit: "cancel-booking-auto.success"
          topic: "booking-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "cancel-booking-auto.failed"
          topic: "booking-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []

  booking-dealing-flow:
    topic: "booking-management-domain"
    handler-service: "BookingService"
    description: "Handles the booking dealings."
    save-files: ""
    steps: 
      - name: "process-booking-dealing"
        topic: "booking-management-domain"
        handler-service: "BookingService"
        description: "Processes booking dealings."
        parameters:
          - BookingId
          - AccountId
          - BookingRequirementList
          - Price
          - DeadlineDayCount
        next-request-data:
          - BookingId
          - AccountId
          - BookingRequirementList
          - Price
          - DeadlineDayCount
        response-data:
          - BookingId
          - AccountId
          - BookingRequirementList
          - Price
          - DeadlineDayCount
          - UpdatedAt
        onSuccess:
          emit: "process-booking-dealing.success"
          topic: "booking-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "process-booking-dealing.failed"
          topic: "booking-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []

  booking-producing-request-cancellation-flow:
    topic: "booking-management-domain"
    handler-service: "BookingService"
    description: "Handles booking producing request cancellations."
    save-files: ""
    steps:
      - name: "cancel-booking-producing-request"
        topic: "booking-management-domain"
        handler-service: "BookingService"
        description: "Cancels booking producing requests."
        parameters:
          - AccountId
          - BookingId
          - CancellationReason
        next-request-data:
          - AccountId
          - BookingId
          - CancellationReason
        response-data:
          - AccountId
          - BookingId
          - CancellationReason
          - UpdatedAt
        onSuccess:
          emit: "cancel-booking-producing-request.success"
          topic: "booking-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "cancel-booking-producing-request.failed"
          topic: "booking-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []

  booking-cancel-validation-flow:
    topic: "booking-management-domain"
    handler-service: "BookingService"
    description: "Handles the validation of booking cancellations."
    save-files: ""
    steps:
      - name: "validate-booking-cancellation"
        topic: "booking-management-domain"
        handler-service: "BookingService"
        description: "Validates a booking cancellation."
        parameters:
          - AccountId
          - BookingId
          - IsAccepted
          - CustomerBookingCancelDepositRefundRate
          - PodcastBuddyBookingCancelDepositRefundRate
        next-request-data:
          - AccountId
          - BookingId
          - IsAccepted
          - CustomerBookingCancelDepositRefundRate
          - PodcastBuddyBookingCancelDepositRefundRate
        response-data:
          - AccountId
          - BookingId
          - IsAccepted
          - CustomerBookingCancelDepositRefundRate
          - PodcastBuddyBookingCancelDepositRefundRate
          - UpdatedAt
        onSuccess:
          emit: "validate-booking-cancellation.success"
          topic: "booking-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "validate-booking-cancellation.failed"
          topic: "booking-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []

  booking-podcast-tone-apply-flow:
    topic: "booking-management-domain"
    handler-service: "BookingService"
    description: "Applies podcast tones to a Podcaster."
    save-files: ""
    steps:
      - name: "add-podcast-tones-to-podcaster"
        topic: "booking-management-domain"
        handler-service: "BookingService"
        description: "Adds podcast tones to a Podcaster."
        parameters:
          - AccountId
          - PodcastToneIds
        next-request-data:
          - AccountId
          - PodcastToneIds
        response-data:
          - AccountId
          - PodcastToneIds
          - CreatedAt
        onSuccess:
          emit: "add-podcast-tones-to-podcaster.success"
          topic: "booking-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "add-podcast-tones-to-podcaster.failed"
          topic: "booking-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []

  booking-deposit-payment-flow:
    topic: "booking-management-domain"
    handler-service: "BookingService"
    description: "Handles booking deposit payments."
    save-files: ""
    steps:
      - name: "process-booking-deposit-payment"
        topic: "booking-management-domain"
        handler-service: "BookingService"
        description: "Processes booking deposit payments."
        parameters:
          - AccountId
          - BookingId
        next-request-data:
          - AccountId
          - BookingId
        response-data:
          - AccountId
          - BookingId
        onSuccess:
          emit: "process-booking-deposit-payment.success"
          topic: "booking-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: 
            - name: "create-booking-transaction"
              topic: "payment-processing-domain"
              handle-service: "TransactionService"
          nextFlows: []
        onFailure:
          emit: "process-booking-deposit-payment.failed"
          topic: "booking-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
      - name: "create-booking-transaction"
        topic: "payment-processing-domain"
        handle-service: "TransactionService"
        description: "Tạo booking transaction record cho deposit"
        parameters:
          - BookingId
          - Amount
          - Profit 
          - AccountId
          - PodcasterId
          - TransactionTypeId
        next-request-data:
          - BookingTransactionId
          - BookingId
          - Amount
          - Profit 
          - AccountId
          - PodcasterId
          - TransactionTypeId
        response-data:
          - BookingTransactionId
          - CreatedAt
        onSuccess:
          emit: "create-booking-transaction.success"
          topic: "payment-processing-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: 
            - name: "subtract-account-balance-amount"
              topic: "user-management-domain"
              handle-service: "UserService"
          nextFlows: []
        onFailure:
          emit: "create-booking-transaction.failed"
          topic: "user-management-domain"
          handle-service: "UserService"
          nextSteps: []
          nextFlows: []
      - name: "subtract-account-balance-amount"
        topic: "user-management-domain"
        handle-service: "UserService"
        description: "Trừ tiền từ ví customer"
        parameters:
          - AccountId
          - Amount
        next-request-data:
          - BookingTransactionId
          - BookingId
          - Amount
          - Profit 
          - AccountId
          - PodcasterId
          - TransactionTypeId
        response-data:
          - AccountId
          - Amount
          - NewBalance
        onSuccess:
          emit: "subtract-account-balance-amount.success"
          topic: "user-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: 
            - name: "complete-booking-transaction"
              topic: "payment-processing-domain"
              handle-service: "TransactionService"
          nextFlows: []
        onFailure:
          emit: "subtract-account-balance-amount.failed"
          topic: "user-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: 
            - name: "create-booking-transaction-rollback-flow"
              topic: "payment-processing-domain"
              handle-service: "SagaOrchestratorService"
      - name: "complete-booking-transaction"
        topic: "payment-processing-domain"
        handle-service: "TransactionService"
        description: "Cập nhật status thành success cho booking transaction"
        parameters:
          - BookingTransactionId
        next-request-data:
          - BookingTransactionId
          - BookingId
          - Amount
          - Profit 
          - AccountId
          - PodcasterId
          - TransactionTypeId
        response-data:
          - BookingTransactionId
          - BookingId
          - Amount
          - Profit 
          - AccountId
          - PodcasterId
          - TransactionTypeId
          - UpdatedAt
        onSuccess:
          emit: "complete-booking-transaction.success"
          topic: "payment-processing-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: 
            - name: "accept-booking-dealing"
              topic: "booking-management-domain"
              handler-service: "BookingService"
          nextFlows: []
        onFailure:
          emit: "complete-booking-transaction.failed"
          topic: "payment-processing-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: 
            - name: "subtract-account-balance-amount-rollback-flow"
              topic: "user-management-domain"
              handle-service: "SagaOrchestratorService"
      - name: "accept-booking-dealing"
        topic: "booking-management-domain"
        handler-service: "BookingService"
        description: "Accepts booking dealings."
        parameters:
          - BookingId
        next-request-data:
          - BookingId
        response-data:
          - BookingId
          - UpdatedAt
        onSuccess:
          emit: "accept-booking-dealing.success"
          topic: "booking-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "accept-booking-dealing.failed"
          topic: "booking-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []

  booking-pay-the-rest-payment-flow:
    topic: "booking-management-domain"
    handler-service: "BookingService"
    description: "Handles booking pay-the-rest payments."
    save-files: ""
    steps: 
      - name: "process-booking-pay-the-rest-payment"
        topic: "booking-management-domain"
        handler-service: "BookingService"
        description: "Processes booking pay-the-rest payments."
        parameters:
          - AccountId
          - BookingId
        next-request-data:
          - AccountId
          - BookingId
        response-data:
          - AccountId
          - BookingId
        onSuccess:
          emit: "process-booking-pay-the-rest-payment.success"
          topic: "booking-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: 
            - name: "create-booking-transaction"
              topic: "payment-processing-domain"
              handle-service: "TransactionService"
          nextFlows: []
        onFailure:
          emit: "process-booking-pay-the-rest-payment.failed"
          topic: "booking-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
      - name: "create-booking-transaction"
        topic: "payment-processing-domain"
        handle-service: "TransactionService"
        description: "Tạo booking transaction record cho final payment"
        parameters:
          - BookingId
          - Amount
          - Profit 
          - AccountId
          - PodcasterId
          - TransactionTypeId
        next-request-data:
          - BookingTransactionId
          - BookingId
          - Amount
          - Profit 
          - AccountId
          - PodcasterId
          - TransactionTypeId
        response-data:
          - BookingTransactionId
          - CreatedAt
        onSuccess:
          emit: "create-booking-transaction.success"
          topic: "payment-processing-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: 
            - name: "subtract-account-balance-amount"
              topic: "user-management-domain"
              handle-service: "UserService"
          nextFlows: []
        onFailure:
          emit: "create-booking-transaction.failed"
          topic: "user-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
      - name: "subtract-account-balance-amount"
        topic: "user-management-domain"
        handle-service: "UserService"
        description: "Trừ tiền từ ví customer"
        parameters:
          - AccountId
          - Amount
        next-request-data:
          - BookingTransactionId
          - BookingId
          - Amount
          - Profit 
          - AccountId
          - PodcasterId
          - TransactionTypeId
        response-data:
          - Account
          - NewBalance
          - UpdatedAt
        onSuccess:
          emit: "subtract-account-balance-amount.success"
          topic: "user-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: 
            - name: "complete-booking-transaction"
              topic: "payment-processing-domain"
              handle-service: "TransactionService"
          nextFlows: []
        onFailure:
          emit: "subtract-account-balance-amount.failed"
          topic: "user-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: 
            - name: "create-booking-transaction-rollback-flow"
              topic: "payment-processing-domain"
              handle-service: "SagaOrchestratorService"
      - name: "complete-booking-transaction"
        topic: "payment-processing-domain"
        handle-service: "TransactionService"
        description: "Cập nhật status thành success cho booking transaction"
        parameters:
          - BookingTransactionId
        next-request-data:
          - BookingTransactionId
          - BookingId
          - Amount
          - Profit 
          - AccountId
          - PodcasterId
          - TransactionTypeId
        response-data:
          - BookingTransactionId
          - BookingId
          - Amount
          - Profit 
          - AccountId
          - PodcasterId
          - TransactionTypeId
          - UpdatedAt
        onSuccess:
          emit: "complete-booking-transaction.success"
          topic: "payment-processing-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "complete-booking-transaction.failed"
          topic: "payment-processing-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: 
            - name: "subtract-account-balance-amount-rollback-flow"
              topic: "user-management-domain"
              handle-service: "SagaOrchestratorService"
      - name: "complete-booking"
        topic: "booking-management-domain"
        handle-service: "BookingManagementService"
        description: "Cập nhật status booking thành completed"
        parameters:
          - BookingId
        next-request-data:
          - BookingId
        response-data:
          - BookingId
          - UpdatedAt
        onSuccess:
          emit: "complete-booking.success"
          topic: "booking-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "complete-booking.failed"
          topic: "booking-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []

  podcast-subscription-creation-flow:
    topic: "subscription-management-domain"
    handle-service: "SagaOrchestratorService"
    description: "Tạo gói đăng ký podcast"
    save-file: ""
    steps:
      - name: "create-podcast-subscription"
        topic: "subscription-management-domain"
        handle-service: "SubscriptionService"
        description: "Tạo gói subscription cho show/channel"
        parameters:
          - Name
          - Description
          - PodcastShowId
          - PodcastChannelId
          - PodcastSubscriptionCycleTypePriceList
          - PodcastSubscriptionBenefitMappingList
        next-request-data:
          - Name
          - Description
          - PodcastShowId
          - PodcastChannelId
          - PodcastSubscriptionCycleTypePriceList
          - PodcastSubscriptionBenefitMappingList
        response-data:
          - PodcastSubscriptionId
          - Name
          - Description
          - PodcastShowId
          - PodcastChannelId
          - PodcastSubscriptionCycleTypePriceList
          - PodcastSubscriptionBenefitMappingList
          - CreatedAt
        onSuccess:
          emit: "create-podcast-subscription.success"
          topic: "subscription-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "create-podcast-subscription.failed"
          topic: "subscription-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []

  podcast-subscription-update-flow:
    topic: "subscription-management-domain"
    handle-service: "SagaOrchestratorService"
    description: "Cập nhật gói đăng ký podcast"
    save-file: ""
    steps:
      - name: "update-podcast-subscription"
        topic: "subscription-management-domain"
        handle-service: "SubscriptionService"
        description: "Cập nhật thông tin subscription và tạo version mới"
        parameters:
          - AccountId
          - PodcastSubscriptionId
          - Name
          - Description
          - PodcastSubscriptionCycleTypePrice
          - PodcastSubscriptionBenefitId
        next-request-data:
          - AccountId
          - PodcastSubscriptionId
          - Name
          - Description
          - PodcastSubscriptionCycleTypePrice
          - PodcastSubscriptionBenefitId
        response-data:
          - PodcastSubscriptionId
          - Name
          - Description
          - PodcastSubscriptionCycleTypePrice
          - PodcastSubscriptionBenefitId
          - UpdatedAt
          - NewVersion
        onSuccess:
          emit: "update-podcast-subscription.success"
          topic: "subscription-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "update-podcast-subscription.failed"
          topic: "subscription-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []

  podcast-subscription-registration-accept-newest-version-flow:
    topic: "subscription-management-domain"
    handle-service: "SagaOrchestratorService"
    description: "Chấp nhập chuyển sang gói version mới ở kì tiếp theo"
    save-file: ""
    steps:
      - name: "accept-podcast-subscription-newest-version"
        topic: "subscription-management-domain"
        handle-service: "PodcastService"
        description: "Kích hoạt gói đăng ký podcast"
        parameters:
          - AccountId
          - PodcastSubscriptionRegistrationId
          - IsAccepted
        next-request-data:
          - AccountId
          - PodcastSubscriptionRegistrationId
          - IsAccepted
        response-data:
          - AccountId
          - PodcastSubscriptionRegistrationId
          - IsAccepted
        onSuccess:
          emit: "accept-podcast-subscription-newest-version.success"
          topic: "subscription-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "accept-podcast-subscription-newest-version.failed"
          topic: "subscription-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []

  podcast-subscription-activation-flow:
    topic: "subscription-management-domain"
    handle-service: "SagaOrchestratorService"
    description: "Kích hoạt gói đăng ký podcast"
    save-file: ""
    steps:
      - name: "activate-podcast-subscription"
        topic: "subscription-management-domain"
        handle-service: "PodcastService"
        description: "Kích hoạt gói đăng ký podcast"
        parameters:
          - AccountId
          - PodcastSubscriptionId
        next-request-data:
          - AccountId
          - PodcastSubscriptionId
        response-data:
          - AccountId
          - PodcastSubscriptionId
          - IsActive
          - UpdatedAt
        onSuccess:
          emit: "activate-podcast-subscription.success"
          topic: "subscription-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "activate-podcast-subscription.failed"
          topic: "subscription-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []

  podcast-subscription-deactivation-flow:
    topic: "subscription-management-domain"
    handle-service: "SagaOrchestratorService"
    description: "Hủy kích hoạt gói đăng ký podcast"
    save-file: ""
    steps:
      - name: "deactivate-podcast-subscription"
        topic: "subscription-management-domain"
        handle-service: "SubscriptionService"
        description: "Nhận PodcastSubscriptionId để inactive subscription, xóa các SubscriptionRegistration"
        parameters:
          - AccountId
          - PodcastSubscriptionId
        next-request-data:
          - AccountId
          - PodcastSubscriptionId
        response-data:
          - AccountId
          - PodcastSubscriptionId
          - IsActive 
          - UpdatedAt
        onSuccess:
          emit: "deactivate-podcast-subscription.success"
          topic: "subscription-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "deactivate-podcast-subscription.failed"
          topic: "subscription-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []

  podcast-subscription-registration-flow:
    topic: "subscription-management-domain"
    handle-service: "SagaOrchestratorService"
    description: "Đăng ký gói đăng ký podcast"
    save-file: ""
    steps:
      - name: "create-account-podcast-subscription-registration"
        topic: "subscription-management-domain"
        handle-service: "SubscriptionService"
        description: "Customer đăng ký subscription package"
        parameters:
          - AccountId
          - PodcastSubscriptionId
          - SubscriptionCycleTypeId
        next-request-data:
          - AccountId
          - PodcastSubscriptionId
          - SubscriptionCycleTypeId
        response-data:
          - PodcastSubscriptionRegistrationId
          - AccountId
          - PodcastSubscriptionId
          - SubscriptionCycleTypeId
          - CreatedAt
        onSuccess:
          emit: "create-account-podcast-subscription-registration.success"
          topic: "subscription-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "create-account-podcast-subscription-registration.failed"
          topic: "subscription-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []

  member-subscription-creation-flow:
    topic: "subscription-management-domain"
    handle-service: "SagaOrchestratorService"
    description: "Tạo gói đăng ký thành viên"
    save-file: ""
    steps:
      - name: "create-member-subscription"
        topic: "subscription-management-domain"
        handle-service: "SubscriptionService"
        description: "Tạo gói member subscription"
        parameters:
          - Name
          - Description
          - PodcastSubscriptionCycleTypePrice 
          - MemberSubscriptionBenefitIds
        next-request-data:
          - Name
          - Description
          - PodcastSubscriptionCycleTypePrice 
          - MemberSubscriptionBenefitIds
        response-data:
          - MemberSubscriptionId
          - Name
          - Description
          - PodcastSubscriptionCycleTypePrice
          - MemberSubscriptionBenefitIds
          - CreatedAt
        onSuccess:
          emit: "create-member-subscription.success"
          topic: "subscription-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "create-member-subscription.failed"
          topic: "subscription-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []

  member-subscription-update-flow:
    topic: "subscription-management-domain"
    handle-service: "SagaOrchestratorService"
    description: "Cập nhật gói đăng ký thành viên"
    save-file: ""
    steps:
      - name: "update-member-subscription"
        topic: "subscription-management-domain"
        handle-service: "SubscriptionService"
        description: "Cập nhật thông tin member subscription và tạo version mới"
        parameters:
          - MemberSubscriptionId
          - Name
          - Description
          - PodcastSubscriptionCycleTypePrice 
          - MemberSubscriptionBenefitIds
        next-request-data:
          - MemberSubscriptionId
          - Name
          - Description
          - PodcastSubscriptionCycleTypePrice 
          - MemberSubscriptionBenefitIds
        response-data:
          - MemberSubscriptionId
          - Name
          - Description
          - PodcastSubscriptionCycleTypePrice 
          - MemberSubscriptionBenefitIds
          - UpdatedAt
          - NewVersion
        onSuccess:
          emit: "update-member-subscription.success"
          topic: "subscription-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "update-member-subscription.failed"
          topic: "subscription-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []

  member-subscription-active-flow:
    topic: "subscription-management-domain"
    handle-service: "SagaOrchestratorService"
    description: "Kích hoạt gói đăng ký thành viên"
    save-file: ""
    steps:
      - name: "active-member-subscription"
        topic: "subscription-management-domain"
        handle-service: "SubscriptionService"
        description: "Kích hoạt member subscription"
        parameters:
          - MemberSubscriptionId
        next-request-data:
          - MemberSubscriptionId
        response-data:
          - MemberSubscriptionId
          - IsActive
          - UpdatedAt
        onSuccess:
          emit: "active-member-subscription.success"
          topic: "subscription-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "active-member-subscription.failed"
          topic: "subscription-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []

  member-subscription-inactive-flow:
    topic: "subscription-management-domain"
    handle-service: "SagaOrchestratorService"
    description: "Hủy kích hoạt gói đăng ký thành viên"
    save-file: ""
    steps:
      - name: "inactive-member-subscription"
        topic: "subscription-management-domain"
        handle-service: "SubscriptionService"
        description: "Nhận MemberSubscriptionId để inactive member subscription, xóa các MemberSubscriptionRegistration"
        parameters:
          - MemberSubscriptionId
        next-request-data:
          - MemberSubscriptionId
        response-data:
          - MemberSubscriptionId
          - IsActive
          - UpdatedAt
        onSuccess:
          emit: "inactive-member-subscription.success"
          topic: "subscription-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps:
            - name: "refund-member-subscription-account"
              topic: "subscription-management-domain"
              handle-service: "SubscriptionService"
          nextFlows: []
        onFailure:
          emit: "inactive-member-subscription.failed"
          topic: "subscription-management-domain"
          handle-service: "SubscriptionService"
          nextSteps: []
          nextFlows: []
      - name: "refund-member-subscription-account"
        topic: "subscription-management-domain"
        handle-service: "SubscriptionService"
        description: "Nhận MemberSubscriptionId để lấy các MemberSubscriptionRegistration để lấy các AccountId và giá để chạy flow member-subscription-refund-flow"
        parameters:
          - MemberSubscriptionId
        next-request-data:
          - MemberSubscriptionId
          - IsActive
        response-data:
          - MemberSubscriptionId
          - IsActive
        onSuccess:
          emit: "refund-member-subscription-account.success"
          topic: "subscription-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "refund-member-subscription-account.failed"
          topic: "subscription-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []

  member-subscription-registration-flow:
    topic: "subscription-management-domain"
    handle-service: "SagaOrchestratorService"
    description: "Đăng ký gói đăng ký thành viên"
    save-file: ""
    steps:
      - name: "create-account-member-subscription-registration"
        topic: "subscription-management-domain"
        handle-service: "SubscriptionService"
        description: "Customer đăng ký member subscription"
        parameters:
          - AccountId
          - MemberSubscriptionId
          - SubscriptionCycleTypeId
        next-request-data:
          - AccountId
          - MemberSubscriptionId
          - SubscriptionCycleTypeId
        response-data:
          - MemberSubscriptionRegistrationId
          - AccountId
          - MemberSubscriptionId
          - SubscriptionCycleTypeId
          - CreatedAt
        onSuccess:
          emit: "create-account-member-subscription-registration.success"
          topic: "subscription-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "create-account-member-subscription-registration.failed"
          topic: "subscription-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []

  podcast-subscription-cancellation-flow:
    topic: "subscription-management-domain"
    handle-service: "SagaOrchestratorService"
    description: "Hủy đăng ký gói podcast subscription"
    save-file: ""
    steps:
      - name: "cancel-podcast-subscription-registration"
        topic: "subscription-management-domain"
        handle-service: "SubscriptionService"
        description: "Hủy đăng ký gói subscription"
        parameters:
          - AccountId
          - PodcastSubscriptionRegistrationId
        next-request-data:
          - AccountId
          - PodcastSubscriptionRegistrationId
        response-data:
          - AccountId
          - PodcastSubscriptionRegistrationId
          - CancelledAt
        onSuccess:
          emit: "cancel-podcast-subscription-registration.success"
          topic: "subscription-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "cancel-podcast-subscription-registration.failed"
          topic: "subscription-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []

  member-subscription-cancellation-flow:
    topic: "subscription-management-domain"
    handle-service: "SagaOrchestratorService"
    description: "Hủy đăng ký gói member subscription"
    save-file: ""
    steps:
      - name: "cancel-member-subscription-registration"
        topic: "subscription-management-domain"
        handle-service: "SubscriptionService"
        description: "Hủy đăng ký gói subscription"
        parameters:
          - MemberSubscriptionRegistrationId
        next-request-data:
          - MemberSubscriptionRegistrationId
        response-data:
          - MemberSubscriptionRegistrationId
          - CancelledAt
        onSuccess:
          emit: "cancel-member-subscription-registration.success"
          topic: "subscription-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "cancel-member-subscription-registration.failed"
          topic: "subscription-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []

  podcast-subscription-deletion-flow:
    topic: "subscription-management-domain"
    handle-service: "SagaOrchestratorService"
    description: "Xóa đăng ký gói podcast subscription"
    save-file: ""
    steps:
      - name: "delete-podcast-subscription"
        topic: "subscription-management-domain"
        handle-service: "SubscriptionService"
        description: "Xóa đăng ký gói subscription"
        parameters:
          - AccountId
          - PodcastSubscriptionId
        next-request-data:
          - AccountId
          - PodcastSubscriptionId
        response-data:
          - AccountId
          - PodcastSubscriptionId
          - DeletedAt
        onSuccess:
          emit: "delete-podcast-subscription.success"
          topic: "subscription-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "delete-podcast-subscription.failed"
          topic: "subscription-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []

  member-subscription-deletion-flow:
    topic: "subscription-management-domain"
    handle-service: "SagaOrchestratorService"
    description: "Xóa đăng ký gói member subscription"
    save-file: ""
    steps:
      - name: "delete-member-subscription"
        topic: "subscription-management-domain"
        handle-service: "SubscriptionService"
        description: "Xóa đăng ký gói subscription"
        parameters:
          - MemberSubscriptionId
        next-request-data:
          - MemberSubscriptionId
        response-data:
          - MemberSubscriptionId
          - DeletedAt
        onSuccess:
          emit: "delete-member-subscription.success"
          topic: "subscription-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "delete-member-subscription.failed"
          topic: "subscription-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []

  account-balance-create-payment-link-flow:
    topic: "payment-processing-domain"
    handle-service: "SagaOrchestratorService"
    description: "Nạp tiền vào tài khoản"
    save-file: ""
    steps:
      - name: "create-payment-link"
        topic: "payment-processing-domain"
        handle-service: "TransactionService"
        description: "Tạo account balance transaction và tạo link thanh toán"
        parameters:
          - AccountId
          - Amount
          - Description
          - ReturnUrl
          - CancelUrl
        next-request-data:
          - AccountId
          - Amount
          - Description
          - ReturnUrl
          - CancelUrl
        response-data:
          - PaymentLinkUrl
          - AccountBalanceTransactionId
        onSuccess:
          emit: "create-payment-link.success"
          topic: "payment-processing-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "create-payment-link.failed"
          topic: "payment-processing-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []

  account-balance-confirm-payment-flow:
    topic: "payment-processing-domain"
    handle-service: "SagaOrchestratorService"
    description: "Xác nhận thanh toán nạp tiền vào tài khoản"
    save-file: ""
    steps:
      - name: "confirm-payment"
        topic: "payment-processing-domain"
        handle-service: "TransactionService"
        description: "Xác nhận thanh toán thành công từ payment gateway, cập nhật status account balance thành success"
        parameters:
          - WebHookBody:
            - Data
            - vv
        next-request-data:
          - AccountId
          - Amount
          - AccountBalanceTransactionId
        response-data:
          - AccountId
          - Amount
          - AccountBalanceTransactionId
        onSuccess:
          emit: "confirm-payment.success"
          topic: "payment-processing-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: 
            - name: "add-account-balance-amount"
              topic: "user-management-domain"
              handle-service: "UserService"
          nextFlows: []
        onFailure:
          emit: "confirm-payment.failed"
          topic: "user-management-domain"
          handle-service: "UserService"
          nextSteps: []
          nextFlows: []
      - name: "add-account-balance-amount"
        topic: "user-management-domain"
        handle-service: "UserService"
        description: "Thêm tiền vô ví"
        parameters:
          - AccountId
          - Amount
        next-request-data:
          - AccountId
          - Amount
          - AccountBalanceTransactionId
        response-data:
          - AccountId
          - Amount
          - NewBalance
        onSuccess:
          emit: "add-account-balance-amount.success"
          topic: "user-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "add-account-balance-amount.failed"
          topic: "user-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []

  account-balance-withdrawal-flow:
    topic: "payment-processing-domain"
    handle-service: "SagaOrchestratorService"
    description: "Rút tiền từ tài khoản"
    save-file: ""
    steps:
      - name: "create-withdrawal-request"
        topic: "payment-processing-domain"
        handle-service: "TransactionService"
        description: "Tạo record withdrawal transaction"
        parameters:
          - AccountId
          - Amount
        next-request-data:
          - AccountId
          - Amount
        response-data:
          - AccountBalanceTransactionId
          - AccountBalanceWithdrawalRequestId
          - CreatedAt
        onSuccess:
          emit: "create-withdrawal-request.success"
          topic: "payment-processing-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "create-withdrawal-request.failed"
          topic: "user-management-domain"
          handle-service: "UserService"
          nextSteps: []
          nextFlows: []

  account-balance-withdrawal-confirmation-flow:
    topic: "payment-processing-domain"
    handler-service: "PaymentService"
    description: "Handles the confirmation of account balance withdrawals."
    save-files: ""
    steps:
      - name: "confirm-account-balance-withdrawal"
        topic: "payment-processing-domain"
        handler-service: "PaymentService"
        description: "Confirms an account balance withdrawal."
        parameters:
          - AccountBalanceWithdrawalRequestId
          - ImageFileKey
          - RejectedReason
          - IsReject
        next-request-data:
          - AccountBalanceWithdrawalRequestId
          - ImageFileKey
          - RejectedReason
          - IsReject
        response-data:
          - AccountBalanceWithdrawalRequestId
          - ImageFileKey
          - RejectedReason
          - IsReject
          - UpdatedAt
        onSuccess:
          emit: "confirm-account-balance-withdrawal.success"
          topic: "payment-processing-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: 
            - name: "subtract-account-balance-amount"
              topic: "user-management-domain"
              handle-service: "UserService"
          nextFlows: []
        onFailure:
          emit: "confirm-account-balance-withdrawal.failed"
          topic: "payment-processing-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
      - name: "subtract-account-balance-amount"
        topic: "user-management-domain"
        handle-service: "UserService"
        description: "Trừ tiền từ ví"
        parameters:
          - AccountId
          - Amount
        next-request-data:
          - AccountId
          - Amount
        response-data:
          - AccountId
          - NewBalance
          - UpdatedAt
        onSuccess:
          emit: "subtract-account-balance-amount.success"
          topic: "user-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "subtract-account-balance-amount.failed"
          topic: "user-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []

  booking-podcaster-payment-flow:
    topic: "payment-processing-domain"
    handle-service: "SagaOrchestratorService"
    description: "Thanh toán phí dịch vụ booking cho hệ thống"
    save-file: ""
    steps:
      - name: "create-booking-transaction"
        topic: "payment-processing-domain"
        handle-service: "TransactionService"
        description: "Tạo booking system payment transaction"
        parameters:
          - BookingId
          - Amount
          - Profit
          - AccountId
          - PodcasterId
          - TransactionTypeId
        next-request-data:
          - BookingTransactionId
          - BookingId
          - Amount
          - Profit 
          - AccountId
          - PodcasterId
          - TransactionTypeId
        response-data:
          - BookingTransactionId
          - BookingId
          - Amount
          - Profit 
          - AccountId
          - PodcasterId
          - TransactionTypeId
          - CreatedAt
        onSuccess:
          emit: "create-booking-transaction.success"
          topic: "payment-processing-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: 
            - name: "add-podcaster-balance-amount"
              topic: "user-management-domain"
              handle-service: "UserService"
          nextFlows: []
        onFailure:
          emit: "create-booking-transaction.failed"
          topic: "payment-processing-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
      - name: "add-podcaster-balance-amount"
        topic: "user-management-domain"
        handle-service: "UserService"
        description: "Thêm tiền vô ví podcaster"
        parameters:
          - PodcasterId
          - Amount
        next-request-data:
          - BookingTransactionId
          - BookingId
          - Amount
          - Profit 
          - AccountId
          - PodcasterId
          - TransactionTypeId
        response-data:
          - PodcasterId
          - Amount
          - NewBalance
        onSuccess:
          emit: "add-podcaster-balance-amount.success"
          topic: "user-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: 
            - name: "complete-booking-transaction"
              topic: "payment-processing-domain"
              handle-service: "TransactionService"
          nextFlows: []
        onFailure:
          emit: "add-podcaster-balance-amount.failed"
          topic: "user-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: 
            - name: "create-booking-transaction-rollback-flow"
              topic: "payment-processing-domain"
              handle-service: "SagaOrchestratorService"
      - name: "complete-booking-transaction"
        topic: "payment-processing-domain"
        handle-service: "TransactionService"
        description: "Cập nhật status thành success cho booking transaction"
        parameters:
          - BookingTransactionId
        next-request-data:
          - BookingTransactionId
          - BookingId
          - Amount
          - Profit 
          - AccountId
          - PodcasterId
          - TransactionTypeId
        response-data:
          - BookingTransactionId
          - BookingId
          - Amount
          - Profit 
          - AccountId
          - PodcasterId
          - TransactionTypeId
          - UpdatedAt
        onSuccess:
          emit: "complete-booking-transaction.success"
          topic: "payment-processing-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "complete-booking-transaction.failed"
          topic: "payment-processing-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: 
            - name: "add-podcaster-balance-amount-rollback-flow"
              topic: "user-management-domain"
              handle-service: "SagaOrchestratorService"

  booking-refund-flow:
    topic: "payment-processing-domain"
    handle-service: "SagaOrchestratorService"
    description: "Hoàn tiền booking"
    save-file: ""
    steps:
      - name: "create-booking-transaction"
        topic: "payment-processing-domain"
        handle-service: "TransactionService"
        description: "Tạo booking transaction record cho hoàn tiền"
        parameters:
          - BookingId
          - Amount
          - Profit 
          - AccountId
          - PodcasterId
          - TransactionTypeId
        next-request-data:
          - BookingTransactionId
          - BookingId
          - Amount
          - Profit 
          - AccountId
          - PodcasterId
          - TransactionTypeId
        response-data:
          - BookingTransactionId
          - CreatedAt
        onSuccess:
          emit: "create-booking-transaction.success"
          topic: "payment-processing-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: 
            - name: "add-account-balance-amount"
              topic: "user-management-domain"
              handle-service: "SagaOrchestratorService"
          nextFlows: []
        onFailure:
          emit: "create-booking-transaction.failed"
          topic: "user-management-domain"
          handle-service: "UserService"
          nextSteps: []
          nextFlows: []
      - name: "add-account-balance-amount"
        topic: "user-management-domain"
        handle-service: "UserService"
        description: "Thêm tiền vô ví customer"
        parameters:
          - AccountId
          - Amount
        next-request-data:
          - BookingTransactionId
          - BookingId
          - Amount
          - Profit 
          - AccountId
          - PodcasterId
          - TransactionTypeId
        response-data:
          - AccountId
          - Amount
          - NewBalance
        onSuccess:
          emit: "add-account-balance-amount.success"
          topic: "user-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: 
            - name: "complete-booking-transaction"
              topic: "payment-processing-domain"
              handle-service: "TransactionService"
          nextFlows: []
        onFailure:
          emit: "add-account-balance-amount.failed"
          topic: "user-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: 
            - name: "create-booking-transaction-rollback-flow"
              topic: "payment-processing-domain"
              handle-service: "SagaOrchestratorService"
      - name: "complete-booking-transaction"
        topic: "payment-processing-domain"
        handle-service: "TransactionService"
        description: "Cập nhật status thành success cho booking transaction"
        parameters:
          - BookingTransactionId
        next-request-data:
          - BookingTransactionId
          - BookingId
          - Amount
          - Profit 
          - AccountId
          - PodcasterId
          - TransactionTypeId
        response-data:
          - BookingTransactionId
          - BookingId
          - Amount
          - Profit 
          - AccountId
          - PodcasterId
          - TransactionTypeId
          - UpdatedAt
        onSuccess:
          emit: "complete-booking-transaction.success"
          topic: "payment-processing-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "complete-booking-transaction.failed"
          topic: "payment-processing-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: 
            - name: "create-booking-transaction-rollback-flow"
              topic: "payment-processing-domain"
              handle-service: "SagaOrchestratorService"
            - name: "add-account-balance-amount-rollback-flow"
              topic: "user-management-domain"
              handle-service: "SagaOrchestratorService"

  booking-deposit-compensation-flow:
    topic: "payment-processing-domain"
    handle-service: "SagaOrchestratorService"
    description: "Hoàn tiền đặt cọc booking do podcaster từ chối yêu cầu"
    save-file: ""
    steps:
      - name: "create-booking-transaction"
        topic: "payment-processing-domain"
        handle-service: "TransactionService"
        description: "Tạo booking transaction record cho hoàn tiền đặt cọc"
        parameters:
          - BookingId
          - Amount
          - Profit 
          - AccountId
          - PodcasterId
          - TransactionTypeId
        next-request-data:
          - BookingTransactionId
          - BookingId
          - Amount
          - Profit 
          - AccountId
          - PodcasterId
          - TransactionTypeId
        response-data:
          - BookingTransactionId
          - CreatedAt
        onSuccess:
          emit: "create-booking-transaction.success"
          topic: "payment-processing-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: 
            - name: "add-podcaster-balance-amount"
              topic: "user-management-domain"
              handle-service: "UserService"
          nextFlows: []
        onFailure:
          emit: "create-booking-transaction.failed"
          topic: "user-management-domain"
          handle-service: "UserService"
          nextSteps: []
          nextFlows: []
      - name: "add-podcaster-balance-amount"
        topic: "user-management-domain"
        handle-service: "UserService"
        description: "Thêm tiền vô ví podcaster"
        parameters:
          - PodcasterId
          - Amount
        next-request-data:
          - BookingTransactionId
          - BookingId
          - Amount
          - Profit 
          - AccountId
          - PodcasterId
          - TransactionTypeId
        response-data:
          - PodcasterId
          - Amount
          - NewBalance
        onSuccess:
          emit: "add-podcaster-balance-amount.success"
          topic: "user-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: 
            - name: "complete-booking-transaction"
              topic: "payment-processing-domain"
              handle-service: "TransactionService"
          nextFlows: []
        onFailure:
          emit: "add-podcaster-balance-amount.failed"
          topic: "user-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: 
            - name: "create-booking-transaction-rollback-flow"
              topic: "payment-processing-domain"
              handle-service: "SagaOrchestratorService"
      - name: "complete-booking-transaction"
        topic: "payment-processing-domain"
        handle-service: "TransactionService"
        description: "Cập nhật status thành success cho booking transaction hoàn tiền đặt cọc"
        parameters:
          - BookingTransactionId
        next-request-data:
          - BookingTransactionId
          - BookingId
          - Amount
          - Profit 
          - AccountId
          - PodcasterId
          - TransactionTypeId
        response-data:
          - BookingTransactionId
          - BookingId
          - Amount
          - Profit 
          - AccountId
          - PodcasterId
          - TransactionTypeId
          - UpdatedAt
        onSuccess:
          emit: "complete-booking-transaction.success"
          topic: "payment-processing-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "complete-booking-transaction.failed"
          topic: "payment-processing-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: 
            - name: "add-podcaster-balance-amount-rollback-flow"
              topic: "user-management-domain"
              handle-service: "SagaOrchestratorService"

  booking-podcaster-income-release:
    topic: "payment-processing-domain"
    handle-service: "SagaOrchestratorService"
    description: "Giải phóng thu nhập cho podcaster sau khi hoàn thành booking"
    save-file: ""
    steps:
      - name: "create-booking-transaction"
        topic: "payment-processing-domain"
        handle-service: "TransactionService"
        description: "Giải phóng thu nhập cho podcaster"
        parameters:
          - BookingId
          - Profit
          - AccountId
          - PodcasterId
          - Amount
          - TransactionTypeId
        next-request-data:
          - BookingTransactionId
          - BookingId
          - Profit
          - AccountId
          - PodcasterId
          - Amount
          - TransactionTypeId
        response-data:
          - BookingTransactionId
          - BookingId
          - Profit
          - AccountId
          - PodcasterId
          - Amount
          - TransactionTypeId
        onSuccess:
          emit: "create-booking-transaction.success"
          topic: "payment-processing-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: 
            - name: "add-podcaster-balance-amount"
              topic: "user-management-domain"
              handle-service: "UserService"
          nextFlows: []
        onFailure:
          emit: "create-booking-transaction.failed"
          topic: "payment-processing-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
      - name: "add-podcaster-balance-amount"
        topic: "user-management-domain"
        handle-service: "UserService"
        description: "Thêm tiền vô ví podcaster"
        parameters:
          - PodcasterId
          - Amount
        next-request-data:
          - BookingTransactionId
          - BookingId
          - Profit
          - AccountId
          - PodcasterId
          - Amount
          - TransactionTypeId
        response-data:
          - PodcasterId
          - Amount
          - NewBalance
        onSuccess:
          emit: "add-podcaster-balance-amount.success"
          topic: "user-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: 
            - name: "complete-booking-transaction"
              topic: "payment-processing-domain"
              handle-service: "TransactionService"
          nextFlows: []
        onFailure:
          emit: "add-podcaster-balance-amount.failed"
          topic: "user-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
      - name: "complete-booking-transaction"
        topic: "payment-processing-domain"
        handle-service: "TransactionService"
        description: "Cập nhật status thành success cho booking transaction hoàn tiền đặt cọc"
        parameters:
          - BookingTransactionId
        next-request-data:
          - BookingTransactionId
          - BookingId
          - Amount
          - Profit 
          - AccountId
          - PodcasterId
          - TransactionTypeId
        response-data:
          - BookingTransactionId
          - BookingId
          - Amount
          - Profit 
          - AccountId
          - PodcasterId
          - TransactionTypeId
          - UpdatedAt
        onSuccess:
          emit: "complete-booking-transaction.success"
          topic: "payment-processing-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "complete-booking-transaction.failed"
          topic: "payment-processing-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: 
            - name: "add-podcaster-balance-amount-rollback-flow"
              topic: "user-management-domain"
              handle-service: "SagaOrchestratorService"
        
  booking-system-payment-flow:
    topic: "payment-processing-domain"
    handle-service: "SagaOrchestratorService"
    description: "Thanh toán phí dịch vụ booking cho hệ thống"
    save-file: ""
    steps:
      - name: "create-booking-transaction"
        topic: "payment-processing-domain"
        handle-service: "TransactionService"
        description: "Tạo booking system payment transaction"
        parameters:
          - BookingId
          - Amount
          - Profit 
          - AccountId
          - PodcasterId
          - TransactionTypeId
        next-request-data:
          - BookingTransactionId
          - BookingId
          - Amount
          - Profit 
          - AccountId
          - PodcasterId
          - TransactionTypeId
        response-data:
          - BookingTransactionId
          - BookingId
          - Amount
          - Profit 
          - AccountId
          - PodcasterId
          - TransactionTypeId
          - CreatedAt
        onSuccess:
          emit: "create-booking-transaction.success"
          topic: "payment-processing-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "create-booking-transaction.failed"
          topic: "payment-processing-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []

  podcast-subscription-payment-flow:
    topic: "payment-processing-domain"
    handle-service: "SagaOrchestratorService"
    description: "Thanh toán gia hạn gói đăng ký podcast"
    save-file: ""
    steps:
      - name: "create-podcast-subscription-transaction"
        topic: "payment-processing-domain"
        handle-service: "TransactionService"
        description: "Tạo subscription payment transaction"
        parameters:
          - PodcastSubscriptionRegistrationId
          - Profit
          - AccountId
          - PodcasterId
          - Amount
          - TransactionTypeId
        next-request-data:
          - PodcastSubscriptionPaymentTransactionId
          - PodcastSubscriptionRegistrationId
          - Profit
          - AccountId
          - PodcasterId
          - Amount
          - TransactionTypeId
        response-data:
          - PodcastSubscriptionPaymentTransactionId
          - CreatedAt
        onSuccess:
          emit: "create-podcast-subscription-transaction.success"
          topic: "payment-processing-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: 
            - name: "subtract-account-balance-amount"
              topic: "user-management-domain"
              handle-service: "UserService"
          nextFlows: []
        onFailure:
          emit: "create-podcast-subscription-transaction.failed"
          topic: "payment-processing-domain"
          handle-service: "UserService"
          nextSteps: []
          nextFlows: []
      - name: "subtract-account-balance-amount"
        topic: "user-management-domain"
        handle-service: "UserService"
        description: "Trừ tiền từ ví customer"
        parameters:
          - AccountId
          - Amount
        next-request-data:
          - PodcastSubscriptionPaymentTransactionId
          - PodcastSubscriptionRegistrationId
          - Profit
          - AccountId
          - PodcasterId
          - Amount
          - TransactionTypeId
        response-data:
          - AccountId
          - Amount
          - NewBalance
        onSuccess:
          emit: "subtract-account-balance-amount.success"
          topic: "user-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: 
            - name: "complete-podcast-subscription-transaction"
              topic: "payment-processing-domain"
              handle-service: "TransactionService"
          nextFlows: []
        onFailure:
          emit: "subtract-account-balance-amount.failed"
          topic: "user-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: 
            - name: "create-podcast-subscription-transaction-rollback-flow"
              topic: "payment-processing-domain"
              handle-service: "SagaOrchestratorService"
      - name: "complete-podcast-subscription-transaction"
        topic: "payment-processing-domain"
        handle-service: "TransactionService"
        description: "Cập nhật status thành success cho podcast subscription payment transaction"
        parameters:
          - PodcastSubscriptionTransactionId
        next-request-data:
          - PodcastSubscriptionPaymentTransactionId
          - PodcastSubscriptionRegistrationId
          - Profit
          - AccountId
          - PodcasterId
          - Amount
          - TransactionTypeId
        response-data:
          - PodcastSubscriptionTransactionId
          - PodcastSubscriptionRegistrationId
          - Profit
          - AccountId
          - PodcasterId
          - Amount
          - TransactionTypeId
          - UpdatedAt
        onSuccess:
          emit: "complete-podcast-subscription-transaction.success"
          topic: "payment-processing-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "complete-podcast-subscription-transaction.failed"
          topic: "payment-processing-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: 
            - name: "subtract-account-balance-amount-rollback-flow"
              topic: "user-management-domain"
              handle-service: "SagaOrchestratorService"

  member-subscription-payment-flow:
    topic: "payment-processing-domain"
    handle-service: "SagaOrchestratorService"
    description: "Thanh toán gia hạn gói đăng ký thành viên"
    save-file: ""
    steps:
      - name: "create-member-subscription-transaction"
        topic: "payment-processing-domain"
        handle-service: "TransactionService"
        description: "Tạo member subscription payment transaction"
        parameters:
          - MemberSubscriptionRegistrationId
          - AccountId
          - Amount
          - TransactionTypeId
        next-request-data:
          - MemberSubscriptionTransactionId
          - MemberSubscriptionRegistrationId
          - AccountId
          - Amount
          - TransactionTypeId
        response-data:
          - MemberSubscriptionTransactionId
          - CreatedAt
        onSuccess:
          emit: "create-member-subscription-transaction.success"
          topic: "payment-processing-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: 
            - name: "subtract-account-balance-amount"
              topic: "user-management-domain"
              handle-service: "UserService"
          nextFlows: []
        onFailure:
          emit: "create-member-subscription-transaction.failed"
          topic: "user-management-domain"
          handle-service: "UserService"
          nextSteps: []
          nextFlows: []
      - name: "subtract-account-balance-amount"
        topic: "user-management-domain"
        handle-service: "UserService"
        description: "Trừ tiền từ ví customer"
        parameters:
          - AccountId
          - Amount
        next-request-data:
          - MemberSubscriptionTransactionId
          - MemberSubscriptionRegistrationId
          - AccountId
          - Amount
          - TransactionTypeId
        response-data:
          - AccountId
          - Amount
          - NewBalance
        onSuccess:
          emit: "subtract-account-balance-amount.success"
          topic: "user-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: 
            - name: "complete-member-subscription-transaction"
              topic: "payment-processing-domain"
              handle-service: "TransactionService"
          nextFlows: []
        onFailure:
          emit: "subtract-account-balance-amount.failed"
          topic: "user-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: 
            - name: "create-member-subscription-transaction-rollback-flow"
              topic: "payment-processing-domain"
              handle-service: "SagaOrchestratorService"
      - name: "complete-member-subscription-transaction"
        topic: "payment-processing-domain"
        handle-service: "TransactionService"
        description: "Cập nhật status thành success cho member subscription payment transaction"
        parameters:
          - MemberSubscriptionTransactionId
        next-request-data:
          - MemberSubscriptionTransactionId
          - MemberSubscriptionRegistrationId
          - AccountId
          - Amount
          - TransactionTypeId
        response-data:
          - MemberSubscriptionTransactionId
          - MemberSubscriptionRegistrationId
          - AccountId
          - Amount
          - TransactionTypeId
          - UpdatedAt
        onSuccess:
          emit: "complete-member-subscription-transaction.success"
          topic: "payment-processing-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "complete-member-subscription-transaction.failed"
          topic: "payment-processing-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: 
            - name: "subtract-account-balance-amount-rollback-flow"
              topic: "user-management-domain"
              handle-service: "SagaOrchestratorService"

  podcast-subscription-refund-flow:
    topic: "payment-processing-domain"
    handle-service: "SagaOrchestratorService"
    description: "Hoàn tiền gói đăng ký podcast"
    save-file: ""
    steps:
      - name: "create-podcast-subscription-transaction"
        topic: "payment-processing-domain"
        handle-service: "TransactionService"
        description: "Tạo podcast subscription transaction"
        parameters:
          - PodcastSubscriptionRegistrationId
          - Profit
          - AccountId
          - PodcasterId
          - Amount
          - TransactionTypeId
        next-request-data:
          - PodcastSubscriptionTransactionId
          - PodcastSubscriptionRegistrationId
          - Profit
          - AccountId
          - PodcasterId
          - Amount
          - TransactionTypeId
        response-data:
          - PodcastSubscriptionTransactionId
          - CreatedAt
        onSuccess:
          emit: "create-podcast-subscription-transaction.success"
          topic: "payment-processing-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: 
            - name: "add-account-balance-amount"
              topic: "user-management-domain"
              handle-service: "UserService"
          nextFlows: []
        onFailure:
          emit: "create-podcast-subscription-transaction.failed"
          topic: "payment-processing-domain"
          handle-service: "UserService"
          nextSteps: []
          nextFlows: []
      - name: "add-account-balance-amount"
        topic: "user-management-domain"
        handle-service: "UserService"
        description: "Thêm tiền vô ví customer"
        parameters:
          - AccountId
          - Amount
        next-request-data:
          - PodcastSubscriptionTransactionId
          - PodcastSubscriptionRegistrationId
          - Profit
          - AccountId
          - PodcasterId
          - Amount
          - TransactionTypeId
        response-data:
          - AccountId
          - Amount
          - NewBalance
        onSuccess:
          emit: "add-account-balance-amount.success"
          topic: "user-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "add-account-balance-amount.failed"
          topic: "user-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: 
            - name: "create-podcast-subscription-transaction-rollback-flow"
              topic: "payment-processing-domain"
              handle-service: "SagaOrchestratorService"
      - name: "complete-podcast-subscription-transaction"
        topic: "payment-processing-domain"
        handle-service: "TransactionService"
        description: "Cập nhật status thành success cho podcast subscription transaction"
        parameters:
          - PodcastSubscriptionTransactionId
        next-request-data:
          - PodcastSubscriptionTransactionId
          - PodcastSubscriptionRegistrationId
          - Profit
          - AccountId
          - PodcasterId
          - Amount
          - TransactionTypeId
        response-data:
          - PodcastSubscriptionTransactionId
          - PodcastSubscriptionRegistrationId
          - Profit
          - AccountId
          - PodcasterId
          - Amount
          - TransactionTypeId
          - UpdatedAt
        onSuccess:
          emit: "complete-podcast-subscription-transaction.success"
          topic: "payment-processing-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "complete-podcast-subscription-transaction.failed"
          topic: "payment-processing-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: 
            - name: "add-account-balance-amount-rollback-flow"
              topic: "user-management-domain"
              handle-service: "SagaOrchestratorService"

  podcaster-subscription-income-release-flow:
    topic: "payment-processing-domain"
    handle-service: "SagaOrchestratorService"
    description: "Giải phóng thu nhập từ đăng ký cho podcaster"
    save-file: ""
    steps:
      - name: "create-podcast-subscription-transaction"
        topic: "payment-processing-domain"
        handle-service: "TransactionService"
        description: "Tạo podcast subscription transaction"
        parameters:
          - PodcastSubscriptionRegistrationId
          - Profit
          - AccountId
          - PodcasterId
          - Amount
          - TransactionTypeId
        next-request-data:
          - PodcastSubscriptionTransactionId
          - PodcastSubscriptionRegistrationId
          - Profit
          - AccountId
          - PodcasterId
          - Amount
          - TransactionTypeId
        response-data:
          - PodcastSubscriptionTransactionId
          - PodcastSubscriptionRegistrationId
          - Profit
          - AccountId
          - PodcasterId
          - Amount
          - TransactionTypeId
          - CreatedAt
        onSuccess:
          emit: "create-podcast-subscription-transaction.success"
          topic: "payment-processing-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: 
            - name: "add-podcaster-balance-amount"
              topic: "user-management-domain"
              handle-service: "UserService"
          nextFlows: []
        onFailure:
          emit: "create-podcast-subscription-transaction.failed"
          topic: "payment-processing-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
      - name: "add-podcaster-balance-amount"
        topic: "user-management-domain"
        handle-service: "UserService"
        description: "Thêm tiền vô ví Podcaster"
        parameters:
          - PodcasterId
          - Amount
        next-request-data:
          - PodcastSubscriptionTransactionId
          - PodcastSubscriptionRegistrationId
          - Profit
          - AccountId
          - PodcasterId
          - Amount
          - TransactionTypeId
        response-data:
          - PodcasterId
          - Amount
          - NewBalance
        onSuccess:
          emit: "add-podcaster-balance-amount.success"
          topic: "user-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: 
            - name: "complete-podcast-subscription-transaction"
              topic: "payment-processing-domain"
              handle-service: "UserService"
          nextFlows: []
        onFailure:
          emit: "add-podcaster-balance-amount.failed"
          topic: "user-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
      - name: "complete-podcast-subscription-transaction"
        topic: "payment-processing-domain"
        handle-service: "TransactionService"
        description: "Hoàn thành podcast subscription transaction"
        parameters:
          - PodcastSubscriptionTransactionId
        next-request-data:
          - PodcastSubscriptionTransactionId
          - PodcastSubscriptionRegistrationId
          - Profit
          - AccountId
          - PodcasterId
          - Amount
          - TransactionTypeId
        response-data:
          - PodcastSubscriptionTransactionId
          - PodcastSubscriptionRegistrationId
          - Profit
          - AccountId
          - PodcasterId
          - Amount
          - TransactionTypeId
          - UpdatedAt
        onSuccess:
          emit: "complete-podcast-subscription-transaction.success"
          topic: "payment-processing-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "complete-podcast-subscription-transaction.failed"
          topic: "payment-processing-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: 
            - name: "add-account-balance-amount-rollback-flow"
              topic: "user-management-domain"
              handle-service: "SagaOrchestratorService"

  podcast-subscription-system-payment-flow:
    topic: "payment-processing-domain"
    handle-service: "SagaOrchestratorService"
    description: "Lưu số tiền system nhận được từ podcast subscription"
    save-file: ""
    steps:
      - name: "create-podcast-subscription-transaction"
        topic: "payment-processing-domain"
        handle-service: "TransactionService"
        description: "Tạo podcast subscription transaction"
        parameters:
          - PodcastSubscriptionRegistrationId
          - Profit
          - AccountId
          - PodcasterId
          - Amount
          - TransactionTypeId
        next-request-data:
          - PodcastSubscriptionTransactionId
          - PodcastSubscriptionRegistrationId
          - Profit
          - AccountId
          - PodcasterId
          - Amount
          - TransactionTypeId
        response-data:
          - PodcastSubscriptionTransactionId
          - CreatedAt
        onSuccess:
          emit: "create-podcast-subscription-transaction.success"
          topic: "payment-processing-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "create-podcast-subscription-transaction.failed"
          topic: "payment-processing-domain"
          handle-service: "UserService"
          nextSteps: []
          nextFlows: []

  cancel-podcast-subscription-flow:
    topic: "subscription-management-domain"
    handle-service: "SagaOrchestratorService"
    description: "Hủy gói đăng ký thành viên hoặc podcast"
    save-file: ""
    steps:
      - name: "cancel-podcast-subscription"
        topic: "subscription-management-domain"
        handle-service: "SubscriptionService"
        description: "Hủy gói đăng ký thành viên hoặc podcast"
        parameters:
          - PodcastSubscriptionId
          - IsActive
          - IsDeleted
        next-request-data:
          - PodcastSubscriptionId
          - IsActive
          - IsDeleted
        response-data:
          - PodcastSubscriptionId
          - IsActive
          - IsDeleted
        onSuccess:
          emit: "cancel-podcast-subscription.success"
          topic: "subscription-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "cancel-podcast-subscription.failed"
          topic: "subscription-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []

  member-subscription-refund-flow:
    topic: "payment-processing-domain"
    handle-service: "SagaOrchestratorService"
    description: "Hoàn tiền gói đăng ký thành viên"
    save-file: ""
    steps:
      - name: "create-member-subscription-transaction"
        topic: "payment-processing-domain"
        handle-service: "TransactionService"
        description: "Tạo member subscription transaction"
        parameters:
          - MemberSubscriptionRegistrationId
          - AccountId
          - Amount
          - TransactionTypeId
        next-request-data:
          - MemberSubscriptionTransactionId
          - MemberSubscriptionRegistrationId
          - AccountId
          - Amount
          - TransactionTypeId
        response-data:
          - MemberSubscriptionTransactionId
          - CreatedAt
        onSuccess:
          emit: "create-member-subscription-transaction.success"
          topic: "payment-processing-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: 
            - name: "add-account-balance-amount"
              topic: "user-management-domain"
              handle-service: "UserService"
          nextFlows: []
        onFailure:
          emit: "create-member-subscription-transaction.failed"
          topic: "user-management-domain"
          handle-service: "UserService"
          nextSteps: []
          nextFlows: []
      - name: "add-account-balance-amount"
        topic: "user-management-domain"
        handle-service: "UserService"
        description: "Thêm tiền vô ví customer"
        parameters:
          - AccountId
          - Amount
        next-request-data:
          - MemberSubscriptionTransactionId
          - MemberSubscriptionRegistrationId
          - AccountId
          - Amount
          - TransactionTypeId
        response-data:
          - AccountId
          - Amount
          - NewBalance
        onSuccess:
          emit: "add-account-balance-amount.success"
          topic: "user-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: 
            - name: "complete-member-subscription-transaction"
              topic: "payment-processing-domain"
              handle-service: "TransactionService"
          nextFlows: []
        onFailure:
          emit: "add-account-balance-amount.failed"
          topic: "user-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: 
            - name: "create-member-subscription-transaction-rollback-flow" 
              topic: "payment-processing-domain"
              handle-service: "SagaOrchestratorService"
      - name: "complete-member-subscription-transaction"
        topic: "payment-processing-domain"
        handle-service: "TransactionService"
        description: "Cập nhật status thành success cho member subscription transaction"
        parameters:
          - MemberSubscriptionTransactionId
        next-request-data:
          - MemberSubscriptionTransactionId
          - MemberSubscriptionRegistrationId
          - AccountId
          - Amount
          - TransactionTypeId
        response-data:
          - MemberSubscriptionTransactionId
          - MemberSubscriptionRegistrationId
          - AccountId
          - Amount
          - TransactionTypeId
          - UpdatedAt
        onSuccess:
          emit: "complete-member-subscription-transaction.success"
          topic: "payment-processing-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "complete-member-subscription-transaction.failed"
          topic: "payment-processing-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: 
            - name: "add-account-balance-amount-rollback-flow"
              topic: "user-management-domain"
              handle-service: "SagaOrchestratorService"

  member-subscription-system-payment-flow:
    topic: "payment-processing-domain"
    handle-service: "SagaOrchestratorService"
    description: "Lưu số tiền system nhận được từ member subscription"
    save-file: ""
    steps:
      - name: "create-member-subscription-transaction"
        topic: "payment-processing-domain"
        handle-service: "TransactionService"
        description: "Tạo member subscription transaction"
        parameters:
          - MemberSubscriptionRegistrationId
          - AccountId
          - Amount
          - TransactionTypeId
        next-request-data:
          - MemberSubscriptionTransactionId
          - MemberSubscriptionRegistrationId
          - AccountId
          - Amount
          - TransactionTypeId
        response-data:
          - MemberSubscriptionTransactionId
          - CreatedAt
        onSuccess:
          emit: "create-member-subscription-transaction.success"
          topic: "payment-processing-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "create-member-subscription-transaction.failed"
          topic: "user-management-domain"
          handle-service: "UserService"
          nextSteps: []
          nextFlows: []

  # storage-purchase-flow:

  show-review-creation-flow:
    topic: "public-review-management-domain"
    handle-service: "SagaOrchestratorService"
    description: "Tạo review cho podcast show"
    save-file: ""
    steps:
      - name: "create-show-review"
        topic: "public-review-management-domain"
        handle-service: "PodcastService"
        description: "Tạo review cho podcast show"
        parameters:
          - AccountId
          - PodcastShowId
          - Title
          - Content
          - Rating
        next-request-data:
          - AccountId
          - PodcastShowId
          - Title
          - Content
          - Rating
        response-data:
          - PodcastShowReviewId
          - AccountId
          - PodcastShowId
          - Title
          - Content
          - Rating
          - CreatedAt
        onSuccess:
          emit: "create-show-review.success"
          topic: "public-review-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "create-show-review.failed"
          topic: "public-review-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []

  show-review-update-flow:
    topic: "public-review-management-domain"
    handle-service: "SagaOrchestratorService"
    description: "Cập nhật review cho podcast show"
    save-file: ""
    steps:
      - name: "update-show-review"
        topic: "public-review-management-domain"
        handle-service: "PodcastService"
        description: "Cập nhật review cho podcast show"
        parameters:
          - PodcastShowReviewId
          - AccountId  # không dùng để cập nhật, chỉ để xác thực quyền
          - Title
          - Content
          - Rating
        next-request-data:
          - PodcastShowReviewId
          - AccountId
          - Title
          - Content
          - Rating
        response-data:
          - PodcastShowReviewId
          - AccountId
          - Title
          - Content
          - Rating
          - UpdatedAt
        onSuccess:
          emit: "update-show-review.success"
          topic: "public-review-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "update-show-review.failed"
          topic: "public-review-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []

  show-review-deletion-flow:
    topic: "public-review-management-domain"
    handle-service: "SagaOrchestratorService"
    description: "Xóa review cho podcast show"
    save-file: ""
    steps:
      - name: "delete-show-review"
        topic: "public-review-management-domain"
        handle-service: "PodcastService"
        description: "Xóa review cho podcast show"
        parameters:
          - PodcastShowReviewId
          - AccountId # không dùng để xóa, chỉ để xác thực quyền
        next-request-data:
          - PodcastShowReviewId
          - AccountId
        response-data:
          - PodcastShowReviewId
          - AccountId
        onSuccess:
          emit: "delete-show-review.success"
          topic: "public-review-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "delete-show-review.failed"
          topic: "public-review-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []

  show-review-all-deletion-flow:
    topic: "public-review-management-domain"
    handle-service: "SagaOrchestratorService"
    description: "Xóa tất cả review cho podcast show"
    save-file: ""
    steps:
      - name: "delete-all-show-reviews"
        topic: "public-review-management-domain"
        handle-service: "PodcastService"
        description: "Xóa tất cả review cho podcast show"
        parameters:
          - PodcastShowId
        next-request-data:
          - PodcastShowId
        response-data:
          - PodcastShowId
        onSuccess:
          emit: "delete-all-show-reviews.success"
          topic: "public-review-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "delete-all-show-reviews.failed"
          topic: "public-review-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []

  podcast-buddy-review-creation-flow:
    topic: "public-review-management-domain"
    handle-service: "SagaOrchestratorService"
    description: "Tạo review cho podcast buddy"
    save-file: ""
    steps:
      - name: "create-podcast-buddy-review"
        topic: "public-review-management-domain"
        handle-service: "PodcastService"
        description: "Tạo review cho podcast buddy"
        parameters:
          - AccountId
          - PodcastBuddyId
          - Title
          - Content
          - Rating
        next-request-data:
          - AccountId
          - PodcastBuddyId
          - Title
          - Content
          - Rating
        response-data:
          - PodcastBuddyReviewId
          - AccountId
          - PodcastBuddyId
          - Title
          - Content
          - Rating
        onSuccess:
          emit: "create-podcast-buddy-review.success"
          topic: "public-review-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "create-podcast-buddy-review.failed"
          topic: "public-review-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []

  podcast-buddy-review-update-flow:
    topic: "public-review-management-domain"
    handle-service: "SagaOrchestratorService"
    description: "Cập nhật review cho podcast buddy"
    save-file: ""
    steps:
      - name: "update-podcast-buddy-review"
        topic: "public-review-management-domain"
        handle-service: "PodcastService"
        description: "Cập nhật review cho podcast buddy"
        parameters:
          - PodcastBuddyReviewId
          - AccountId  # không dùng để cập nhật, chỉ để xác thực quyền
          - Title
          - Content
          - Rating
        next-request-data:
          - PodcastBuddyReviewId
          - AccountId
          - Title
          - Content
          - Rating
        response-data:
          - PodcastBuddyReviewId
          - AccountId
          - Title
          - Content
          - Rating
        onSuccess:
          emit: "update-podcast-buddy-review.success"
          topic: "public-review-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "update-podcast-buddy-review.failed"
          topic: "public-review-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []

  podcast-buddy-review-deletion-flow:
    topic: "public-review-management-domain"
    handle-service: "SagaOrchestratorService"
    description: "Xóa review cho podcast buddy"
    save-file: ""
    steps:
      - name: "delete-podcast-buddy-review"
        topic: "public-review-management-domain"
        handle-service: "PodcastService"
        description: "Xóa review cho podcast buddy"
        parameters:
          - PodcastBuddyReviewId
          - AccountId # không dùng để xóa, chỉ để xác thực quyền
        next-request-data:
          - PodcastBuddyReviewId
          - AccountId
        response-data:
          - PodcastBuddyReviewId
          - AccountId
        onSuccess:
          emit: "delete-podcast-buddy-review.success"
          topic: "public-review-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "delete-podcast-buddy-review.failed"
          topic: "public-review-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []

  podcast-buddy-review-all-deletion-flow:
    topic: "public-review-management-domain"
    handle-service: "SagaOrchestratorService"
    description: "Xóa tất cả review cho podcast buddy"
    save-file: ""
    steps:
      - name: "delete-all-podcast-buddy-reviews"
        topic: "public-review-management-domain"
        handle-service: "PodcastService"
        description: "Xóa tất cả review cho podcast buddy"
        parameters:
          - PodcastBuddyId
        next-request-data:
          - PodcastBuddyId
        response-data:
          - PodcastBuddyId
        onSuccess:
          emit: "delete-all-podcast-buddy-reviews.success"
          topic: "public-review-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "delete-all-podcast-buddy-reviews.failed"
          topic: "public-review-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []

  podcast-buddy-report-submission-flow:
    topic: "report-management-domain"
    handle-service: "SagaOrchestratorService"
    description: "Báo cáo podcast buddy"
    save-file: ""
    steps:
      - name: "create-podcast-buddy-report"
        topic: "report-management-domain"
        handle-service: "ModerationService"
        description: "Tạo report báo cáo podcaster buddy vi phạm"
        parameters:
          - AccountId
          - PodcastBuddyId
          - PodcastBuddyReportTypeId
          - Content
        next-request-data:
          - AccountId
          - PodcastBuddyId
          - PodcastBuddyReportTypeId
          - Content
        response-data:
          - PodcastBuddyReportId
          - AccountId
          - PodcastBuddyId
          - PodcastBuddyReportTypeId
          - Content
          - CreatedAt
        onSuccess:
          emit: "create-podcast-buddy-report.success"
          topic: "report-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "create-podcast-buddy-report.failed"
          topic: "report-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []

  show-report-submission-flow:
    topic: "report-management-domain"
    handle-service: "SagaOrchestratorService"
    description: "Báo cáo podcast show"
    save-file: ""
    steps:
      - name: "create-show-report"
        topic: "report-management-domain"
        handle-service: "ModerationService"
        description: "Tạo report báo cáo show vi phạm"
        parameters:
          - AccountId
          - PodcastShowId
          - PodcastShowReportTypeId
          - Content
        next-request-data:
          - AccountId
          - PodcastShowId
          - PodcastShowReportTypeId
          - Content
        response-data:
          - PodcastShowReportId
          - AccountId
          - PodcastShowId
          - PodcastShowReportTypeId
          - Content
          - CreatedAt
        onSuccess:
          emit: "create-show-report.success"
          topic: "report-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "create-show-report.failed"
          topic: "report-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []

  episode-report-submission-flow:
    topic: "report-management-domain"
    handle-service: "SagaOrchestratorService"
    description: "Báo cáo podcast episode"
    save-file: ""
    steps:
      - name: "create-episode-report"
        topic: "report-management-domain"
        handle-service: "ModerationService"
        description: "Tạo report báo cáo episode vi phạm"
        parameters:
          - AccountId
          - PodcastEpisodeId
          - PodcastEpisodeReportTypeId
          - Content
        next-request-data:
          - AccountId
          - PodcastEpisodeId
          - PodcastEpisodeReportTypeId
          - Content
        response-data:
          - PodcastEpisodeReportId
          - AccountId
          - PodcastEpisodeId
          - PodcastEpisodeReportTypeId
          - Content
          - CreatedAt
        onSuccess:
          emit: "create-episode-report.success"
          topic: "report-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "create-episode-report.failed"
          topic: "report-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []

  podcast-buddy-report-resolve-flow:
    topic: "report-management-domain"
    handle-service: "SagaOrchestratorService"
    description: "Xử lý báo cáo podcast buddy"
    save-file: ""
    steps:
      - name: "resolve-podcast-buddy-report"
        topic: "report-management-domain"
        handle-service: "ModerationService"
        description: "Staff resolve podcast buddy report và chạy flow user-violation-punishment-flow nếu có phạt"
        parameters:
          - AccountId 
          - IsResolved
          - IsTakenEffect
          - ResolvedViolationPoint
          - PodcastBuddyReportReviewSessionId
        next-request-data:
          - AccountId
          - IsResolved
          - IsTakenEffect
          - ResolvedViolationPoint
          - PodcastBuddyReportReviewSessionId
        response-data:
          - AccountId
          - IsResolved
          - IsTakenEffect
          - ResolvedViolationPoint
          - PodcastBuddyReportReviewSessionId
          - UpdatedAt
        onSuccess:
          emit: "resolve-podcast-buddy-report.success"
          topic: "report-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "resolve-podcast-buddy-report.failed"
          topic: "report-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []

  podcast-show-report-resolve-flow:
    topic: "report-management-domain"
    handle-service: "SagaOrchestratorService"
    description: "Xử lý báo cáo podcast show"
    save-file: ""
    steps:
      - name: "resolve-show-report"
        topic: "report-management-domain"
        handle-service: "ModerationService"
        description: "Resolve hết các podcast buddy report thuộc về podcaster"
        parameters:
          - AccountId
          - IsResolved
          - IsTakenEffect
          - PodcastShowReportReviewSessionId
        next-request-data:
          - AccountId
          - IsResolved
          - IsTakenEffect
          - PodcastShowReportReviewSessionId
        response-data:
          - AccountId
          - IsResolved
          - IsTakenEffect
          - PodcastShowReportReviewSessionId
          - UpdatedAt
        onSuccess:
          emit: "resolve-show-report.success"
          topic: "report-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "resolve-show-report.failed"
          topic: "report-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []

  podcast-episode-report-resolve-flow:
    topic: "report-management-domain"
    handle-service: "SagaOrchestratorService"
    description: "Xử lý báo cáo podcast episode"
    save-file: ""
    steps:
      - name: "resolve-episode-report"
        topic: "report-management-domain"
        handle-service: "ModerationService"
        description: "Staff resolve podcast episode report và chạy flow episode-deletion-flow nếu có phạt"
        parameters:
          - AccountId
          - IsResolved
          - IsTakenEffect
          - PodcastEpisodeReportReviewSessionId
        next-request-data:
          - AccountId
          - IsResolved
          - IsTakenEffect
          - PodcastEpisodeReportReviewSessionId
        response-data:
          - AccountId
          - IsResolved
          - IsTakenEffect
          - PodcastEpisodeReportReviewSessionId
          - UpdatedAt
        onSuccess:
          emit: "resolve-episode-report.success"
          topic: "report-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "resolve-episode-report.failed"
          topic: "report-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []

  content-dmca-accusation-creation-flow:
    topic: "dmca-management-domain"
    handle-service: "SagaOrchestratorService"
    description: "Tạo cáo buộc DMCA"
    save-file: "DMCANoticeAttachFile"
    steps:
      - name: "create-dmca-accusation"
        topic: "dmca-management-domain"
        handle-service: "ModerationService"
        description: "Tạo DMCAaccusation và DMCAnotice"
        parameters:
          - AccountId
          - AccountEmail
          - AccountPhone
          - PodcastShowId
          - PodcastEpisodeId
          - GoodFaithStatement
          - WorkClaimed
          - Signature
          - DMCANoticeAttachFileKeys
        next-request-data:
          - AccountId
          - AccountEmail
          - AccountPhone
          - PodcastShowId
          - PodcastEpisodeId
          - GoodFaithStatement
          - WorkClaimed
          - Signature
          - DMCAAttachFileKeys
        response-data:
          - DMCAAccusationId
          - DMCANoticeId
          - AccountId
          - AccountEmail
          - AccountPhone
          - PodcastShowId
          - PodcastEpisodeId
          - GoodFaithStatement
          - WorkClaimed
          - Signature
          - DMCAAttachFileKeys
          - CreatedAt
        onSuccess:
          emit: "create-dmca-accusation.success"
          topic: "dmca-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "create-dmca-accusation.failed"
          topic: "dmca-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []

  content-dmca-staff-assignment-flow:
    topic: "dmca-management-domain"
    handle-service: "SagaOrchestratorService"
    description: "Staff nhận xử lý cáo buộc DMCA"
    save-file: ""
    steps:
      - name: "assign-dmca-accusation-to-staff"
        topic: "dmca-management-domain"
        handle-service: "ModerationService"
        description: "Staff nhận xử lý cáo buộc DMCA"
        parameters:
          - DMCAAccusationId
          - StaffAccountId
        next-request-data:
          - DMCAAccusationId
          - StaffAccountId
        response-data:
          - DMCAAccusationId
          - StaffAccountId
          - UpdatedAt
        onSuccess:
          emit: "assign-dmca-accusation-to-staff.success"
          topic: "dmca-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "assign-dmca-accusation-to-staff.failed"
          topic: "dmca-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []

  content-dmca-counter-notice-creation-flow:
    topic: "dmca-management-domain"
    handle-service: "SagaOrchestratorService"
    description: "Tạo phản hồi cáo buộc DMCA"
    save-file: ""
    steps:
      - name: "create-counter-notice"
        topic: "dmca-management-domain"
        handle-service: "ModerationService"
        description: "Tạo DMCAcounternotice"
        parameters:
          - DMCAAccusationId
          - AccountId
          - AccountEmail
          - AccountPhone
          - StatementPerjury
          - Jurisdiction
          - Signature
          - FiledDate
          - CounterNoticeAttachFileKeys 
        next-request-data:
          - DMCAAccusationId
          - AccountId
          - AccountEmail
          - AccountPhone
          - StatementPerjury
          - Jurisdiction
          - Signature
          - FiledDate
          - CounterNoticeAttachFileKeys
        response-data:
          - DMCAAccusationId
          - DMCAcounternoticeId
          - AccountId
          - AccountEmail
          - AccountPhone
          - StatementPerjury
          - Jurisdiction
          - Signature
          - FiledDate
          - CounterNoticeAttachFileKeys
          - CreatedAt
        onSuccess:
          emit: "create-counter-notice.success"
          topic: "dmca-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "create-counter-notice.failed"
          topic: "dmca-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []

  content-dmca-lawsuit-creation-flow:
    topic: "dmca-management-domain"
    handle-service: "SagaOrchestratorService"
    description: "Tạo thông tin kiện cáo cáo buộc DMCA"
    save-file: ""
    steps:
      - name: "create-lawsuit-proof"
        topic: "dmca-management-domain"
        handle-service: "ModerationService"
        description: "Tạo  LawsuitProof"
        parameters:
          - DMCAAccusationId
          - AccountId
          - GoodFaithStatement
          - CourtName
          - CaseNumber
          - FilingDate
          - Signature
          - LawsuitProofAttachFileKeys
        next-request-data:
          - DMCAAccusationId
          - AccountId
          - GoodFaithStatement
          - CourtName
          - CaseNumber
          - FilingDate
          - Signature
          - LawsuitProofAttachFileKeys
        response-data:
          - DMCAAccusationId
          - LawsuitProofId
          - AccountId
          - GoodFaithStatement
          - CourtName
          - CaseNumber
          - FilingDate
          - Signature
          - LawsuitProofAttachFileKeys
          - CreatedAt
        onSuccess:
          emit: "create-lawsuit-proof.success"
          topic: "dmca-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "create-lawsuit-proof.failed"
          topic: "dmca-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []

  update-dmca-accusation-status-flow:
    topic: "dmca-management-domain"
    handle-service: "SagaOrchestratorService"
    description: "Cập nhật trạng thái phiên tòa cáo buộc DMCA"
    save-file: ""
    steps:
      - name: "update-dmca-accusation-status"
        topic: "dmca-management-domain"
        handle-service: "ModerationService"
        description: "Cập nhật status của DMCAAccusation và chạy flow dựa status đó"
        parameters:
          - AccountId
          - DMCAAccusationId
          - DMCAAccusationAction
          - DMCAAccusationTakenDownReasonEnum  
          - AttachmentFileKeys
        next-request-data:
          - AccountId
          - DMCAAccusationId
          - DMCAAccusationAction
          - DMCAAccusationTakenDownReasonEnum
          - AttachmentFileKeys
        response-data:
          - AccountId
          - DMCAAccusationId
          - DMCAAccusationAction
          - DMCAAccusationTakenDownReasonEnum
          - AttachmentFileKeys
        onSuccess:
          emit: "update-dmca-accusation-status.success"
          topic: "dmca-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "update-dmca-accusation-status.failed"
          topic: "dmca-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []

  dismiss-channel-dmca-accusation-flow:
    topic: "dmca-management-domain"
    handle-service: "SagaOrchestratorService"
    description: "Hủy bỏ cáo buộc DMCA cho kênh"
    save-file: ""
    steps:
      - name: "dismiss-channel-dmca-accusation"
        topic: "dmca-management-domain"
        handle-service: "ModerationService"
        description: "Hủy bỏ cáo buộc DMCA cho kênh"
        parameters:
          - ChannelId
        next-request-data:
          - ChannelId
        response-data:
          - ChannelId
        onSuccess:
          emit: "dismiss-channel-dmca-accusation.success"
          topic: "dmca-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "dismiss-channel-dmca-accusation.failed"
          topic: "dmca-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []

  dismiss-show-dmca-accusation-flow:
    topic: "dmca-management-domain"
    handle-service: "SagaOrchestratorService"
    description: "Hủy bỏ cáo buộc DMCA cho show"
    save-file: ""
    steps:
      - name: "dismiss-show-dmca-accusation"
        topic: "dmca-management-domain"
        handle-service: "ModerationService"
        description: "Hủy bỏ cáo buộc DMCA cho show"
        parameters:
          - PodcastShowId
        next-request-data:
          - PodcastShowId
        response-data:
          - PodcastShowId
        onSuccess:
          emit: "dismiss-show-dmca-accusation.success"
          topic: "dmca-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "dismiss-show-dmca-accusation.failed"
          topic: "dmca-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []

  dismiss-episode-dmca-accusation-flow:
    topic: "dmca-management-domain"
    handle-service: "SagaOrchestratorService"
    description: "Hủy bỏ cáo buộc DMCA cho episode"
    save-file: ""
    steps:
      - name: "dismiss-episode-dmca-accusation"
        topic: "dmca-management-domain"
        handle-service: "ModerationService"
        description: "Hủy bỏ cáo buộc DMCA cho episode"
        parameters:
          - PodcastEpisodeId
        next-request-data:
          - PodcastEpisodeId
        response-data:
          - PodcastEpisodeId
        onSuccess:
          emit: "dismiss-episode-dmca-accusation.success"
          topic: "dmca-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "dismiss-episode-dmca-accusation.failed"
          topic: "dmca-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []

  dmca-accusation-report-creation-flow:
    topic: "dmca-management-domain"
    handler-service: "ModerationService"
    description: "Handles the creation of dmca accusation reports."
    save-files: ""
    steps:
      - name: "create-dmca-accusation-report"
        topic: "dmca-management-domain"
        handler-service: "ModerationService"
        description: "Creates a dmca accusation report."
        parameters:
          - AccountId
          - DMCAAccusationId
          - DmcaAccusationConclusionReportTypeId
          - Description
          - InvalidReason
        next-request-data:
          - AccountId
          - DMCAAccusationId
          - DmcaAccusationConclusionReportTypeId
          - Description
          - InvalidReason
        response-data:
          - AccountId
          - DMCAAccusationId
          - DmcaAccusationConclusionReportTypeId
          - Description
          - InvalidReason
          - CreatedAt
        onSuccess:
          emit: "create-dmca-accusation-report.success"
          topic: "dmca-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "create-dmca-accusation-report.failed"
          topic: "dmca-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []

  dmca-accusation-report-validation-flow:
    topic: "dmca-management-domain"
    handler-service: "ModerationService"
    description: "Handles the validation of dmca accusation reports."
    save-files: ""
    steps:
      - name: "validate-dmca-accusation-report"
        topic: "dmca-management-domain"
        handler-service: "ModerationService"
        description: "Validates a dmca accusation report."
        parameters:
          - DMCAAccusationConclusionReportId
          - IsValid
        next-request-data:
          - DMCAAccusationConclusionReportId
          - IsValid
        response-data:
          - DMCAAccusationConclusionReportId
          - IsValid
          - UpdatedAt
        onSuccess:
          emit: "validate-dmca-accusation-report.success"
          topic: "dmca-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "validate-dmca-accusation-report.failed"
          topic: "dmca-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []

  dmca-accusation-report-cancellation-flow:
    topic: "dmca-management-domain"
    handler-service: "ModerationService"
    description: "Handles the cancellation of dmca accusation reports."
    save-files: ""
    steps:
      - name: "cancel-dmca-accusation-report"
        topic: "dmca-management-domain"
        handler-service: "ModerationService"
        description: "Cancels a dmca accusation report."
        parameters:
          - AccountId
          - DMCAAccusationConclusionReportId
        next-request-data:
          - AccountId
          - DMCAAccusationConclusionReportId
        response-data:
          - AccountId
          - DMCAAccusationConclusionReportId
          - CancelledAt
        onSuccess:
          emit: "cancel-dmca-accusation-report.success"
          topic: "dmca-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "cancel-dmca-accusation-report.failed"
          topic: "dmca-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []


  config-creation-flow:
    topic: "system-configuration-domain"
    handle-service: "SagaOrchestratorService"
    description: "Tạo cấu hình hệ thống"
    save-file: ""
    steps:
      - name: "create-system-config"
        topic: "system-configuration-domain"
        handle-service: "SystemConfigurationService"
        description: "Admin tạo một config mới"
        parameters:
          - Name
          - PodcastSubscriptionConfig
          - PodcastSuggestionConfig
          - BookingConfig
          - AccountConfig
          - AccountViolationLevelConfig
          - ReviewSessionConfig
        next-request-data:
          - Name
          - PodcastSubscriptionConfig
          - PodcastSuggestionConfig
          - BookingConfig
          - AccountConfig
          - AccountViolationLevelConfig
          - ReviewSessionConfig
        response-data:
          - SystemConfigProfileId
          - Name
          - PodcastSubscriptionConfig
          - PodcastSuggestionConfig
          - BookingConfig
          - AccountConfig
          - AccountViolationLevelConfig
          - ReviewSessionConfig
          - CreatedAt
        onSuccess:
          emit: "create-system-config.success"
          topic: "system-configuration-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "create-system-config.failed"
          topic: "system-configuration-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []

  config-update-flow:
    topic: "system-configuration-domain"
    handle-service: "SagaOrchestratorService"
    description: "Cập nhật cấu hình hệ thống"
    save-file: ""
    steps:
      - name: "update-system-config"
        topic: "system-configuration-domain"
        handle-service: "SystemConfigurationService"
        description: "Admin cập nhật một config"
        parameters:
          - SystemConfigProfileId
          - Name
          - PodcastSubscriptionConfig
          - PodcastSuggestionConfig
          - BookingConfig
          - AccountConfig
          - AccountViolationLevelConfig
          - ReviewSessionConfig
        next-request-data:
          - SystemConfigProfileId
          - Name
          - PodcastSubscriptionConfig
          - PodcastSuggestionConfig
          - BookingConfig
          - AccountConfig
          - AccountViolationLevelConfig
          - ReviewSessionConfig
        response-data:
          - SystemConfigProfileId
          - Name
          - PodcastSubscriptionConfig
          - PodcastSuggestionConfig
          - BookingConfig
          - AccountConfig
          - AccountViolationLevelConfig
          - ReviewSessionConfig
          - UpdatedAt
        onSuccess:
          emit: "update-system-config.success"
          topic: "system-configuration-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "update-system-config.failed"
          topic: "system-configuration-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []

  config-activation-flow:
    topic: "system-configuration-domain"
    handle-service: "SagaOrchestratorService"
    description: "Kích hoạt cấu hình hệ thống"
    save-file: ""
    steps:
      - name: "activate-system-config"
        topic: "system-configuration-domain"
        handle-service: "SystemConfigurationService"
        description: "Admin kích hoạt hoặc tắt config"
        parameters:
          - SystemConfigProfileId
          - IsActive
        next-request-data:
          - SystemConfigProfileId
          - IsActive
        response-data:
          - SystemConfigProfileId
          - IsActive
          - UpdatedAt
        onSuccess:
          emit: "activate-system-config.success"
          topic: "system-configuration-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "activate-system-config.failed"
          topic: "system-configuration-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []

  config-deletion-flow:
    topic: "system-configuration-domain"
    handle-service: "SagaOrchestratorService"
    description: "Xóa cấu hình hệ thống"
    save-file: ""
    steps:
      - name: "delete-system-config"
        topic: "system-configuration-domain"
        handle-service: "SystemConfigurationService"
        description: "Admin xóa một config"
        parameters:
          - SystemConfigProfileId
        next-request-data:
          - SystemConfigProfileId
        response-data:
          - SystemConfigProfileId
          - DeletedAt
        onSuccess:
          emit: "delete-system-config.success"
          topic: "system-configuration-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "delete-system-config.failed"
          topic: "system-configuration-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []

  user-service-mail-sending-flow:
    topic: "user-management-domain"
    handle-service: "SagaOrchestratorService"
    description: "Gửi email dạng UserService enum"
    save-file: ""
    steps:
      - name: "send-user-service-email"
        topic: "user-management-domain"
        handle-service: "UserService"
        description: "Gửi email với các thông tin cần thiết"
        parameters:
          SendUserServiceEmailMailInfo: 
            - MailTypeName
            - MailObject
            - ToEmail
        next-request-data:
          SendUserServiceEmailMailInfo: 
            - MailTypeName
            - MailObject
            - ToEmail
        response-data:
          SendUserServiceEmailMailInfo: 
            - MailTypeName
            - MailObject
            - ToEmail
        onSuccess:
          emit: "send-user-service-email.success"
          topic: "user-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "send-user-service-email.failed"
          topic: "user-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []

  system-configuration-service-mail-sending-flow:
    topic: "system-configuration-domain"
    handle-service: "SagaOrchestratorService"
    description: "Gửi email dạng SystemConfigurationService enum"
    save-file: ""
    steps:
      - name: "send-system-configuration-service-email"
        topic: "system-configuration-domain"
        handle-service: "SystemConfigurationService"
        description: "Gửi email với các thông tin cần thiết"
        parameters:
          SendSystemConfigurationServiceEmailMailInfo: 
            - MailTypeName
            - MailObject
            - ToEmail
        next-request-data:
          SendSystemConfigurationServiceEmailMailInfo: 
            - MailTypeName
            - MailObject
            - ToEmail
        response-data:
          SendSystemConfigurationServiceEmailMailInfo: 
            - MailTypeName
            - MailObject
            - ToEmail
        onSuccess:
          emit: "send-system-configuration-service-email.success"
          topic: "system-configuration-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "send-system-configuration-service-email.failed"
          topic: "system-configuration-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []

  booking-management-service-mail-sending-flow:
    topic: "booking-management-domain"
    handle-service: "SagaOrchestratorService"
    description: "Gửi email dạng BookingManagementService enum"
    save-file: ""
    steps:
      - name: "send-booking-management-service-email"
        topic: "booking-management-domain"
        handle-service: "BookingManagementService"
        description: "Gửi email với các thông tin cần thiết"
        parameters:
          SendBookingManagementServiceEmailMailInfo: 
            - MailTypeName
            - MailObject
            - ToEmail
        next-request-data:
          SendBookingManagementServiceEmailMailInfo: 
            - MailTypeName
            - MailObject
            - ToEmail
        response-data:
          SendBookingManagementServiceEmailMailInfo: 
            - MailTypeName
            - MailObject
            - ToEmail
        onSuccess:
          emit: "send-booking-management-service-email.success"
          topic: "booking-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "send-booking-management-service-email.failed"
          topic: "booking-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []

  podcast-service-mail-sending-flow:
    topic: "content-management-domain"
    handle-service: "SagaOrchestratorService"
    description: "Gửi email dạng PodcastService enum"
    save-file: ""
    steps:
      - name: "send-podcast-service-email"
        topic: "content-management-domain"
        handle-service: "PodcastService"
        description: "Gửi email với các thông tin cần thiết"
        parameters:
          SendPodcastServiceEmailMailInfo: 
            - MailTypeName
            - MailObject
            - ToEmail
        next-request-data:
          SendPodcastServiceEmailMailInfo: 
            - MailTypeName
            - MailObject
            - ToEmail
        response-data:
          SendPodcastServiceEmailMailInfo: 
            - MailTypeName
            - MailObject
            - ToEmail
        onSuccess:
          emit: "send-podcast-service-email.success"
          topic: "content-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "send-podcast-service-email.failed"
          topic: "content-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []

  subscription-service-mail-sending-flow:
    topic: "subscription-management-domain"
    handle-service: "SagaOrchestratorService"
    description: "Gửi email dạng SubscriptionService enum"
    save-file: ""
    steps:
      - name: "send-subscription-service-email"
        topic: "subscription-management-domain"
        handle-service: "SubscriptionService"
        description: "Gửi email với các thông tin cần thiết"
        parameters:
          SendSubscriptionServiceEmailMailInfo: 
            - MailTypeName
            - MailObject
            - ToEmail
        next-request-data:
          SendSubscriptionServiceEmailMailInfo: 
            - MailTypeName
            - MailObject
            - ToEmail
        response-data:
          SendSubscriptionServiceEmailMailInfo: 
            - MailTypeName
            - MailObject
            - ToEmail
        onSuccess:
          emit: "send-subscription-service-email.success"
          topic: "subscription-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "send-subscription-service-email.failed"
          topic: "subscription-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []

  moderation-service-mail-sending-flow:
    topic: "report-management-domain"
    handle-service: "SagaOrchestratorService"
    description: "Gửi email dạng ModerationService enum"
    save-file: ""
    steps:
      - name: "send-moderation-service-email"
        topic: "report-management-domain"
        handle-service: "ModerationService"
        description: "Gửi email với các thông tin cần thiết"
        parameters:
          SendModerationServiceEmailMailInfo: 
            - MailTypeName
            - MailObject
            - ToEmail
        next-request-data:
          SendModerationServiceEmailMailInfo: 
            - MailTypeName
            - MailObject
            - ToEmail
        response-data:
          SendModerationServiceEmailMailInfo: 
            - MailTypeName
            - MailObject
            - ToEmail
        onSuccess:
          emit: "send-moderation-service-email.success"
          topic: "report-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "send-moderation-service-email.failed"
          topic: "report-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []

  transaction-service-mail-sending-flow:
    topic: "payment-processing-domain"
    handle-service: "SagaOrchestratorService"
    description: "Gửi email dạng TransactionService enum"
    save-file: ""
    steps:
      - name: "send-transaction-service-email"
        topic: "payment-processing-domain"
        handle-service: "TransactionService"
        description: "Gửi email với các thông tin cần thiết"
        parameters:
          SendTransactionServiceEmailMailInfo: 
            - MailTypeName
            - MailObject
            - ToEmail
        next-request-data:
          SendTransactionServiceEmailMailInfo: 
            - MailTypeName
            - MailObject  
            - ToEmail
        response-data:
          SendTransactionServiceEmailMailInfo: 
            - MailTypeName
            - MailObject
            - ToEmail
        onSuccess:
          emit: "send-transaction-service-email.success"
          topic: "payment-processing-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "send-transaction-service-email.failed"
          topic: "payment-processing-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []

  unpublish-show-rollback-flow:
    topic: "content-management-domain"
    handle-service: "SagaOrchestratorService"
    description: "Các bước để rollback các hành động đã thực hiện trong các flow khác"
    save-file: ""
    steps:
    - name: "unpublish-show-rollback"
      topic: "content-management-domain"
      handle-service: "PodcastService"
      description: "Chuyển trạng thái của show lại và xóa deletedAt của các podcast subscription registration"
      parameters:
        - PodcastShowId
      next-request-data:
        - PodcastShowId
      response-data:
        - PodcastShowId
      onSuccess:
        emit: "unpublish-show-rollback.success"
        topic: "content-management-domain"
        handle-service: "SagaOrchestratorService"
        nextSteps: []
        nextFlows: []
      onFailure:
        emit: "unpublish-show-rollback.failed"
        topic: "content-management-domain"
        handle-service: "SagaOrchestratorService"
        nextSteps: []
        nextFlows: []

  unpublish-channel-rollback-flow:
    topic: "content-management-domain"
    handle-service: "SagaOrchestratorService"
    description: "Rollback việc hủy xuất bản channel"
    save-file: ""
    steps:
    - name: "unpublish-channel-rollback"
      topic: "content-management-domain"
      handle-service: "PodcastService"
      description: "Chuyển trạng thái của channel và show lại và xóa deletedAt của các podcast subscription registration"
      parameters:
        - PodcastChannelId
        - PodcastShowId
      next-request-data:
        - PodcastChannelId
        - PodcastShowId
      response-data:
        - PodcastChannelId
        - PodcastShowId
      onSuccess:
        emit: "unpublish-channel-rollback.success"
        topic: "content-management-domain"
        handle-service: "SagaOrchestratorService"
        nextSteps: []
        nextFlows: []
      onFailure:
        emit: "unpublish-channel-rollback.failed"
        topic: "content-management-domain"
        handle-service: "SagaOrchestratorService"
        nextSteps: []
        nextFlows: []

  confirm-payment-rollback-flow:
    topic: "payment-processing-domain"
    handle-service: "SagaOrchestratorService"
    description: "Các bước để rollback các hành động đã thực hiện trong các flow khác"
    save-file: ""
    steps:
    - name: "confirm-payment-rollback"
      topic: "payment-processing-domain"
      handle-service: "TransactionService"
      description: "Chuyển trạng thái của account balance transaction thành failed"
      parameters:
        - AccountBalanceTransactionId
      next-request-data:
        - AccountBalanceTransactionId
      response-data:
        - AccountBalanceTransactionId
        - TransactionStatusId
      onSuccess:
        emit: "confirm-payment-rollback.success"
        topic: "payment-processing-domain"
        handle-service: "SagaOrchestratorService"
        nextSteps: []
        nextFlows: []
      onFailure:
        emit: "confirm-payment-rollback.failed"
        topic: "payment-processing-domain"
        handle-service: "SagaOrchestratorService"
        nextSteps: []
        nextFlows: []

  add-account-balance-amount-rollback-flow:
    topic: "user-management-domain"
    handle-service: "SagaOrchestratorService"
    description: "Các bước để rollback các hành động đã thực hiện trong các flow khác"
    save-file: ""
    steps:
    - name: "add-account-balance-amount-rollback"
      topic: "user-management-domain"
      handle-service: "UserService"
      description: "Rút lại tiền đã gửi tới ví (chỉ 1 trong 2 accountid và podcasterid được có id)"
      parameters:
        - AccountId
        - Amount
      next-request-data:
        - AccountId
        - Amount
      response-data:
        - AccountId
        - Amount
        - NewBalance
      onSuccess:
        emit: "add-account-balance-amount-rollback.success"
        topic: "user-management-domain"
        handle-service: "SagaOrchestratorService"
        nextSteps: []
        nextFlows: []
      onFailure:
        emit: "add-account-balance-amount-rollback.failed"
        topic: "user-management-domain"
        handle-service: "SagaOrchestratorService"
        nextSteps: []
        nextFlows: []

  subtract-account-balance-amount-rollback-flow:
    topic: "user-management-domain"
    handle-service: "SagaOrchestratorService"
    description: "Các bước để rollback các hành động đã thực hiện trong các flow khác"
    save-file: ""
    steps:
    - name: "subtract-account-balance-amount-rollback"
      topic: "user-management-domain"
      handle-service: "UserService"
      description: "Thêm lại tiền đã rút từ ví (chỉ 1 trong 2 accountid và podcasterid được có id)"
      parameters:
        - AccountId
        - Amount
      next-request-data:
        - AccountId
        - Amount
      response-data:
        - AccountId
        - Amount
        - NewBalance
      onSuccess:
        emit: "subtract-account-balance-amount-rollback.success"
        topic: "user-management-domain"
        handle-service: "SagaOrchestratorService"
        nextSteps: []
        nextFlows: []
      onFailure:
        emit: "subtract-account-balance-amount-rollback.failed"
        topic: "user-management-domain"
        handle-service: "SagaOrchestratorService"
        nextSteps: []
        nextFlows: []

  add-podcaster-balance-amount-rollback-flow:
    topic: "user-management-domain"
    handle-service: "SagaOrchestratorService"
    description: "Các bước để rollback các hành động đã thực hiện trong các flow khác"
    save-file: ""
    steps:
    - name: "add-podcaster-balance-amount-rollback"
      topic: "user-management-domain"
      handle-service: "UserService"
      description: "Rút lại tiền đã gửi tới ví Podcaster"
      parameters:
        - PodcasterId
        - Amount
      next-request-data:
        - PodcasterId
        - Amount
      response-data:
        - PodcasterId
        - Amount
        - NewBalance
      onSuccess:
        emit: "add-podcaster-balance-amount-rollback.success"
        topic: "user-management-domain"
        handle-service: "SagaOrchestratorService"
        nextSteps: []
        nextFlows: []
      onFailure:
        emit: "add-podcaster-balance-amount-rollback.failed"
        topic: "user-management-domain"
        handle-service: "SagaOrchestratorService"
        nextSteps: []
        nextFlows: []


  create-account-balance-transaction-rollback-flow:
    topic: "payment-processing-domain"
    handle-service: "SagaOrchestratorService"
    description: "Các bước để rollback các hành động đã thực hiện trong các flow khác"
    save-file: ""
    steps:
    - name: "create-account-balance-transaction-rollback"
      topic: "payment-processing-domain"
      handle-service: "TransactionService"
      description: "Chuyển trạng thái của account balance transaction thành failed"
      parameters:
        - AccountBalanceTransactionId
      next-request-data:
        - AccountBalanceTransactionId
      response-data:
        - AccountBalanceTransactionId
        - TransactionStatusId
      onSuccess:
        emit: "create-account-balance-transaction-rollback.success"
        topic: "payment-processing-domain"
        handle-service: "SagaOrchestratorService"
        nextSteps: []
        nextFlows: []
      onFailure:
        emit: "create-account-balance-transaction-rollback.failed"
        topic: "payment-processing-domain"
        handle-service: "SagaOrchestratorService"
        nextSteps: []
        nextFlows: []

  create-booking-transaction-rollback-flow:
    topic: "payment-processing-domain"
    handle-service: "SagaOrchestratorService"
    description: "Các bước để rollback các hành động đã thực hiện trong các flow khác"
    save-file: ""
    steps:
    - name: "create-booking-transaction-rollback"
      topic: "payment-processing-domain"
      handle-service: "TransactionService"
      description: "Chuyển trạng thái của booking transaction thành failed"
      parameters:
        - BookingTransactionId
      next-request-data:
        - BookingTransactionId
      response-data:
        - BookingTransactionId
        - TransactionStatusId
      onSuccess:
        emit: "create-booking-transaction-rollback.success"
        topic: "payment-processing-domain"
        handle-service: "SagaOrchestratorService"
        nextSteps: []
        nextFlows: []
      onFailure:
        emit: "create-booking-transaction-rollback.failed"
        topic: "payment-processing-domain"
        handle-service: "SagaOrchestratorService"
        nextSteps: []
        nextFlows: []

  create-podcast-subscription-transaction-rollback-flow:
    topic: "payment-processing-domain"
    handle-service: "SagaOrchestratorService"
    description: "Các bước để rollback các hành động đã thực hiện trong các flow khác"
    save-file: ""
    steps:
    - name: "create-podcast-subscription-transaction-rollback"
      topic: "payment-processing-domain"
      handle-service: "TransactionService"
      description: "Chuyển trạng thái của member subscription transaction thành failed"
      parameters:
        - PodcastSubscriptionTransactionId
      next-request-data:
        - PodcastSubscriptionTransactionId
      response-data:
        - MemberSubscriptionTransactionId
        - TransactionStatusId
      onSuccess:
        emit: "create-podcast-subscription-transaction-rollback.success"
        topic: "payment-processing-domain"
        handle-service: "SagaOrchestratorService"
        nextSteps: []
        nextFlows: []
      onFailure:
        emit: "create-podcast-subscription-transaction-rollback.failed"
        topic: "payment-processing-domain"
        handle-service: "SagaOrchestratorService"
        nextSteps: []
        nextFlows: []

  create-member-subscription-transaction-rollback-flow:
    topic: "payment-processing-domain"
    handle-service: "SagaOrchestratorService"
    description: "Các bước để rollback các hành động đã thực hiện trong các flow khác"
    save-file: ""
    steps:
    - name: "create-member-subscription-transaction-rollback"
      topic: "payment-processing-domain"
      handle-service: "TransactionService"
      description: "Chuyển trạng thái của member subscription transaction thành failed"
      parameters:
        - MemberSubscriptionTransactionId
      next-request-data:
        - MemberSubscriptionTransactionId
      response-data:
        - MemberSubscriptionTransactionId
        - TransactionStatusId
      onSuccess:
        emit: "create-member-subscription-transaction-rollback.success"
        topic: "payment-processing-domain"
        handle-service: "SagaOrchestratorService"
        nextSteps: []
        nextFlows: []
      onFailure:
        emit: "create-member-subscription-transaction-rollback.failed"
        topic: "payment-processing-domain"
        handle-service: "SagaOrchestratorService"
        nextSteps: []
        nextFlows: []
  
  create-channel-favorited-rollback-flow:
    topic: "user-management-domain"
    handle-service: "SagaOrchestratorService"
    description: "Các bước để rollback các hành động đã thực hiện trong các flow khác"
    save-file: ""
    steps:
      - name: "create-channel-favorited-rollback"
        topic: "user-management-domain"
        handle-service: "PodcastService"
        description: "Xóa channel khỏi danh sách yêu thích"
        parameters:
          - AccountId
          - PodcastChannelId
        next-request-data:
          - AccountId
          - PodcastChannelId
        response-data:
          - AccountId
          - PodcastChannelId
        onSuccess:
          emit: "create-channel-favorited-rollback.success"
          topic: "user-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "create-channel-favorited-rollback.failed"
          topic: "user-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []

  delete-channel-favorited-rollback-flow:
    topic: "user-management-domain"
    handle-service: "SagaOrchestratorService"
    description: "Thêm kênh podcast vào danh sách yêu thích"
    save-file: ""
    steps:
      - name: "delete-channel-favorited-rollback"
        topic: "user-management-domain"
        handle-service: "PodcastService"
        description: "Xóa channel khỏi danh sách yêu thích"
        parameters:
          - PodcastChannelId
          - AffectedAccountIds
        next-request-data:
          - PodcastChannelId
          - AffectedAccountIds
        response-data:
          - AffectedAccountIds
          - PodcastChannelId
        onSuccess:
          emit: "delete-channel-favorited-rollback.success"
          topic: "user-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "delete-channel-favorited-rollback.failed"
          topic: "user-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []

  create-show-followed-rollback-flow:
    topic: "user-management-domain"
    handle-service: "SagaOrchestratorService"
    description: "Các bước để rollback các hành động đã thực hiện trong các flow khác"
    save-file: ""
    steps:
      - name: "create-show-followed-rollback"
        topic: "user-management-domain"
        handle-service: "PodcastService"
        description: "Xóa show khỏi danh sách theo dõi"
        parameters:
          - AccountId
          - PodcastShowId
        next-request-data:
          - AccountId
          - PodcastShowId
        response-data:
          - AccountId
          - PodcastShowId
        onSuccess:
          emit: "create-show-followed-rollback.success"
          topic: "user-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "create-show-followed-rollback.failed"
          topic: "user-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: [] 

  delete-show-followed-rollback-flow:
    topic: "user-management-domain"
    handle-service: "SagaOrchestratorService"
    description: "Thêm chương trình podcast vào danh sách theo dõi"
    save-file: ""
    steps:
      - name: "delete-show-followed-rollback"
        topic: "user-management-domain"
        handle-service: "PodcastService"
        description: "Unfollow show"
        parameters:
          - AffectedAccountIds
          - PodcastShowId
        next-request-data:
          - AffectedAccountIds
          - PodcastShowId
        response-data:
          - AffectedAccountIds
          - PodcastShowId
        onSuccess:
          emit: "delete-show-followed-rollback.success"
          topic: "user-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "delete-show-followed-rollback.failed"
          topic: "user-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
  
  create-episode-saved-rollback-flow:
    topic: "user-management-domain"
    handle-service: "SagaOrchestratorService"
    description: "Xóa tập podcast khỏi danh sách lưu"
    save-file: ""
    steps:
      - name: "create-episode-saved-rollback"
        topic: "content-management-domain"
        handle-service: "PodcastService"
        description: "Lưu episode vào danh sách đã lưu"
        parameters:
          - AccountId
          - PodcastEpisodeId
        next-request-data:
          - AccountId
          - PodcastEpisodeId
        response-data:
          - AccountId
          - PodcastEpisodeId
        onSuccess:
          emit: "create-episode-saved-rollback.success"
          topic: "user-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "create-episode-saved-rollback.failed"
          topic: "user-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []

  delete-episode-saved-rollback-flow:
    topic: "user-management-domain"
    handle-service: "SagaOrchestratorService"
    description: "Lưu tập podcast"
    save-file: ""
    steps:
      - name: "delete-episode-saved-rollback"
        topic: "user-management-domain"
        handle-service: "PodcastService"
        description: "Xóa episode khỏi danh sách đã lưu"
        parameters:
          - AffectedAccountIds
          - PodcastEpisodeId
        next-request-data:
          - AffectedAccountIds
          - PodcastEpisodeId
        response-data:
          - AffectedAccountIds
          - PodcastEpisodeId
        onSuccess:
          emit: "delete-episode-saved-rollback.success"
          topic: "user-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []
        onFailure:
          emit: "delete-episode-saved-rollback.failed"
          topic: "user-management-domain"
          handle-service: "SagaOrchestratorService"
          nextSteps: []
          nextFlows: []